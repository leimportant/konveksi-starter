import{b as B,u as U,G as C,o as D,g as a,j as u,q as l,x as s,y as O,z as f,l as r,I as $,m,F as p,D as c,k as y,P as q,p as T,A as k}from"./app-C0ZtNFPV.js";import{_ as E}from"./AppLayout.vue_vue_type_script_setup_true_lang-CxyMViV1.js";import{_ as w}from"./Button.vue_vue_type_script_setup_true_lang-B6TXREVN.js";import{_ as v}from"./Input.vue_vue_type_script_setup_true_lang-BWB1n0oK.js";import{u as F}from"./useToast-DV2nGitA.js";import{u as N}from"./useGoodReceiveStore-Bgi3vwLl.js";import{u as j}from"./useModelStore-e7qA7dMk.js";import{u as I}from"./useUomStore-CL0R-Ai3.js";import"./index-C2dazRLE.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-BIT3zfbJ.js";const P={class:"px-4 py-4"},Q={class:"mx-auto"},z={class:"bg-white rounded-lg shadow p-6"},A={class:"grid grid-cols-2 gap-6"},L=["value"],H={class:"grid grid-cols-2 gap-6"},J=["value"],K={class:"grid grid-cols-2 gap-6"},W=["value"],X={class:"flex justify-end gap-4"},le=B({__name:"Update",props:{id:{}},setup(M){const i=F(),b=M,g=N(),_=j(),x=I(),{models:R}=U(_),{items:V}=U(x),t=C({date:"",model_id:0,description:"",qty_base:0,qty_convert:0,uom_base:0,uom_convert:0,recipent:""}),S=[{title:"Good Receive",href:"/good-receive"},{title:"Edit",href:`/good-receive/${b.id}/edit`}];D(async()=>{var n,e;try{await Promise.all([_.fetchModels(),x.fetchUoms()]);const d=(await g.fetchGoodReceivesById(b.id)).data;t.date=d.date?d.date.split("T")[0]:"",t.model_id=d.model_id,t.description=d.description,t.qty_base=d.qty_base,t.qty_convert=d.qty_convert,t.uom_base=d.uom_base,t.uom_convert=d.uom_convert,t.recipent=d.recipent}catch(o){i.error(((e=(n=o==null?void 0:o.response)==null?void 0:n.data)==null?void 0:e.message)??"Failed to fetch Good Receive data")}});const G=async()=>{var n,e;if(!t.model_id)return i.error("Model is required");if(!t.description)return i.error("Description is required");if(!t.qty_base||t.qty_base<=0)return i.error("Base quantity must be greater than 0");if(!t.qty_convert||t.qty_convert<=0)return i.error("Convert quantity must be greater than 0");if(!t.uom_base)return i.error("Base UOM is required");if(!t.uom_convert)return i.error("Convert UOM is required");if(!t.recipent)return i.error("Recipient is required");try{await g.updateGoodReceive(b.id,{date:t.date,model_id:Number(t.model_id),description:t.description,recipent:t.recipent}),i.success("Good Receive updated successfully"),window.location.href="/good-receive"}catch(o){i.error(((e=(n=o==null?void 0:o.response)==null?void 0:n.data)==null?void 0:e.message)??"Failed to update Good Receive")}};return(n,e)=>(u(),a(p,null,[l(s(O),{title:"Edit Good Receive"}),l(E,{breadcrumbs:S},{default:f(()=>[r("div",P,[r("div",Q,[r("div",z,[e[22]||(e[22]=r("h2",{class:"text-lg font-semibold mb-6"},"Edit Good Receive",-1)),r("form",{onSubmit:$(G,["prevent"]),class:"space-y-6"},[r("div",A,[r("div",null,[e[9]||(e[9]=r("label",{class:"block text-sm font-medium mb-1"},"Date",-1)),l(s(v),{type:"date",modelValue:s(t).date,"onUpdate:modelValue":e[0]||(e[0]=o=>s(t).date=o),required:""},null,8,["modelValue"])]),r("div",null,[e[11]||(e[11]=r("label",{class:"block text-sm font-medium mb-1"},"Model",-1)),m(r("select",{"onUpdate:modelValue":e[1]||(e[1]=o=>s(t).model_id=o),class:"w-full rounded-md border border-input px-3 py-2",required:""},[e[10]||(e[10]=r("option",{value:"0"},"Select Model",-1)),(u(!0),a(p,null,c(s(R),o=>(u(),a("option",{key:o.id,value:o.id},y(o.description),9,L))),128))],512),[[q,s(t).model_id]])])]),r("div",null,[e[12]||(e[12]=r("label",{class:"block text-sm font-medium mb-1"},"Description",-1)),m(r("textarea",{"onUpdate:modelValue":e[2]||(e[2]=o=>s(t).description=o),rows:"3",class:"w-full rounded-md border border-input px-3 py-2",required:""},null,512),[[T,s(t).description]])]),r("div",H,[r("div",null,[e[13]||(e[13]=r("label",{class:"block text-sm font-medium mb-1"},"Base Quantity",-1)),l(s(v),{type:"number",modelValue:s(t).qty_base,"onUpdate:modelValue":e[3]||(e[3]=o=>s(t).qty_base=o),step:"0.01",min:"0",required:""},null,8,["modelValue"])]),r("div",null,[e[15]||(e[15]=r("label",{class:"block text-sm font-medium mb-1"},"Base UOM",-1)),m(r("select",{"onUpdate:modelValue":e[4]||(e[4]=o=>s(t).uom_base=o),class:"w-full rounded-md border border-input px-3 py-2",required:""},[e[14]||(e[14]=r("option",{value:"0"},"Select UOM",-1)),(u(!0),a(p,null,c(s(V),o=>(u(),a("option",{key:o.id,value:o.id},y(o.name),9,J))),128))],512),[[q,s(t).uom_base]])])]),r("div",K,[r("div",null,[e[16]||(e[16]=r("label",{class:"block text-sm font-medium mb-1"},"Convert Quantity",-1)),l(s(v),{type:"number",modelValue:s(t).qty_convert,"onUpdate:modelValue":e[5]||(e[5]=o=>s(t).qty_convert=o),step:"0.01",min:"0",required:""},null,8,["modelValue"])]),r("div",null,[e[18]||(e[18]=r("label",{class:"block text-sm font-medium mb-1"},"Convert UOM",-1)),m(r("select",{"onUpdate:modelValue":e[6]||(e[6]=o=>s(t).uom_convert=o),class:"w-full rounded-md border border-input px-3 py-2",required:""},[e[17]||(e[17]=r("option",{value:"0"},"Select UOM",-1)),(u(!0),a(p,null,c(s(V),o=>(u(),a("option",{key:o.id,value:o.id},y(o.name),9,W))),128))],512),[[q,s(t).uom_convert]])])]),r("div",null,[e[19]||(e[19]=r("label",{class:"block text-sm font-medium mb-1"},"Recipient",-1)),l(s(v),{modelValue:s(t).recipent,"onUpdate:modelValue":e[7]||(e[7]=o=>s(t).recipent=o),required:""},null,8,["modelValue"])]),r("div",X,[l(s(w),{type:"button",variant:"outline",onClick:e[8]||(e[8]=o=>n.$inertia.visit("/good-receive"))},{default:f(()=>e[20]||(e[20]=[k(" Cancel ")])),_:1,__:[20]}),l(s(w),{type:"submit"},{default:f(()=>e[21]||(e[21]=[k("Update")])),_:1,__:[21]})])],32)])])])]),_:1})],64))}});export{le as default};
