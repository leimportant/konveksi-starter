import{_ as T}from"./AppLayout.vue_vue_type_script_setup_true_lang-CxyMViV1.js";import{b as V,u as z,r as b,o as j,a as k,w as D,g as d,j as r,q as o,x as e,y as E,z as a,l as n,B as P,F as c,D as y,k as u,A as s,H}from"./app-C0ZtNFPV.js";import{u as K}from"./useInventoryStore-MPufUS0_.js";import{_ as w}from"./Button.vue_vue_type_script_setup_true_lang-B6TXREVN.js";import{_ as O,a as U,b as F,c as i,d as G,e as _}from"./TableRow.vue_vue_type_script_setup_true_lang-CVJoN5Nr.js";import"./index-C2dazRLE.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-BIT3zfbJ.js";const J={class:"px-4 py-4"},Q={class:"flex gap-4 mb-4"},W=["value"],X=["value"],Y=["value"],Z=["value"],h=["value"],tt=["value"],et={key:0,class:"text-red-600 mb-4"},lt={key:1,class:"mb-4"},ot={class:"rounded-md border"},at={class:"flex justify-between items-center mt-4"},st={class:"flex gap-2"},pt=V({__name:"StockMonitoring",setup(nt){const f=K(),{inventoryRpt:L,loading:M,error:x,currentPage:v,lastPage:S,total:N,filters:m}=z(f),B=[{title:"Inventory",href:"/inventory"}],C=b([]),$=b([]),I=b([]);j(async()=>{await R(),f.fetchInventory()});async function R(){try{const[p,t,l]=await Promise.all([k.get("/api/locations"),k.get("/api/slocs"),k.get("/api/products")]);C.value=p.data.data??[],$.value=t.data.data??[],I.value=l.data.data??[]}catch(p){console.error("Failed to fetch filter data",p)}}D(m,()=>{f.fetchInventory(1)},{deep:!0});const g=(p,t)=>{const l=t.target;f.setFilter(p,l.value)},q=()=>{v.value>1&&f.fetchInventory(v.value-1)},A=()=>{v.value<S.value&&f.fetchInventory(v.value+1)};return(p,t)=>(r(),d(c,null,[o(e(E),{title:"Inventory Management"}),o(T,{breadcrumbs:B},{default:a(()=>[n("div",J,[t[16]||(t[16]=n("h1",{class:"text-2xl font-bold mb-4"},"Stock Monitoring",-1)),n("div",Q,[n("select",{class:"border rounded px-2 py-1",onChange:t[0]||(t[0]=l=>g("location",l)),value:e(m).location??""},[t[3]||(t[3]=n("option",{value:""},"All Locations",-1)),(r(!0),d(c,null,y(C.value,l=>(r(),d("option",{key:l.id,value:l.id},u(l.name),9,X))),128))],40,W),n("select",{class:"border rounded px-2 py-1",onChange:t[1]||(t[1]=l=>g("sloc",l)),value:e(m).sloc??""},[t[4]||(t[4]=n("option",{value:""},"All SLocs",-1)),(r(!0),d(c,null,y($.value,l=>(r(),d("option",{key:l.id,value:l.id},u(l.name),9,Z))),128))],40,Y),n("select",{class:"border rounded px-2 py-1",onChange:t[2]||(t[2]=l=>g("product",l)),value:e(m).product??""},[t[5]||(t[5]=n("option",{value:""},"All Products",-1)),(r(!0),d(c,null,y(I.value,l=>(r(),d("option",{key:l.id,value:l.id},u(l.name),9,tt))),128))],40,h)]),e(x)?(r(),d("p",et,u(e(x)),1)):P("",!0),e(M)?(r(),d("p",lt,"Loading...")):P("",!0),n("div",ot,[o(e(O),null,{default:a(()=>[o(e(U),null,{default:a(()=>[o(e(F),{class:"bg-gray-100"},{default:a(()=>[o(e(i),null,{default:a(()=>t[6]||(t[6]=[s("Product")])),_:1,__:[6]}),o(e(i),null,{default:a(()=>t[7]||(t[7]=[s("Location")])),_:1,__:[7]}),o(e(i),null,{default:a(()=>t[8]||(t[8]=[s("SLoc")])),_:1,__:[8]}),o(e(i),null,{default:a(()=>t[9]||(t[9]=[s("UOM")])),_:1,__:[9]}),o(e(i),null,{default:a(()=>t[10]||(t[10]=[s("Size")])),_:1,__:[10]}),o(e(i),null,{default:a(()=>t[11]||(t[11]=[s("Stock Masuk")])),_:1,__:[11]}),o(e(i),null,{default:a(()=>t[12]||(t[12]=[s("Stock Keluar (Sold)")])),_:1,__:[12]}),o(e(i),null,{default:a(()=>t[13]||(t[13]=[s("Stock Tersedia")])),_:1,__:[13]})]),_:1})]),_:1}),o(e(G),null,{default:a(()=>[(r(!0),d(c,null,y(e(L),l=>(r(),H(e(F),{key:l.product_id},{default:a(()=>[o(e(_),null,{default:a(()=>[s(u(l.product_name),1)]),_:2},1024),o(e(_),null,{default:a(()=>[s(u(l.location_name),1)]),_:2},1024),o(e(_),null,{default:a(()=>[s(u(l.sloc_name),1)]),_:2},1024),o(e(_),null,{default:a(()=>[s(u(l.uom_id),1)]),_:2},1024),o(e(_),null,{default:a(()=>[s(u(l.size_id),1)]),_:2},1024),o(e(_),null,{default:a(()=>[s(u(l.qty_in),1)]),_:2},1024),o(e(_),null,{default:a(()=>[s(u(l.qty_out),1)]),_:2},1024),o(e(_),null,{default:a(()=>[s(u(l.qty_available),1)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),n("div",at,[n("p",null,"Total: "+u(e(N)),1),n("div",st,[o(e(w),{disabled:e(v)<=1,onClick:q},{default:a(()=>t[14]||(t[14]=[s("Prev")])),_:1,__:[14]},8,["disabled"]),o(e(w),{disabled:e(v)>=e(S),onClick:A},{default:a(()=>t[15]||(t[15]=[s("Next")])),_:1,__:[15]},8,["disabled"])])])])]),_:1})],64))}});export{pt as default};
