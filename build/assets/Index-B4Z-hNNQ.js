import{_ as B}from"./AppLayout.vue_vue_type_script_setup_true_lang-CxyMViV1.js";import{b as M,u as j,r as q,e as C,o as F,g as c,j as n,q as t,x as e,y as V,z as s,l as u,A as d,F as f,D as h,H as L,k as _,N as E}from"./app-C0ZtNFPV.js";import{_ as w}from"./Button.vue_vue_type_script_setup_true_lang-B6TXREVN.js";import{_ as H,a as I,b as R,c as y,d as Q,e as g}from"./TableRow.vue_vue_type_script_setup_true_lang-CVJoN5Nr.js";import{u as J}from"./useToast-DV2nGitA.js";import{u as K}from"./useGoodReceiveStore-Bgi3vwLl.js";import{P as O}from"./plus-jsIhsatj.js";import{S as U}from"./square-pen-Cj9XWA8y.js";import{T as W}from"./trash-2-Bt8Dqp-q.js";import"./index-C2dazRLE.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-BIT3zfbJ.js";const X={class:"px-4 py-4"},Y={class:"flex justify-between items-center mb-6"},Z={class:"rounded-md border"},ee={class:"flex justify-end mt-4 space-x-2"},te=["disabled"],ae=["onClick"],se=["disabled"],P=10,ge=M({__name:"Index",setup(oe){const k=J(),m=K(),{items:G,total:D}=j(m),l=q(1),S=C(()=>D.value||0),v=C(()=>Math.ceil(S.value/P)),p=async r=>{await m.fetchGoodReceives(r,P),l.value=r},T=[{title:"Good Receive",href:"/good-receive"}];F(async()=>{await p(l.value)});const b=async r=>{r<1||r>v.value||await p(r)},A=async()=>{l.value<v.value&&await b(l.value+1)},N=async()=>{l.value>1&&await b(l.value-1)},z=async r=>{var o,a;if(confirm("Are you sure you want to delete this Good Receive?"))try{await m.deleteGoodReceive(r),k.success("Good Receive deleted successfully"),await p(l.value)}catch(i){k.error(((a=(o=i==null?void 0:i.response)==null?void 0:o.data)==null?void 0:a.message)??"Failed to delete Good Receive")}};return(r,o)=>(n(),c(f,null,[t(e(V),{title:"Good Receive Management"}),t(B,{breadcrumbs:T},{default:s(()=>[u("div",X,[u("div",Y,[t(e(w),{onClick:o[0]||(o[0]=a=>r.$inertia.visit("/good-receive/create")),class:"bg-indigo-600 text-white py-2 rounded-md hover:bg-indigo-700 focus:ring-2 focus:ring-indigo-500"},{default:s(()=>[t(e(O),{class:"h-4 w-4"}),o[1]||(o[1]=d(" Add "))]),_:1,__:[1]})]),u("div",Z,[t(e(H),null,{default:s(()=>[t(e(I),null,{default:s(()=>[t(e(R),{class:"bg-gray-100"},{default:s(()=>[t(e(y),{class:"px-4 py-3"},{default:s(()=>o[2]||(o[2]=[d("Recipient")])),_:1,__:[2]}),t(e(y),{class:"px-4 py-3"},{default:s(()=>o[3]||(o[3]=[d("Material / Qty")])),_:1,__:[3]}),t(e(y),{class:"px-4 py-3"},{default:s(()=>o[4]||(o[4]=[d("Created At")])),_:1,__:[4]}),t(e(y),{class:"w-24"},{default:s(()=>o[5]||(o[5]=[d("Actions")])),_:1,__:[5]})]),_:1})]),_:1}),t(e(Q),null,{default:s(()=>[(n(!0),c(f,null,h(e(G),a=>(n(),L(e(R),{key:a.id},{default:s(()=>[t(e(g),null,{default:s(()=>[d(_(a.recipent||"-"),1)]),_:2},1024),t(e(g),{class:"px-2 py-1"},{default:s(()=>{var i;return[(i=a.items)!=null&&i.length?(n(!0),c(f,{key:0},h(a.items,x=>{var $;return n(),c("div",{key:x.id},_(($=a.model)==null?void 0:$.description)+" ("+_(x.qty_convert)+" "+_(x.uom_convert)+") ",1)}),128)):(n(),c(f,{key:1},[d("-")],64))]}),_:2},1024),t(e(g),{class:"px-4 py-2"},{default:s(()=>[d(_(a.created_at?new Date(a.created_at).toLocaleDateString():"-"),1)]),_:2},1024),t(e(g),{class:"flex gap-2"},{default:s(()=>[t(e(w),{variant:"ghost",size:"icon",class:"hover:bg-gray-100",onClick:i=>r.$inertia.visit(`/good-receive/${a.id}/edit`)},{default:s(()=>[t(e(U),{class:"h-4 w-4"})]),_:2},1032,["onClick"]),t(e(w),{variant:"ghost",size:"icon",class:"hover:bg-gray-100",onClick:i=>z(a.id)},{default:s(()=>[t(e(W),{class:"h-4 w-4"})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),u("div",ee,[u("button",{onClick:N,disabled:l.value===1,class:"px-3 py-1 rounded border border-gray-300 text-gray-700 hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed"}," Previous ",8,te),(n(!0),c(f,null,h(v.value,a=>(n(),c("button",{key:a,onClick:i=>b(a),class:E(["px-3 py-1 rounded border text-sm",a===l.value?"bg-blue-600 border-blue-600 text-white":"border-gray-300 text-gray-700 hover:bg-gray-100"])},_(a),11,ae))),128)),u("button",{onClick:A,disabled:l.value===v.value,class:"px-3 py-1 rounded border border-gray-300 text-gray-700 hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed"}," Next ",8,se)])])]),_:1})],64))}});export{ge as default};
