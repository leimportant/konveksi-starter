import{b as K,u as R,r as v,o as E,g as n,j as r,q as s,x as e,y as H,z as o,l,A as u,ag as U,F as g,D as x,H as p,k as _,B as k,N as G}from"./app-C0ZtNFPV.js";import{_ as J}from"./AppLayout.vue_vue_type_script_setup_true_lang-CxyMViV1.js";import{_ as f}from"./Button.vue_vue_type_script_setup_true_lang-B6TXREVN.js";import{_ as W,a as X,b as A,c as m,d as Y,e as h}from"./TableRow.vue_vue_type_script_setup_true_lang-CVJoN5Nr.js";import{u as Z}from"./useToast-DV2nGitA.js";import{u as tt}from"./useProductionStore-B_IhP-RV.js";import{_ as et}from"./Input.vue_vue_type_script_setup_true_lang-BWB1n0oK.js";import{P as st}from"./plus-jsIhsatj.js";import{S as T}from"./square-pen-Cj9XWA8y.js";import{T as B}from"./trash-2-Bt8Dqp-q.js";import{V as F}from"./view-BdFATr3z.js";import"./index-C2dazRLE.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-BIT3zfbJ.js";const at={class:"px-2 py-2"},ot={class:"flex justify-between items-center mb-6"},it={class:"space-y-4"},rt={key:0,class:"text-center py-4 text-gray-500"},lt={key:1,class:"overflow-x-auto hidden md:block"},nt={class:"flex justify-end gap-2"},dt={class:"md:hidden space-y-2"},ct={class:"flex justify-between items-center"},ut={class:"font-semibold text-sm text-gray-900"},_t={class:"text-xs text-gray-500"},ft={class:"flex justify-between items-start gap-4"},yt={class:"flex-1"},vt={key:0},gt={key:1,class:"text-sm text-gray-400"},pt={class:"flex-1"},mt={class:"text-sm text-gray-800"},ht={class:"flex justify-end gap-2"},Tt=K({__name:"Index",props:{activity_role:{}},setup(N){const $=Z(),w=tt(),{productions:z,loading:q}=R(w),L=v(1),I=v(10),M=v("created_at"),O=v("desc"),b=N,Q=[{title:"Production",href:`/production/${b.activity_role}`}],C=v(""),P=v({from:null,to:null}),S=async()=>{var d,a,t,i;try{await w.fetchProductions({page:L.value,per_page:I.value,sort_field:M.value,sort_order:O.value,activity_role_id:b.activity_role,search:C.value,date_from:(d=P.value.from)==null?void 0:d.toISOString(),date_to:(a=P.value.to)==null?void 0:a.toISOString()})}catch(c){$.error(((i=(t=c==null?void 0:c.response)==null?void 0:t.data)==null?void 0:i.message)??"Failed to fetch productions")}};E(S);const D=async d=>{var a,t;if(confirm("Are you sure you want to delete this production?"))try{await w.deleteProduction(d),$.success("Production deleted successfully"),await S()}catch(i){$.error(((t=(a=i==null?void 0:i.response)==null?void 0:a.data)==null?void 0:t.message)??"Failed to delete production")}};return(d,a)=>(r(),n(g,null,[s(e(H),{title:"Production Management"}),s(J,{breadcrumbs:Q},{default:o(()=>[l("div",at,[l("div",ot,[s(e(f),{onClick:a[0]||(a[0]=t=>d.$inertia.visit(`/production/${b.activity_role}/create`)),class:"bg-indigo-600 text-white py-2 rounded-md hover:bg-indigo-700 focus:ring-2 focus:ring-indigo-500"},{default:o(()=>[s(e(st),{class:"h-4 w-4 mr-2"}),a[2]||(a[2]=u(" Tambah Data "))]),_:1,__:[2]}),s(e(et),{modelValue:C.value,"onUpdate:modelValue":a[1]||(a[1]=t=>C.value=t),placeholder:"Search...",class:"w-full md:w-64",onKeyup:U(S,["enter"])},null,8,["modelValue"])]),l("div",it,[e(q)?(r(),n("div",rt,"Loading...")):(r(),n("div",lt,[s(e(W),null,{default:o(()=>[s(e(X),null,{default:o(()=>[s(e(A),{class:"bg-gray-100"},{default:o(()=>[s(e(m),null,{default:o(()=>a[3]||(a[3]=[u("Model")])),_:1,__:[3]}),s(e(m),null,{default:o(()=>a[4]||(a[4]=[u("Activity")])),_:1,__:[4]}),s(e(m),null,{default:o(()=>a[5]||(a[5]=[u("Size/Qty")])),_:1,__:[5]}),s(e(m),null,{default:o(()=>a[6]||(a[6]=[u("Created At")])),_:1,__:[6]}),s(e(m),{class:"text-right"},{default:o(()=>a[7]||(a[7]=[u("Actions")])),_:1,__:[7]})]),_:1})]),_:1}),s(e(Y),null,{default:o(()=>[(r(!0),n(g,null,x(e(z),t=>(r(),p(e(A),{key:t.id},{default:o(()=>[s(e(h),null,{default:o(()=>{var i;return[u(_(((i=t.model)==null?void 0:i.description)||"-"),1)]}),_:2},1024),s(e(h),null,{default:o(()=>{var i;return[u(_(((i=t.activity_role)==null?void 0:i.name)||"-"),1)]}),_:2},1024),s(e(h),null,{default:o(()=>{var i;return[(i=t.items)!=null&&i.length?(r(!0),n(g,{key:0},x(t.items,c=>(r(),n("div",{key:c.id},_(c.size_id)+" : "+_(c.qty),1))),128)):(r(),n(g,{key:1},[u("-")],64))]}),_:2},1024),s(e(h),null,{default:o(()=>[u(_(t.created_at?new Date(t.created_at).toLocaleDateString():"-"),1)]),_:2},1024),s(e(h),{class:"text-right"},{default:o(()=>[l("div",nt,[t.status===1||t.status===3?(r(),p(e(f),{key:0,variant:"ghost",size:"icon",class:"hover:bg-gray-100",onClick:i=>d.$inertia.visit(`/production/${t.activity_role_id}/edit/${t.id}`)},{default:o(()=>[s(e(T),{class:"h-4 w-4"})]),_:2},1032,["onClick"])):k("",!0),t.status===1||t.status===3?(r(),p(e(f),{key:1,variant:"ghost",size:"icon",class:"hover:bg-gray-100",onClick:i=>D(t.id)},{default:o(()=>[s(e(B),{class:"h-4 w-4"})]),_:2},1032,["onClick"])):k("",!0),s(e(f),{variant:"ghost",size:"icon",class:"hover:bg-gray-100",onClick:i=>d.$inertia.visit(`/production/${t.activity_role_id}/view/${t.id}`)},{default:o(()=>[s(e(F),{class:"h-4 w-4"})]),_:2},1032,["onClick"])])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})])),l("div",dt,[(r(!0),n(g,null,x(e(z),(t,i)=>{var c,V,j;return r(),n("div",{key:t.id,class:G(["rounded-xl border border-gray-200 p-4 shadow-sm w-full space-y-4 transition hover:shadow-md",i%2===1?"bg-[#f0f5f0]":"white"])},[l("div",ct,[l("h3",ut,_(((c=t.model)==null?void 0:c.description)||"-"),1),l("p",_t,_(((V=t.activity_role)==null?void 0:V.name)||"-"),1)]),l("div",ft,[l("div",yt,[a[8]||(a[8]=l("p",{class:"text-xs font-semibold text-gray-500"},"Size / Qty",-1)),(j=t.items)!=null&&j.length?(r(),n("div",vt,[(r(!0),n(g,null,x(t.items,y=>(r(),n("div",{key:y.id,class:"text-sm text-gray-800"},_(y.size_id)+" : "+_(y.qty),1))),128))])):(r(),n("div",gt,"-"))]),l("div",pt,[a[9]||(a[9]=l("p",{class:"text-xs font-semibold text-gray-500"},"Created At",-1)),l("p",mt,_(t.created_at?new Date(t.created_at).toLocaleDateString():"-"),1)])]),l("div",ht,[t.status===1||t.status===3?(r(),p(e(f),{key:0,variant:"ghost",size:"icon",class:"hover:bg-gray-100",onClick:y=>d.$inertia.visit(`/production/${t.activity_role_id}/edit/${t.id}`)},{default:o(()=>[s(e(T),{class:"h-4 w-4"})]),_:2},1032,["onClick"])):k("",!0),t.status===1||t.status===3?(r(),p(e(f),{key:1,variant:"ghost",size:"icon",class:"hover:bg-gray-100",onClick:y=>D(t.id)},{default:o(()=>[s(e(B),{class:"h-4 w-4"})]),_:2},1032,["onClick"])):k("",!0),s(e(f),{variant:"ghost",size:"icon",class:"hover:bg-gray-100",onClick:y=>d.$inertia.visit(`/production/${t.activity_role_id}/view/${t.id}`)},{default:o(()=>[s(e(F),{class:"h-4 w-4"})]),_:2},1032,["onClick"])])],2)}),128))])])])]),_:1})],64))}});export{Tt as default};
