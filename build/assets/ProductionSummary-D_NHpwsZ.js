import{_ as q}from"./Button.vue_vue_type_script_setup_true_lang-B6TXREVN.js";import{_ as V}from"./Input.vue_vue_type_script_setup_true_lang-BWB1n0oK.js";import{_ as E,a as T,b as w,c as _,d as F,e as d}from"./TableRow.vue_vue_type_script_setup_true_lang-CVJoN5Nr.js";import{_ as M}from"./AppLayout.vue_vue_type_script_setup_true_lang-CxyMViV1.js";import{u as B}from"./useReportStore-ChnP6fYh.js";import{b as O,r as $,e as h,o as A,g as p,j as s,q as a,x as t,y as C,z as o,l as c,A as r,k as u,F as g,D as x,H as S}from"./app-C0ZtNFPV.js";import"./index-C2dazRLE.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-BIT3zfbJ.js";const U={class:"py-6"},j={class:"mx-auto max-w-7xl sm:px-2 lg:px-2"},L={class:"overflow-hidden bg-white shadow-sm sm:rounded-lg"},Q={class:"mb-4 flex space-x-4"},z={key:0},H={key:1,class:"text-red-500"},K={key:2},ot=O({__name:"ProductionSummary",setup(Y){const N=[{title:"Report Production Summary",href:"/reports/production-summary"}],i=B(),v=$(""),b=$(""),D=$(""),R=()=>{i.fetchProductionSummary(v.value,b.value,D.value)},P=n=>typeof n!="number"||isNaN(n)?"0,00":new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:2}).format(n),k=h(()=>{const n=new Map;return i.productionSummary.forEach(e=>{if(e.activities)for(const[l,m]of Object.entries(e.activities)){const f=Number(l);n.has(f)||n.set(f,m.name||`Role ${f}`)}}),Array.from(n.entries()).map(([e,l])=>({id:e,name:l}))});return A(()=>{const n=new Date,e=new Date(n.getFullYear(),n.getMonth(),1);v.value=e.toISOString().split("T")[0],b.value=n.toISOString().split("T")[0],R()}),(n,e)=>(s(),p(g,null,[a(t(C),{title:"Production Summary Report"}),a(M,{breadcrumbs:N},{header:o(()=>e[3]||(e[3]=[c("h2",{class:"text-xl font-semibold leading-tight text-gray-800"},"Production Summary Report",-1)])),default:o(()=>[c("div",U,[c("div",j,[c("div",L,[c("div",Q,[a(t(V),{type:"date",modelValue:v.value,"onUpdate:modelValue":e[0]||(e[0]=l=>v.value=l)},null,8,["modelValue"]),a(t(V),{type:"date",modelValue:b.value,"onUpdate:modelValue":e[1]||(e[1]=l=>b.value=l)},null,8,["modelValue"]),a(t(V),{type:"text",modelValue:D.value,"onUpdate:modelValue":e[2]||(e[2]=l=>D.value=l),placeholder:"Search by product name"},null,8,["modelValue"]),a(t(q),{onClick:R,class:"bg-indigo-600 text-white py-2 rounded-md hover:bg-indigo-700 focus:ring-2 focus:ring-indigo-500"},{default:o(()=>e[4]||(e[4]=[r("Tampilkan")])),_:1,__:[4]})]),t(i).loading?(s(),p("div",z,"Loading...")):t(i).error?(s(),p("div",H,"Error: "+u(t(i).error.message),1)):(s(),p("div",K,[a(t(E),null,{default:o(()=>[a(t(T),null,{default:o(()=>[a(t(w),{class:"bg-gray-100"},{default:o(()=>[a(t(_),null,{default:o(()=>e[5]||(e[5]=[r("ID")])),_:1,__:[5]}),a(t(_),null,{default:o(()=>e[6]||(e[6]=[r("Description")])),_:1,__:[6]}),a(t(_),null,{default:o(()=>e[7]||(e[7]=[r("Estimation Price/Pcs")])),_:1,__:[7]}),a(t(_),null,{default:o(()=>e[8]||(e[8]=[r("Estimation Quantity")])),_:1,__:[8]}),a(t(_),null,{default:o(()=>e[9]||(e[9]=[r("Start Date")])),_:1,__:[9]}),a(t(_),null,{default:o(()=>e[10]||(e[10]=[r("End Date")])),_:1,__:[10]}),(s(!0),p(g,null,x(k.value,l=>(s(),S(t(_),{key:l.id},{default:o(()=>[r(u(l.name),1)]),_:2},1024))),128)),a(t(_),null,{default:o(()=>e[11]||(e[11]=[r("Total Qty")])),_:1,__:[11]})]),_:1})]),_:1}),a(t(F),null,{default:o(()=>[(s(!0),p(g,null,x(t(i).productionSummary,l=>(s(),S(t(w),{key:l.model_id},{default:o(()=>[a(t(d),null,{default:o(()=>[r(u(l.model_id),1)]),_:2},1024),a(t(d),null,{default:o(()=>[r(u(l.description),1)]),_:2},1024),a(t(d),null,{default:o(()=>[r(u(P(l.estimation_price_pcs)),1)]),_:2},1024),a(t(d),null,{default:o(()=>[r(u(l.estimation_qty),1)]),_:2},1024),a(t(d),null,{default:o(()=>[r(u(l.start_date),1)]),_:2},1024),a(t(d),null,{default:o(()=>[r(u(l.end_date??"-"),1)]),_:2},1024),(s(!0),p(g,null,x(k.value,m=>(s(),S(t(d),{key:m.id+"-"+l.model_id},{default:o(()=>{var f,y;return[r(u(((y=(f=l.activities)==null?void 0:f[m.id])==null?void 0:y.qty)??"-"),1)]}),_:2},1024))),128)),a(t(d),{class:"font-semibold"},{default:o(()=>[r(u(l.subtotal_qty),1)]),_:2},1024)]),_:2},1024))),128))]),_:1}),c("tfoot",null,[a(t(w),null,{default:o(()=>[a(t(d),{colspan:"6",class:"text-right font-bold"},{default:o(()=>e[12]||(e[12]=[r("Total")])),_:1,__:[12]}),(s(!0),p(g,null,x(k.value,l=>(s(),S(t(d),{key:"footer-"+l.id,class:"font-bold"},{default:o(()=>[r(u(t(i).productionSummary.reduce((m,f)=>{var y,I;return m+(((I=(y=f.activities)==null?void 0:y[l.id])==null?void 0:I.qty)||0)},0)),1)]),_:2},1024))),128)),a(t(d),{class:"font-bold"},{default:o(()=>[r(u(t(i).productionSummary.reduce((l,m)=>l+(m.subtotal_qty||0),0)),1)]),_:1})]),_:1})])]),_:1})]))])])])]),_:1})],64))}});export{ot as default};
