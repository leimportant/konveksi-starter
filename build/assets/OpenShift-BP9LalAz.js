import{b as N,r as f,e as V,f as C,g as r,j as u,q as t,x as m,y as O,z as p,l,I as M,B as h,k as g,A as y,F as q,M as $}from"./app-C0ZtNFPV.js";import{_ as j}from"./AppLayout.vue_vue_type_script_setup_true_lang-CxyMViV1.js";import{_ as S}from"./Input.vue_vue_type_script_setup_true_lang-BWB1n0oK.js";import{_ as x}from"./Button.vue_vue_type_script_setup_true_lang-B6TXREVN.js";import{u as F}from"./useCashBalanceStore-CV01EwU0.js";import{u as A}from"./useToast-DV2nGitA.js";import"./index-C2dazRLE.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-BIT3zfbJ.js";const E={class:"w-full px-4 py-6"},T={key:0,class:"mt-1 text-sm text-red-600"},U={key:0,class:"mt-1 text-sm text-red-600"},z={class:"flex flex-col sm:flex-row justify-end gap-2 sm:gap-4 pt-4"},D={key:0},I={key:1},X=N({__name:"OpenShift",setup(J){const k=F(),b=A(),n=f({shift_number:1,opening_balance:0}),a=f({}),s=f(!1),c=V(()=>Object.keys(a.value).length>0),v=()=>{n.value.shift_number?n.value.shift_number<1?a.value.shift_number="Shift number must be at least 1":delete a.value.shift_number:a.value.shift_number="Shift number is required"},_=()=>{n.value.opening_balance===void 0||n.value.opening_balance===null?a.value.opening_balance="Opening balance is required":n.value.opening_balance<0?a.value.opening_balance="Opening balance cannot be negative":delete a.value.opening_balance},B=async()=>{var i,e;if(v(),_(),!c.value){s.value=!0;try{await k.createCashBalance(n.value),b.success("Shift opened successfully"),$.visit(route("sales.index"))}catch(o){b.error("Failed to open shift"),console.error("Shift creation error:",o),(e=(i=o.response)==null?void 0:i.data)!=null&&e.errors&&(a.value={...a.value,...o.response.data.errors})}finally{s.value=!1}}},w=[{title:"Cash Management",href:route("cash-balance.index")},{title:"Open New Shift",href:route("cash-balance.openshift")}];return(i,e)=>{const o=C("Spinner");return u(),r(q,null,[t(m(O),{title:"Open New Shift"}),t(j,{breadcrumbs:w},{default:p(()=>[l("div",E,[l("form",{onSubmit:M(B,["prevent"]),class:"space-y-4 sm:space-y-6"},[l("div",null,[e[3]||(e[3]=l("label",{for:"shiftNumber",class:"block text-sm font-medium mb-1"}," Shift Number ",-1)),t(m(S),{id:"shiftNumber",modelValue:n.value.shift_number,"onUpdate:modelValue":e[0]||(e[0]=d=>n.value.shift_number=d),modelModifiers:{number:!0},type:"number",min:"1",required:"",class:"w-full",disabled:s.value,onBlur:v},null,8,["modelValue","disabled"]),a.value.shift_number?(u(),r("p",T,g(a.value.shift_number),1)):h("",!0)]),l("div",null,[e[4]||(e[4]=l("label",{for:"openingBalance",class:"block text-sm font-medium mb-1"}," Saldo Awal ",-1)),t(m(S),{id:"openingBalance",modelValue:n.value.opening_balance,"onUpdate:modelValue":e[1]||(e[1]=d=>n.value.opening_balance=d),modelModifiers:{number:!0},type:"number",min:"0",step:"0.01",class:"w-full",required:"",disabled:s.value,onBlur:_},null,8,["modelValue","disabled"]),a.value.opening_balance?(u(),r("p",U,g(a.value.opening_balance),1)):h("",!0)]),l("div",z,[t(m(x),{type:"button",variant:"outline",disabled:s.value,onClick:e[2]||(e[2]=d=>i.$inertia.visit(i.route("cash-balance.index")))},{default:p(()=>e[5]||(e[5]=[y(" Cancel ")])),_:1,__:[5]},8,["disabled"]),t(m(x),{type:"submit",disabled:s.value||c.value},{default:p(()=>[s.value?(u(),r("span",D,[t(o,{class:"mr-2"}),e[6]||(e[6]=y(" Processing... "))])):(u(),r("span",I,"Mulai Shift"))]),_:1},8,["disabled"])])],32)])]),_:1})],64)}}});export{X as default};
