import{_ as F}from"./AppLayout.vue_vue_type_script_setup_true_lang-CxyMViV1.js";import{r as M,M as w,b as P,o as A,g as T,j as k,q as a,x as t,y as I,z as s,l as v,B as $,A as n,k as c,F as j,D as q,H as z}from"./app-C0ZtNFPV.js";import{u as N}from"./useTransferStockStore-B-GCbk1t.js";import{u as V}from"./useToast-DV2nGitA.js";import{_ as x}from"./Button.vue_vue_type_script_setup_true_lang-B6TXREVN.js";import{_ as C,a as D,b,c as m,d as S,e as p}from"./TableRow.vue_vue_type_script_setup_true_lang-CVJoN5Nr.js";import"./index-C2dazRLE.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-BIT3zfbJ.js";function G(){const y=N(),i=V(),d=M(!1);return{acceptTransfer:async u=>{var _,f;d.value=!0;try{await y.fetchTransferByID(u),await y.acceptTransfer(u),i.success("Transfer diterima"),w.visit("/transfer-stock")}catch(l){console.error(l),i.error(((f=(_=l==null?void 0:l.response)==null?void 0:_.data)==null?void 0:f.message)??"Gagal menerima transfer")}finally{d.value=!1}},rejectTransfer:async u=>{var _,f;d.value=!0;try{await y.fetchTransferByID(u),await y.rejectTransfer(u),i.success("Transfer ditolak"),w.visit("/transfer-stock")}catch(l){console.error(l),i.error(((f=(_=l==null?void 0:l.response)==null?void 0:_.data)==null?void 0:f.message)??"Gagal menolak transfer")}finally{d.value=!1}},loading:d}}const L={class:"p-6 space-y-6"},U={key:0,class:"space-y-6"},E={class:"border rounded p-4"},H={class:"flex items-center justify-between gap-4"},J={key:0,class:"flex gap-2"},K={key:1,class:"text-center py-8"},tt=P({__name:"View",props:{id:{}},setup(y){const i=y,d=[{title:"Transfer Stock",href:"/transfer-stock"}],o=N(),B=V(),{acceptTransfer:u,rejectTransfer:_,loading:f}=G(),l=g=>{const e=o.products.find(r=>r.id===g);return e?e.name:""};return A(async()=>{try{await o.fetchTransferByID(i.id),await o.fetchProducts()}catch(g){console.error(g),B.error("Failed to load transfer details")}}),(g,e)=>(k(),T(j,null,[a(t(I),{title:"Transfer Stock Management"}),a(F,{breadcrumbs:d},{default:s(()=>[v("div",L,[t(o).transfer?(k(),T("div",U,[a(t(C),null,{default:s(()=>[a(t(D),null,{default:s(()=>[a(t(b),null,{default:s(()=>[a(t(m),null,{default:s(()=>e[3]||(e[3]=[n("From")])),_:1,__:[3]}),a(t(m),null,{default:s(()=>e[4]||(e[4]=[n("Transfer To")])),_:1,__:[4]}),a(t(m),null,{default:s(()=>e[5]||(e[5]=[n("Sloc")])),_:1,__:[5]})]),_:1})]),_:1}),a(t(S),null,{default:s(()=>[a(t(b),null,{default:s(()=>[a(t(p),null,{default:s(()=>{var r;return[n(c((r=t(o).transfer.location)==null?void 0:r.name),1)]}),_:1}),a(t(p),null,{default:s(()=>{var r;return[n(c((r=t(o).transfer.location_destination)==null?void 0:r.name),1)]}),_:1}),a(t(p),null,{default:s(()=>{var r;return[n(c((r=t(o).transfer.sloc)==null?void 0:r.name),1)]}),_:1})]),_:1})]),_:1})]),_:1}),v("div",E,[e[10]||(e[10]=v("div",{class:"font-semibold text-lg mb-2"},"Detail Barang",-1)),a(t(C),null,{default:s(()=>[a(t(D),null,{default:s(()=>[a(t(b),null,{default:s(()=>[a(t(m),null,{default:s(()=>e[6]||(e[6]=[n("Produk")])),_:1,__:[6]}),a(t(m),null,{default:s(()=>e[7]||(e[7]=[n("Ukuran")])),_:1,__:[7]}),a(t(m),null,{default:s(()=>e[8]||(e[8]=[n("UOM")])),_:1,__:[8]}),a(t(m),{class:"text-right"},{default:s(()=>e[9]||(e[9]=[n("Qty")])),_:1,__:[9]})]),_:1})]),_:1}),a(t(S),null,{default:s(()=>[(k(!0),T(j,null,q(t(o).transfer.transfer_detail,r=>(k(),z(t(b),{key:r.id},{default:s(()=>[a(t(p),null,{default:s(()=>[n(c(l(r.product_id)),1)]),_:2},1024),a(t(p),null,{default:s(()=>[n(c(r.size_id),1)]),_:2},1024),a(t(p),null,{default:s(()=>[n(c(r.uom_id),1)]),_:2},1024),a(t(p),{class:"text-right"},{default:s(()=>[n(c(r.qty),1)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),v("div",H,[a(t(x),{variant:"outline",onClick:e[0]||(e[0]=r=>t(w).visit("/transfer-stock"))},{default:s(()=>e[11]||(e[11]=[n(" Kembali ")])),_:1,__:[11]}),t(o).transfer.status==="Pending"?(k(),T("div",J,[a(t(x),{variant:"default",onClick:e[1]||(e[1]=()=>t(u)(i.id)),disabled:t(f)},{default:s(()=>e[12]||(e[12]=[n(" Accept ")])),_:1,__:[12]},8,["disabled"]),a(t(x),{variant:"destructive",onClick:e[2]||(e[2]=()=>t(_)(i.id)),disabled:t(f)},{default:s(()=>e[13]||(e[13]=[n(" Reject ")])),_:1,__:[13]},8,["disabled"])])):$("",!0)])])):t(f)?(k(),T("div",K," Loading... ")):$("",!0)])]),_:1})],64))}});export{tt as default};
