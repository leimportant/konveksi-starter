import{b as L,r as c,o as T,g as l,j as d,q as g,x as _,y as z,z as V,l as t,B as H,k as n,A as u,F as h,D as N,M as A}from"./app-C0ZtNFPV.js";import{u as F}from"./useToast-DV2nGitA.js";import{u as I}from"./useProductionStore-B_IhP-RV.js";import{u as R}from"./useModelStore-e7qA7dMk.js";import{u as $}from"./useMasterActivityRoleStore-DBv0ZGNU.js";import{_ as j}from"./AppLayout.vue_vue_type_script_setup_true_lang-CxyMViV1.js";import"./Button.vue_vue_type_script_setup_true_lang-B6TXREVN.js";import"./index-C2dazRLE.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-BIT3zfbJ.js";const q={id:"print-area",class:"p-4 md:p-6 space-y-4 md:space-y-6 print:bg-white"},E={class:"flex justify-between items-center"},G={class:"hidden print:block"},J={class:"space-y-2 text-sm md:text-base"},Q={key:0,class:"overflow-x-auto"},K={class:"w-full table-auto border text-sm md:text-base"},O={class:"border px-2 md:px-3 py-1 md:py-2"},U={class:"border px-2 md:px-3 py-1 md:py-2"},W={class:"flex gap-2 no-print"},it=L({__name:"View",props:{id:{},activity_role:{}},setup(w){const S=F(),k=I(),B=R(),M=$(),a=w,r=c(null),p=c(null),P=c(null),D=async()=>{try{const o=await k.fetchProductionsById(a.id);r.value=o;const e=await B.fetchModelById(o.model_id);P.value=e;const s=await M.getActivityRoleById(Number(a.activity_role));p.value=s}catch(o){console.error("Failed to fetch activity role",o),S.error("Failed to fetch data")}},C=()=>{var s;const o=document.body.innerHTML,e=((s=document.getElementById("print-area"))==null?void 0:s.innerHTML)||"";document.body.innerHTML=e,window.print(),document.body.innerHTML=o,location.reload()};return T(D),(o,e)=>(d(),l(h,null,[g(_(z),{title:"View Production"}),g(j,{breadcrumbs:[{title:"Production",href:`/production/${a.activity_role}`}]},{default:V(()=>{var s,m,y,b,v,x;return[t("div",q,[t("div",E,[e[1]||(e[1]=t("h1",{class:"text-xl md:text-2xl font-bold"}," Hasil Produksi ",-1)),t("div",G,"Printed on: "+n(new Date().toLocaleDateString()),1)]),t("div",J,[t("div",null,[e[2]||(e[2]=t("strong",null,"Model :",-1)),u(" "+n(((m=(s=r.value)==null?void 0:s.model)==null?void 0:m.description)||"-"),1)]),t("div",null,[e[3]||(e[3]=t("strong",null,"Activity :",-1)),u(" "+n(((y=p.value)==null?void 0:y.name)||"-"),1)]),t("div",null,[e[4]||(e[4]=t("strong",null,"Tanggal :",-1)),u(" "+n((b=r.value)!=null&&b.created_at?new Date(r.value.created_at).toLocaleDateString("en-GB"):"-"),1)])]),(x=(v=r.value)==null?void 0:v.items)!=null&&x.length?(d(),l("div",Q,[e[6]||(e[6]=t("h2",{class:"font-semibold mb-2"},"Production Sizes",-1)),t("table",K,[e[5]||(e[5]=t("thead",null,[t("tr",{class:"bg-gray-100"},[t("th",{class:"border px-2 md:px-3 py-1 md:py-2 text-left"},"Size"),t("th",{class:"border px-2 md:px-3 py-1 md:py-2 text-left"},"Qty")])],-1)),t("tbody",null,[(d(!0),l(h,null,N(r.value.items,i=>{var f;return d(),l("tr",{key:i.size_id},[t("td",O,n(((f=i.size)==null?void 0:f.name)||i.size_id),1),t("td",U,n(i.qty),1)])}),128))])])])):H("",!0),t("div",W,[t("button",{onClick:C,class:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700"}," Print "),t("button",{onClick:e[0]||(e[0]=i=>_(A).visit(`/production/${a.activity_role}`)),type:"button",class:"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600"}," Back ")])])]}),_:1},8,["breadcrumbs"])],64))}});export{it as default};
