import{_ as E}from"./AppLayout.vue_vue_type_script_setup_true_lang-CxyMViV1.js";import{b as R,u as H,r as h,e as L,o as O,g,j as m,q as a,x as t,y as U,z as o,l as d,A as l,O as Y,F as x,D as k,H as G,k as u,N as C}from"./app-C0ZtNFPV.js";import{_ as P}from"./Button.vue_vue_type_script_setup_true_lang-B6TXREVN.js";import{_ as J,a as K,b as D,c,d as Q,e as f}from"./TableRow.vue_vue_type_script_setup_true_lang-CVJoN5Nr.js";import{u as W}from"./useToast-DV2nGitA.js";import{u as X}from"./useProductPriceStore-B6vk3Xvi.js";import{d as Z}from"./debounce-BcZQbp_F.js";import{_ as ee}from"./Input.vue_vue_type_script_setup_true_lang-BWB1n0oK.js";import{P as te}from"./plus-jsIhsatj.js";import{S as ae}from"./square-pen-Cj9XWA8y.js";import{T as se}from"./trash-2-Bt8Dqp-q.js";import"./index-C2dazRLE.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-BIT3zfbJ.js";const oe={class:"px-4 py-4"},re={class:"flex justify-between items-center mb-6"},le={class:"rounded-md border overflow-x-auto"},ne={class:"flex justify-end mt-4 space-x-2"},ie=["disabled"],de=["onClick"],ue=["disabled"],N=10,ke=R({__name:"Index",setup(ce){const w=W(),_=X(),{productPrices:S,total:F,filterName:p,loading:I}=H(_),A=[{title:"Product Prices",href:"/product-prices"}],i=h(1),$=h(0),b=L(()=>Math.max(Math.ceil($.value/N),1)),v=async s=>{await _.fetchProductPrice(s,N),$.value=F.value||0,i.value=s},T=Z((s,e)=>{_.setFilter(s,e)},400),V=s=>{const e=s.target;T("name",e.value)};O(async()=>{await v(i.value)});const y=async s=>{s<1||s>b.value||await v(s)},z=()=>y(i.value+1),B=()=>y(i.value-1),M=s=>{if(!s)return"N/A";const e=new Date(s);return isNaN(e.getTime())?"Invalid Date":`${String(e.getDate()).padStart(2,"0")}/${String(e.getMonth()+1).padStart(2,"0")}/${e.getFullYear()}`},j=s=>{const e=typeof s=="string"?parseFloat(s):s;return new Intl.NumberFormat("id-ID",{minimumFractionDigits:0,maximumFractionDigits:0}).format(e||0)},q=async s=>{var e,r;if(confirm("Are you sure?"))try{await _.deleteProductPrice(s),w.success("Deleted"),await v(i.value)}catch(n){w.error(((r=(e=n==null?void 0:n.response)==null?void 0:e.data)==null?void 0:r.message)||"Failed to delete")}};return(s,e)=>(m(),g(x,null,[a(t(U),{title:"Product Prices"}),a(E,{breadcrumbs:A},{default:o(()=>[d("div",oe,[d("div",re,[a(t(P),{onClick:e[0]||(e[0]=r=>s.$inertia.visit("/product-prices/create")),class:"bg-indigo-600 text-white py-2 rounded-md hover:bg-indigo-700 focus:ring-2 focus:ring-indigo-500"},{default:o(()=>[a(t(te),{class:"h-4 w-4"}),e[2]||(e[2]=l(" Add "))]),_:1,__:[2]}),a(t(ee),{modelValue:t(p),"onUpdate:modelValue":e[1]||(e[1]=r=>Y(p)?p.value=r:null),placeholder:"Search",onInput:V,class:"w-64","aria-label":"Search",disabled:t(I)},null,8,["modelValue","disabled"])]),d("div",le,[a(t(J),null,{default:o(()=>[a(t(K),null,{default:o(()=>[a(t(D),{class:"bg-gray-100"},{default:o(()=>[a(t(c),null,{default:o(()=>e[3]||(e[3]=[l("ID")])),_:1,__:[3]}),a(t(c),null,{default:o(()=>e[4]||(e[4]=[l("Product")])),_:1,__:[4]}),a(t(c),null,{default:o(()=>e[5]||(e[5]=[l("Cost Price")])),_:1,__:[5]}),a(t(c),null,{default:o(()=>e[6]||(e[6]=[l("Effective Date")])),_:1,__:[6]}),a(t(c),null,{default:o(()=>e[7]||(e[7]=[l("Status")])),_:1,__:[7]}),a(t(c),{class:"w-24"},{default:o(()=>e[8]||(e[8]=[l("Actions")])),_:1,__:[8]})]),_:1})]),_:1}),a(t(Q),null,{default:o(()=>[(m(!0),g(x,null,k(t(S),r=>(m(),G(t(D),{key:r.id},{default:o(()=>[a(t(f),null,{default:o(()=>[l(u(r.id),1)]),_:2},1024),a(t(f),null,{default:o(()=>{var n;return[l(u(((n=r.product)==null?void 0:n.name)||"N/A"),1)]}),_:2},1024),a(t(f),null,{default:o(()=>[l(u(j(r.cost_price)),1)]),_:2},1024),a(t(f),null,{default:o(()=>[l(u(M(r.effective_date)),1)]),_:2},1024),a(t(f),null,{default:o(()=>[d("span",{class:C(r.is_active?"text-green-600":"text-red-600")},u(r.is_active?"Active":"Inactive"),3)]),_:2},1024),a(t(f),{class:"flex gap-2"},{default:o(()=>[a(t(P),{variant:"ghost",size:"icon",onClick:n=>s.$inertia.visit(`/product-prices/${r.id}/edit`)},{default:o(()=>[a(t(ae),{class:"h-4 w-4"})]),_:2},1032,["onClick"]),a(t(P),{variant:"ghost",size:"icon",onClick:n=>q(r.id)},{default:o(()=>[a(t(se),{class:"h-4 w-4"})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),d("div",ne,[d("button",{onClick:B,disabled:i.value===1,class:"px-3 py-1 rounded border border-gray-300 text-gray-700 hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed"}," Previous ",8,ie),(m(!0),g(x,null,k(b.value,r=>(m(),g("button",{key:r,onClick:n=>y(r),class:C(["px-3 py-1 rounded border text-sm",r===i.value?"bg-blue-600 border-blue-600 text-white":"border-gray-300 text-gray-700 hover:bg-gray-100"])},u(r),11,de))),128)),d("button",{onClick:z,disabled:i.value===b.value,class:"px-3 py-1 rounded border border-gray-300 text-gray-700 hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed"}," Next ",8,ue)])])]),_:1})],64))}});export{ke as default};
