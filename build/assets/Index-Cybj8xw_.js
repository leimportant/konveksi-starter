import{_ as ee}from"./AppLayout.vue_vue_type_script_setup_true_lang-CxyMViV1.js";import{d as te,a as w,b as G,g as b,j as v,N as H,x as e,K as ae,r as F,G as se,u as le,e as re,o as ie,f as oe,q as a,y as ne,z as l,l as m,A as c,O as de,F as V,D as E,H as ue,k as P,B as A}from"./app-C0ZtNFPV.js";import{a as ce,_ as g}from"./Button.vue_vue_type_script_setup_true_lang-B6TXREVN.js";import{_ as S}from"./Input.vue_vue_type_script_setup_true_lang-BWB1n0oK.js";import{_ as fe,a as pe,b as j,c as U,d as me,e as B}from"./TableRow.vue_vue_type_script_setup_true_lang-CVJoN5Nr.js";import{u as _e}from"./useToast-DV2nGitA.js";import{_ as q}from"./Checkbox.vue_vue_type_script_setup_true_lang-BU5WiKgY.js";import{_ as z,a as D,b as I,c as M}from"./DialogTitle.vue_vue_type_script_setup_true_lang-B6zpEh0A.js";import{_ as T}from"./Label.vue_vue_type_script_setup_true_lang-DUa9-7wS.js";import{P as ye}from"./plus-jsIhsatj.js";import{S as ve}from"./square-pen-Cj9XWA8y.js";import{T as ge}from"./trash-2-Bt8Dqp-q.js";import"./index-C2dazRLE.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-BIT3zfbJ.js";import"./check-CISiWBoI.js";const be=te("priceType",{state:()=>({priceTypes:[],total:0,loaded:!1,loading:!1,currentPage:1,lastPage:1,filterName:"",error:void 0}),actions:{async fetchPriceTypes(f=1,r=10){var n,o;this.loading=!0;try{const u=await w.get("/api/price-types",{params:{page:f,perPage:r,name:this.filterName}});this.priceTypes=u.data.data,this.total=u.data.total,this.currentPage=f,this.lastPage=u.data.last_page||1,this.loaded=!0}catch(u){throw this.error=((o=(n=u.response)==null?void 0:n.data)==null?void 0:o.message)||"Failed to fetch price types",u}finally{this.loading=!1}},setFilter(f,r){f==="name"&&(this.filterName=r,this.currentPage=1,this.fetchPriceTypes(1))},async createPriceType(f){var r,n;this.loading=!0;try{const o=await w.post("/api/price-types",f);return await this.fetchPriceTypes(),o.data}catch(o){throw this.error=((n=(r=o.response)==null?void 0:r.data)==null?void 0:n.message)||"Failed to create price type",o}finally{this.loading=!1}},async updatePriceType(f,r){var n,o;this.loading=!0;try{const u=await w.put(`/api/price-types/${f}`,r);return await this.fetchPriceTypes(),u.data}catch(u){throw this.error=((o=(n=u.response)==null?void 0:n.data)==null?void 0:o.message)||"Failed to update price type",u}finally{this.loading=!1}},async deletePriceType(f){var r,n;this.loading=!0;try{await w.delete(`/api/price-types/${f}`),await this.fetchPriceTypes()}catch(o){throw this.error=((n=(r=o.response)==null?void 0:r.data)==null?void 0:n.message)||"Failed to delete price type",o}finally{this.loading=!1}}}}),R=G({__name:"DialogFooter",props:{class:{}},setup(f){const r=f;return(n,o)=>(v(),b("div",{class:H(e(ce)("flex flex-col-reverse sm:flex-row sm:justify-end sm:gap-x-2",r.class))},[ae(n.$slots,"default")],2))}}),xe={class:"px-4 py-4"},Pe={class:"flex justify-between items-center mb-6"},he={class:"rounded-md border"},we={class:"flex justify-end mt-4 space-x-2"},Te=["disabled"],ke=["onClick","disabled"],$e=["disabled"],Ce={class:"space-y-4"},Ne={key:0,class:"text-red-500 text-xs mt-1"},Fe={class:"flex items-center space-x-2"},Ve={class:"space-y-4"},Se={key:0,class:"text-red-500 text-xs mt-1"},Ue={class:"flex items-center space-x-2"},Je=G({__name:"Index",setup(f){const r=_e(),n=F(!1),o=F(!1),u=F(null),i=se({name:"",is_active:!0}),y=be(),{priceTypes:K,currentPage:x,lastPage:L,loading:h,filterName:k}=le(y),$=re(()=>L.value||1),C=async d=>{d<1||d>$.value||await y.fetchPriceTypes(d)},O=()=>C(x.value+1),J=()=>C(x.value-1),Q=(d,t)=>{const p=t.target;y.setFilter(d,p.value)};ie(async()=>{await y.fetchPriceTypes()});const W=async()=>{var d,t,p,s;if(!i.name)return r.error("Name is required");try{await y.createPriceType({name:i.name,is_active:i.is_active}),r.success("Price Type created successfully"),i.reset(),n.value=!1}catch(_){const N=(s=(p=(t=(d=_==null?void 0:_.response)==null?void 0:d.data)==null?void 0:t.errors)==null?void 0:p.name)==null?void 0:s[0];r.error(N||"Failed to create Price Type")}},X=d=>{u.value=d,i.name=d.name,i.is_active=d.is_active,o.value=!0},Y=async()=>{var d,t,p,s;if(!u.value||!i.name)return r.error("Name is required");try{await y.updatePriceType(u.value.id,{name:i.name,is_active:i.is_active}),r.success("Price Type updated successfully"),i.reset(),await y.fetchPriceTypes(),o.value=!1,u.value=null}catch(_){const N=(s=(p=(t=(d=_==null?void 0:_.response)==null?void 0:d.data)==null?void 0:t.errors)==null?void 0:p.name)==null?void 0:s[0];r.error(N||"Failed to update Price Type")}},Z=async d=>{var t,p;try{await y.deletePriceType(d),r.success("Price Type deleted successfully")}catch(s){r.error(((p=(t=s==null?void 0:s.response)==null?void 0:t.data)==null?void 0:p.message)??"Failed to delete Price Type")}};return(d,t)=>{const p=oe("Badge");return v(),b(V,null,[a(e(ne),{title:"Price Types"}),a(ee,null,{default:l(()=>[m("div",xe,[m("div",Pe,[a(e(g),{onClick:t[0]||(t[0]=s=>n.value=!0),class:"bg-indigo-600 text-white py-2 rounded-md hover:bg-indigo-700 focus:ring-2 focus:ring-indigo-500"},{default:l(()=>[a(e(ye),{class:"h-4 w-4"}),t[11]||(t[11]=c(" Tambah data "))]),_:1,__:[11]}),a(e(S),{modelValue:e(k),"onUpdate:modelValue":t[1]||(t[1]=s=>de(k)?k.value=s:null),placeholder:"Search",onInput:t[2]||(t[2]=s=>Q("name",s)),class:"w-64","aria-label":"Search",disabled:e(h)},null,8,["modelValue","disabled"])]),m("div",he,[a(e(fe),null,{default:l(()=>[a(e(pe),null,{default:l(()=>[a(e(j),{class:"bg-gray-100"},{default:l(()=>[a(e(U),null,{default:l(()=>t[12]||(t[12]=[c("Name")])),_:1,__:[12]}),a(e(U),null,{default:l(()=>t[13]||(t[13]=[c("Status")])),_:1,__:[13]}),a(e(U),{class:"w-24"},{default:l(()=>t[14]||(t[14]=[c("Actions")])),_:1,__:[14]})]),_:1})]),_:1}),a(e(me),null,{default:l(()=>[(v(!0),b(V,null,E(e(K),s=>(v(),ue(e(j),{key:s.id},{default:l(()=>[a(e(B),null,{default:l(()=>[c(P(s.name),1)]),_:2},1024),a(e(B),null,{default:l(()=>[a(p,{variant:s.is_active?"default":"secondary"},{default:l(()=>[c(P(s.is_active?"Active":"Inactive"),1)]),_:2},1032,["variant"])]),_:2},1024),a(e(B),{class:"flex gap-2"},{default:l(()=>[a(e(g),{variant:"ghost",size:"icon",onClick:_=>X(s)},{default:l(()=>[a(e(ve),{class:"h-4 w-4"})]),_:2},1032,["onClick"]),a(e(g),{variant:"ghost",size:"icon",onClick:_=>Z(s.id)},{default:l(()=>[a(e(ge),{class:"h-4 w-4"})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),m("div",we,[m("button",{onClick:J,disabled:e(x)===1||e(h),class:"px-3 py-1 rounded border border-gray-300 text-gray-700 hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed"}," Previous ",8,Te),(v(!0),b(V,null,E($.value,s=>(v(),b("button",{key:s,onClick:_=>C(s),class:H(["px-3 py-1 rounded border text-sm",s===e(x)?"bg-blue-600 border-blue-600 text-white":"border-gray-300 text-gray-700 hover:bg-gray-100"]),disabled:e(h)},P(s),11,ke))),128)),m("button",{onClick:O,disabled:e(x)===$.value||e(h),class:"px-3 py-1 rounded border border-gray-300 text-gray-700 hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed"}," Next ",8,$e)]),a(e(z),{open:n.value,"onUpdate:open":t[6]||(t[6]=s=>n.value=s)},{default:l(()=>[a(e(D),null,{default:l(()=>[a(e(I),null,{default:l(()=>[a(e(M),null,{default:l(()=>t[15]||(t[15]=[c("Create Price Type")])),_:1,__:[15]})]),_:1}),m("div",Ce,[m("div",null,[a(e(T),null,{default:l(()=>t[16]||(t[16]=[c("Name")])),_:1,__:[16]}),a(e(S),{modelValue:e(i).name,"onUpdate:modelValue":t[3]||(t[3]=s=>e(i).name=s),type:"text"},null,8,["modelValue"]),e(i).errors.name?(v(),b("p",Ne,P(e(i).errors.name),1)):A("",!0)]),m("div",Fe,[a(e(q),{id:"is_active",checked:e(i).is_active,"onUpdate:checked":t[4]||(t[4]=s=>e(i).is_active=s)},null,8,["checked"]),a(e(T),{for:"is_active"},{default:l(()=>t[17]||(t[17]=[c("Active")])),_:1,__:[17]})])]),a(e(R),null,{default:l(()=>[a(e(g),{variant:"outline",onClick:t[5]||(t[5]=s=>n.value=!1)},{default:l(()=>t[18]||(t[18]=[c("Cancel")])),_:1,__:[18]}),a(e(g),{onClick:W},{default:l(()=>t[19]||(t[19]=[c("Save")])),_:1,__:[19]})]),_:1})]),_:1})]),_:1},8,["open"]),a(e(z),{open:o.value,"onUpdate:open":t[10]||(t[10]=s=>o.value=s)},{default:l(()=>[a(e(D),null,{default:l(()=>[a(e(I),null,{default:l(()=>[a(e(M),null,{default:l(()=>t[20]||(t[20]=[c("Edit Price Type")])),_:1,__:[20]})]),_:1}),m("div",Ve,[m("div",null,[a(e(T),null,{default:l(()=>t[21]||(t[21]=[c("Name")])),_:1,__:[21]}),a(e(S),{modelValue:e(i).name,"onUpdate:modelValue":t[7]||(t[7]=s=>e(i).name=s),type:"text"},null,8,["modelValue"]),e(i).errors.name?(v(),b("p",Se,P(e(i).errors.name),1)):A("",!0)]),m("div",Ue,[a(e(q),{id:"is_active",checked:e(i).is_active,"onUpdate:checked":t[8]||(t[8]=s=>e(i).is_active=s)},null,8,["checked"]),a(e(T),{for:"is_active"},{default:l(()=>t[22]||(t[22]=[c("Active")])),_:1,__:[22]})])]),a(e(R),null,{default:l(()=>[a(e(g),{variant:"outline",onClick:t[9]||(t[9]=s=>o.value=!1)},{default:l(()=>t[23]||(t[23]=[c("Cancel")])),_:1,__:[23]}),a(e(g),{onClick:Y},{default:l(()=>t[24]||(t[24]=[c("Update")])),_:1,__:[24]})]),_:1})]),_:1})]),_:1},8,["open"])])]),_:1})],64)}}});export{Je as default};
