import{b as L,u as P,r as v,o as j,w as E,g as u,j as n,q as s,x as t,y as q,z as l,l as d,M as V,A as o,B as w,H as C,F as b,D as T,k as m,I as z}from"./app-C0ZtNFPV.js";import{_ as h}from"./Button.vue_vue_type_script_setup_true_lang-B6TXREVN.js";import{_ as S}from"./DateInput.vue_vue_type_script_setup_true_lang-2xKITj_b.js";import{_ as A}from"./Input.vue_vue_type_script_setup_true_lang-BWB1n0oK.js";import{_ as U,a as H,b as M,c as _,d as Q,e as f}from"./TableRow.vue_vue_type_script_setup_true_lang-CVJoN5Nr.js";import{u as R}from"./useToast-DV2nGitA.js";import{_ as G}from"./AppLayout.vue_vue_type_script_setup_true_lang-CxyMViV1.js";import{u as J}from"./useModelStore-e7qA7dMk.js";import{P as K}from"./plus-jsIhsatj.js";import{S as O}from"./square-pen-Cj9XWA8y.js";import{T as W}from"./trash-2-Bt8Dqp-q.js";import"./index-C2dazRLE.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-BIT3zfbJ.js";const X={class:"px-4 py-6 sm:px-6 lg:px-8"},Y={class:"mb-6 flex flex-col gap-4 lg:flex-row lg:items-center lg:justify-between"},Z={class:"mb-4 flex items-center gap-2 justify-between"},ee={class:"flex min-w-[18rem] items-center gap-2"},te={class:"overflow-x-auto border bg-white shadow-sm dark:bg-gray-900"},se={class:"font-semibold"},ae={class:"font-xs text-gray-500"},le={key:0},oe={key:0},re={key:1},ne={key:0,class:"p-4 text-center text-sm text-muted-foreground"},be=L({__name:"ListModel",setup(de){const p=R(),c=J(),{models:$}=P(c),F=[{title:"Konveksi",href:"/konveksi"},{title:"List Model",href:"/konveksi/model"}],g=v(""),y=v(null),k=v(null),x=async()=>{var r,e;try{await c.fetchModels({search:g.value,start_date:y.value,end_date:k.value})}catch(a){(e=(r=a.response)==null?void 0:r.data)!=null&&e.errors?(console.error(a.response.data.errors),p.error("Gagal ambil data")):p.error("Terjadi kesalahan saat membuat model")}};j(()=>{x()}),E(g,()=>{x()});const N=async r=>{var e,a;if(confirm("Are you sure you want to delete this model?"))try{await c.deleteModel(r),p.success("Model deleted successfully"),await x()}catch(i){p.error(((a=(e=i==null?void 0:i.response)==null?void 0:e.data)==null?void 0:a.message)??"Failed to delete model")}},B=r=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0,maximumFractionDigits:0}).format(r),I=r=>r?new Date(r).toLocaleDateString("id-ID",{day:"2-digit",month:"long",year:"numeric"}):"-";return(r,e)=>(n(),u(b,null,[s(t(q),{title:"List Model"}),s(G,{breadcrumbs:F},{default:l(()=>[d("div",X,[d("div",Y,[s(t(h),{onClick:e[0]||(e[0]=a=>t(V).visit("/konveksi/model/create")),class:"rounded-md bg-indigo-600 py-2 text-white hover:bg-indigo-700 focus:ring-2 focus:ring-indigo-500"},{default:l(()=>[s(t(K),{class:"mr-1 h-4 w-4"}),e[4]||(e[4]=o(" Tambah "))]),_:1,__:[4]}),d("div",Z,[d("div",ee,[s(t(S),{modelValue:y.value,"onUpdate:modelValue":e[1]||(e[1]=a=>y.value=a),placeholder:"Start",class:"min-w-[8rem]"},null,8,["modelValue"]),e[5]||(e[5]=d("span",{class:"text-gray-500"},"â€“",-1)),s(t(S),{modelValue:k.value,"onUpdate:modelValue":e[2]||(e[2]=a=>k.value=a),placeholder:"End",class:"min-w-[8rem]"},null,8,["modelValue"])]),s(t(A),{modelValue:g.value,"onUpdate:modelValue":e[3]||(e[3]=a=>g.value=a),placeholder:"Cari data",class:"w-64"},null,8,["modelValue"])])]),d("div",te,[s(t(U),null,{default:l(()=>[s(t(H),null,{default:l(()=>[s(t(M),{class:"bg-gray-100"},{default:l(()=>[s(t(_),{class:"w-[300px]"},{default:l(()=>e[6]||(e[6]=[o("Nama Model")])),_:1,__:[6]}),s(t(_),null,{default:l(()=>e[7]||(e[7]=[o("Est Harga/Pcs")])),_:1,__:[7]}),s(t(_),null,{default:l(()=>e[8]||(e[8]=[o("Est Qty")])),_:1,__:[8]}),s(t(_),{class:"hidden md:table-cell"},{default:l(()=>e[9]||(e[9]=[o("Catatan")])),_:1,__:[9]}),s(t(_),{class:"text-right"},{default:l(()=>e[10]||(e[10]=[o("Action")])),_:1,__:[10]})]),_:1})]),_:1}),s(t(Q),null,{default:l(()=>[(n(!0),u(b,null,T(t($),a=>(n(),C(t(M),{key:a.id},{default:l(()=>[s(t(f),{class:"font-medium text-foreground"},{default:l(()=>[d("span",se,m(a.description),1),e[11]||(e[11]=o()),e[12]||(e[12]=d("br",null,null,-1)),d("span",ae,"Mulai :"+m(I(a.start_date)),1)]),_:2,__:[11,12]},1024),s(t(f),null,{default:l(()=>[o(m(B(a.estimation_price_pcs)),1)]),_:2},1024),s(t(f),null,{default:l(()=>[a.sizes&&a.sizes.length?(n(),u("div",le,[(n(!0),u(b,null,T(a.sizes,(i,D)=>(n(),u("span",{key:D,class:"font-xs inline-block"},[o(m(i.size_id)+" ("+m(i.qty)+")",1),D!==a.sizes.length-1?(n(),u("span",oe,", ")):w("",!0)]))),128))])):(n(),u("span",re,"-"))]),_:2},1024),s(t(f),{class:"hidden text-muted-foreground md:table-cell"},{default:l(()=>[o(m(a.remark||"-"),1)]),_:2},1024),s(t(f),{class:"space-x-1 text-right"},{default:l(()=>[s(t(h),{size:"icon",variant:"ghost",onClick:z(i=>t(V).visit(`/konveksi/model/${a.id}/edit`),["stop"])},{default:l(()=>[s(t(O),{class:"h-4 w-4"})]),_:2},1032,["onClick"]),s(t(h),{size:"icon",variant:"ghost",onClick:z(i=>N(a.id),["stop"])},{default:l(()=>[s(t(W),{class:"h-4 w-4 text-red-500"})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128)),!t(c).loading&&t($).length===0?(n(),C(t(M),{key:0},{default:l(()=>[s(t(f),{colspan:"6",class:"py-6 text-center text-muted-foreground"},{default:l(()=>e[13]||(e[13]=[o(" Tidak ada model yang ditemukan. ")])),_:1,__:[13]})]),_:1})):w("",!0)]),_:1})]),_:1}),t(c).loading?(n(),u("div",ne,"Memuat data...")):w("",!0)])])]),_:1})],64))}});export{be as default};
