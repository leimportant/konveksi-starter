import{b as G,r as C,G as H,u as L,e as J,o as K,g as b,j as c,q as a,x as t,y as Q,z as o,l,B as O,A as m,O as W,F as M,D as V,H as X,k as N,N as Y,I as P}from"./app-C0ZtNFPV.js";import{_ as Z}from"./AppLayout.vue_vue_type_script_setup_true_lang-CxyMViV1.js";import{_}from"./Button.vue_vue_type_script_setup_true_lang-B6TXREVN.js";import{_ as $}from"./Input.vue_vue_type_script_setup_true_lang-BWB1n0oK.js";import{_ as ee,a as te,b as j,c as F,d as se,e as S}from"./TableRow.vue_vue_type_script_setup_true_lang-CVJoN5Nr.js";import{u as ae}from"./useToast-DV2nGitA.js";import{u as oe}from"./useUomStore-CL0R-Ai3.js";import{P as le}from"./plus-jsIhsatj.js";import{T as re}from"./trash-2-Bt8Dqp-q.js";import"./index-C2dazRLE.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-BIT3zfbJ.js";const ne={class:"px-4 py-4"},de={class:"flex justify-between items-center mb-6"},ie={class:"rounded-md border"},ue={class:"flex justify-end mt-4 space-x-2"},me=["disabled"],fe=["onClick","disabled"],ce=["disabled"],be={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},_e={class:"bg-white p-6 rounded-lg w-96"},pe={class:"mb-4"},ge={class:"flex justify-end gap-2"},ye={key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},ve={class:"bg-white p-6 rounded-lg w-96"},xe={class:"mb-4"},Ue={class:"flex justify-end gap-2"},Se=G({__name:"Index",setup(we){const u=ae(),g=C(!1),v=C(!1),x=C(null),i=H({name:""}),T=[{title:"UOM",href:"/uoms"}],n=oe(),{items:B,currentPage:p,lastPage:q,loading:y,filterName:U}=L(n),w=J(()=>q.value||1),h=async r=>{r<1||r>w.value||await n.fetchUoms(r)},z=()=>h(p.value+1),E=()=>h(p.value-1),A=(r,e)=>{const s=e.target;n.setFilter(r,s.value)};K(()=>{n.fetchUoms()});const D=async()=>{var r,e,s,d;if(!i.name)return u.error("Name is required");try{await n.createUom(i.name),u.success("UOM created successfully"),i.reset(),n.loaded=!1,await n.fetchUoms(),g.value=!1}catch(f){const k=(d=(s=(e=(r=f==null?void 0:f.response)==null?void 0:r.data)==null?void 0:e.errors)==null?void 0:s.name)==null?void 0:d[0];u.error(k||"Failed to create UOM")}},I=async()=>{var r,e,s,d;if(!x.value||!i.name)return u.error("Name is required");try{await n.updateUom(x.value.id,i.name),u.success("UOM updated successfully"),i.reset(),n.loaded=!1,await n.fetchUoms(),v.value=!1,x.value=null}catch(f){const k=(d=(s=(e=(r=f==null?void 0:f.response)==null?void 0:r.data)==null?void 0:e.errors)==null?void 0:s.name)==null?void 0:d[0];u.error(k||"Failed to update UOM")}},R=async r=>{var e,s;if(confirm("Are you sure you want to delete this UOM?"))try{await n.deleteUom(r),u.success("UOM deleted successfully"),n.loaded=!1,await n.fetchUoms()}catch(d){u.error(((s=(e=d==null?void 0:d.response)==null?void 0:e.data)==null?void 0:s.message)??"Failed to delete UOM")}};return(r,e)=>(c(),b(M,null,[a(t(Q),{title:"UOM Management"}),a(Z,{breadcrumbs:T},{default:o(()=>[l("div",ne,[l("div",de,[a(t(_),{onClick:e[0]||(e[0]=s=>g.value=!0),class:"bg-indigo-600 text-white py-2 rounded-md hover:bg-indigo-700 focus:ring-2 focus:ring-indigo-500"},{default:o(()=>[a(t(le),{class:"h-4 w-4"}),e[7]||(e[7]=m(" Add "))]),_:1,__:[7]}),a(t($),{modelValue:t(U),"onUpdate:modelValue":e[1]||(e[1]=s=>W(U)?U.value=s:null),placeholder:"Search",onInput:e[2]||(e[2]=s=>A("name",s)),class:"w-64","aria-label":"Search",disabled:t(y)},null,8,["modelValue","disabled"])]),l("div",ie,[a(t(ee),null,{default:o(()=>[a(t(te),null,{default:o(()=>[a(t(j),{class:"bg-gray-100"},{default:o(()=>[a(t(F),null,{default:o(()=>e[8]||(e[8]=[m("Name")])),_:1,__:[8]}),a(t(F),{class:"w-24"},{default:o(()=>e[9]||(e[9]=[m("Actions")])),_:1,__:[9]})]),_:1})]),_:1}),a(t(se),null,{default:o(()=>[(c(!0),b(M,null,V(t(B),s=>(c(),X(t(j),{key:s.id},{default:o(()=>[a(t(S),null,{default:o(()=>[m(N(s.name),1)]),_:2},1024),a(t(S),{class:"flex gap-2"},{default:o(()=>[a(t(_),{variant:"ghost",size:"icon",onClick:d=>R(s.id)},{default:o(()=>[a(t(re),{class:"h-4 w-4"})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),l("div",ue,[l("button",{onClick:E,disabled:t(p)===1||t(y),class:"px-3 py-1 rounded border border-gray-300 text-gray-700 hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed"}," Previous ",8,me),(c(!0),b(M,null,V(w.value,s=>(c(),b("button",{key:s,onClick:d=>h(s),class:Y(["px-3 py-1 rounded border text-sm",s===t(p)?"bg-blue-600 border-blue-600 text-white":"border-gray-300 text-gray-700 hover:bg-gray-100"]),disabled:t(y)},N(s),11,fe))),128)),l("button",{onClick:z,disabled:t(p)===w.value||t(y),class:"px-3 py-1 rounded border border-gray-300 text-gray-700 hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed"}," Next ",8,ce)]),g.value?(c(),b("div",be,[l("div",_e,[e[12]||(e[12]=l("h2",{class:"text-lg font-semibold mb-4"},"Tambah Ukuran Baru",-1)),l("form",{onSubmit:P(D,["prevent"])},[l("div",pe,[a(t($),{modelValue:t(i).name,"onUpdate:modelValue":e[3]||(e[3]=s=>t(i).name=s),placeholder:"UOM Name",required:""},null,8,["modelValue"])]),l("div",ge,[a(t(_),{type:"button",variant:"outline",onClick:e[4]||(e[4]=s=>g.value=!1)},{default:o(()=>e[10]||(e[10]=[m("Cancel")])),_:1,__:[10]}),a(t(_),{type:"submit"},{default:o(()=>e[11]||(e[11]=[m("Create")])),_:1,__:[11]})])],32)])])):O("",!0),v.value?(c(),b("div",ye,[l("div",ve,[e[15]||(e[15]=l("h2",{class:"text-lg font-semibold mb-4"},"Edit UOM",-1)),l("form",{onSubmit:P(I,["prevent"])},[l("div",xe,[a(t($),{modelValue:t(i).name,"onUpdate:modelValue":e[5]||(e[5]=s=>t(i).name=s),placeholder:"UOM Name",required:""},null,8,["modelValue"])]),l("div",Ue,[a(t(_),{type:"button",variant:"outline",onClick:e[6]||(e[6]=s=>v.value=!1)},{default:o(()=>e[13]||(e[13]=[m("Cancel")])),_:1,__:[13]}),a(t(_),{type:"submit"},{default:o(()=>e[14]||(e[14]=[m("Update")])),_:1,__:[14]})])],32)])])):O("",!0)])]),_:1})],64))}});export{Se as default};
