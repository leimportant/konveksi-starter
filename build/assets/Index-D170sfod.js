import{b as H,r as k,G as L,u as J,e as K,o as Q,g as b,j as f,q as a,x as t,y as W,z as o,l as n,B as U,A as m,O as X,F as C,D as V,H as Y,k as N,N as Z,I as M}from"./app-C0ZtNFPV.js";import{_ as ee}from"./AppLayout.vue_vue_type_script_setup_true_lang-CxyMViV1.js";import{_}from"./Button.vue_vue_type_script_setup_true_lang-B6TXREVN.js";import{_ as $}from"./Input.vue_vue_type_script_setup_true_lang-BWB1n0oK.js";import{_ as te,a as se,b as P,c as j,d as ae,e as F}from"./TableRow.vue_vue_type_script_setup_true_lang-CVJoN5Nr.js";import{u as le}from"./useToast-DV2nGitA.js";import{u as oe}from"./useSizeStore-D54fUmtw.js";import{d as ne}from"./debounce-BcZQbp_F.js";import{P as re}from"./plus-jsIhsatj.js";import{T as de}from"./trash-2-Bt8Dqp-q.js";import"./index-C2dazRLE.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-BIT3zfbJ.js";const ie={class:"px-4 py-4"},ue={class:"flex justify-between items-center mb-6"},me={class:"rounded-md border"},ce={class:"flex justify-end mt-4 space-x-2"},fe=["disabled"],be=["onClick","disabled"],_e=["disabled"],pe={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},ge={class:"bg-white p-6 rounded-lg w-96"},ye={class:"mb-4"},ve={class:"flex justify-end gap-2"},xe={key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},we={class:"bg-white p-6 rounded-lg w-96"},he={class:"mb-4"},Se={class:"flex justify-end gap-2"},Oe=H({__name:"Index",setup(ze){const u=le(),g=k(!1),v=k(!1),x=k(null),i=L({name:""}),T=[{title:"Ukuran",href:"/sizes"}],r=oe(),{sizes:B,currentPage:p,lastPage:O,loading:y,filterName:w}=J(r),h=K(()=>O.value||1),S=async l=>{l<1||l>h.value||await r.fetchSizes(l)},q=()=>S(p.value+1),E=()=>S(p.value-1),A=ne((l,e)=>{r.setFilter(l,e)},400),I=l=>{const e=l.target;A("name",e.value)};Q(()=>{r.fetchSizes()});const D=async()=>{var l,e,s,d;if(!i.name)return u.error("Name is required");try{await r.createSize(i.name),u.success("Size created successfully"),i.reset(),r.loaded=!1,await r.fetchSizes(),g.value=!1}catch(c){const z=(d=(s=(e=(l=c==null?void 0:c.response)==null?void 0:l.data)==null?void 0:e.errors)==null?void 0:s.name)==null?void 0:d[0];u.error(z||"Failed to create Size")}},R=async()=>{var l,e,s,d;if(!x.value||!i.name)return u.error("Name is required");try{await r.updateSize(x.value.id,i.name),u.success("Size updated successfully"),i.reset(),r.loaded=!1,await r.fetchSizes(),v.value=!1,x.value=null}catch(c){const z=(d=(s=(e=(l=c==null?void 0:c.response)==null?void 0:l.data)==null?void 0:e.errors)==null?void 0:s.name)==null?void 0:d[0];u.error(z||"Failed to update UOM")}},G=async l=>{var e,s;if(confirm("Are you sure you want to delete this UOM?"))try{await r.deleteSize(l),r.loaded=!1,await r.fetchSizes(),u.success("Size deleted successfully")}catch(d){u.error(((s=(e=d==null?void 0:d.response)==null?void 0:e.data)==null?void 0:s.message)??"Failed to delete UOM")}};return(l,e)=>(f(),b(C,null,[a(t(W),{title:"Size Management"}),a(ee,{breadcrumbs:T},{default:o(()=>[n("div",ie,[n("div",ue,[a(t(_),{onClick:e[0]||(e[0]=s=>g.value=!0),class:"bg-indigo-600 text-white py-2 rounded-md hover:bg-indigo-700 focus:ring-2 focus:ring-indigo-500"},{default:o(()=>[a(t(re),{class:"h-4 w-4"}),e[6]||(e[6]=m(" Add "))]),_:1,__:[6]}),a(t($),{modelValue:t(w),"onUpdate:modelValue":e[1]||(e[1]=s=>X(w)?w.value=s:null),placeholder:"Search",onInput:I,class:"w-64","aria-label":"Search",disabled:t(y)},null,8,["modelValue","disabled"])]),n("div",me,[a(t(te),null,{default:o(()=>[a(t(se),null,{default:o(()=>[a(t(P),{class:"bg-gray-100"},{default:o(()=>[a(t(j),null,{default:o(()=>e[7]||(e[7]=[m("Name")])),_:1,__:[7]}),a(t(j),{class:"w-24"},{default:o(()=>e[8]||(e[8]=[m("Actions")])),_:1,__:[8]})]),_:1})]),_:1}),a(t(ae),null,{default:o(()=>[(f(!0),b(C,null,V(t(B),s=>(f(),Y(t(P),{key:s.id},{default:o(()=>[a(t(F),null,{default:o(()=>[m(N(s.name),1)]),_:2},1024),a(t(F),{class:"flex gap-2"},{default:o(()=>[a(t(_),{variant:"ghost",size:"icon",onClick:d=>G(s.id)},{default:o(()=>[a(t(de),{class:"h-4 w-4"})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),n("div",ce,[n("button",{onClick:E,disabled:t(p)===1||t(y),class:"px-3 py-1 rounded border border-gray-300 text-gray-700 hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed"}," Previous ",8,fe),(f(!0),b(C,null,V(h.value,s=>(f(),b("button",{key:s,onClick:d=>S(s),class:Z(["px-3 py-1 rounded border text-sm",s===t(p)?"bg-blue-600 border-blue-600 text-white":"border-gray-300 text-gray-700 hover:bg-gray-100"]),disabled:t(y)},N(s),11,be))),128)),n("button",{onClick:q,disabled:t(p)===h.value||t(y),class:"px-3 py-1 rounded border border-gray-300 text-gray-700 hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed"}," Next ",8,_e)]),g.value?(f(),b("div",pe,[n("div",ge,[e[11]||(e[11]=n("h2",{class:"text-lg font-semibold mb-4"},"Tambah Ukuran Baru",-1)),n("form",{onSubmit:M(D,["prevent"])},[n("div",ye,[a(t($),{modelValue:t(i).name,"onUpdate:modelValue":e[2]||(e[2]=s=>t(i).name=s),placeholder:"UOM Name",required:""},null,8,["modelValue"])]),n("div",ve,[a(t(_),{type:"button",variant:"outline",onClick:e[3]||(e[3]=s=>g.value=!1)},{default:o(()=>e[9]||(e[9]=[m("Cancel")])),_:1,__:[9]}),a(t(_),{type:"submit"},{default:o(()=>e[10]||(e[10]=[m("Create")])),_:1,__:[10]})])],32)])])):U("",!0),v.value?(f(),b("div",xe,[n("div",we,[e[14]||(e[14]=n("h2",{class:"text-lg font-semibold mb-4"},"Edit Size",-1)),n("form",{onSubmit:M(R,["prevent"])},[n("div",he,[a(t($),{modelValue:t(i).name,"onUpdate:modelValue":e[4]||(e[4]=s=>t(i).name=s),placeholder:"UOM Name",required:""},null,8,["modelValue"])]),n("div",Se,[a(t(_),{type:"button",variant:"outline",onClick:e[5]||(e[5]=s=>v.value=!1)},{default:o(()=>e[12]||(e[12]=[m("Cancel")])),_:1,__:[12]}),a(t(_),{type:"submit"},{default:o(()=>e[13]||(e[13]=[m("Update")])),_:1,__:[13]})])],32)])])):U("",!0)])]),_:1})],64))}});export{Oe as default};
