import{_ as C}from"./AppLayout.vue_vue_type_script_setup_true_lang-CxyMViV1.js";import{b as I,L as N,r as S,o as z,g as m,j as f,q as a,x as s,y as F,z as l,l as e,A as n,k as o,F as $,D as L,H as M,N as V,M as q}from"./app-C0ZtNFPV.js";import{u as j}from"./useToast-DV2nGitA.js";import{u as A}from"./useStockOpnameStore-C_pC0kEV.js";import{_ as H,a as P,b,c as p,d as Q,e as _}from"./TableRow.vue_vue_type_script_setup_true_lang-CVJoN5Nr.js";import"./Button.vue_vue_type_script_setup_true_lang-B6TXREVN.js";import"./index-C2dazRLE.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-BIT3zfbJ.js";const T={class:"px-4 py-4"},E={key:0,class:"bg-white shadow rounded p-6 space-y-6"},J={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},R={class:"md:col-span-2"},U={class:"mt-6"},Y={class:"flex justify-end mt-4"},G={key:1,class:"text-center text-gray-600"},K={key:2,class:"text-center text-red-600"},ot=I({__name:"View",setup(W){const k=j(),u=N().props.id;(!u||u==="0")&&(console.error("Invalid stockOpnameId:",u),k.error("Invalid stock opname ID"));const v=S(!1),r=S(null),x=A(),D=async()=>{try{v.value=!0,await x.fetchOpnameById(u),r.value=x.items.find(i=>i.id===u)}catch(i){console.error("Failed to load stock opname:",i),k.error("Failed to load stock opname data")}finally{v.value=!1}};z(()=>{D()});const O=[{title:"Stock Opname",href:"/stock-opnames"},{title:"Detail",href:`/stock-opnames/${u}`}];function w(i){if(!i)return"-";const t=new Date(i),c=String(t.getDate()).padStart(2,"0"),g=String(t.getMonth()+1).padStart(2,"0"),d=t.getFullYear(),y=String(t.getHours()).padStart(2,"0"),B=String(t.getMinutes()).padStart(2,"0");return`${c}/${g}/${d} ${y}:${B}`}return(i,t)=>(f(),m($,null,[a(s(F),{title:"View Stock Opname"}),a(C,{breadcrumbs:O},{default:l(()=>{var c,g;return[e("div",T,[t[13]||(t[13]=e("h1",{class:"text-xl font-bold mb-4"},"Stock Opname Detail",-1)),r.value?(f(),m("div",E,[e("div",J,[e("div",null,[t[1]||(t[1]=e("strong",null,"Location:",-1)),n(" "+o(((c=r.value.location)==null?void 0:c.name)||"-"),1)]),e("div",null,[t[2]||(t[2]=e("strong",null,"Product:",-1)),n(" "+o(((g=r.value.product)==null?void 0:g.name)||"-"),1)]),e("div",null,[t[3]||(t[3]=e("strong",null,"SLOC:",-1)),n(" "+o(r.value.sloc_id),1)]),e("div",null,[t[4]||(t[4]=e("strong",null,"UOM:",-1)),n(" "+o(r.value.uom_id),1)]),e("div",R,[t[5]||(t[5]=e("strong",null,"Remark:",-1)),n(" "+o(r.value.remark||"-"),1)]),e("div",null,[t[6]||(t[6]=e("strong",null,"Created At:",-1)),n(" "+o(w(r.value.created_at)),1)])]),e("div",U,[t[12]||(t[12]=e("h2",{class:"text-lg font-semibold mb-2"},"Size Details",-1)),a(s(H),null,{default:l(()=>[a(s(P),null,{default:l(()=>[a(s(b),null,{default:l(()=>[a(s(p),null,{default:l(()=>t[7]||(t[7]=[n("Size")])),_:1,__:[7]}),a(s(p),null,{default:l(()=>t[8]||(t[8]=[n("System Qty")])),_:1,__:[8]}),a(s(p),null,{default:l(()=>t[9]||(t[9]=[n("Physical Qty")])),_:1,__:[9]}),a(s(p),null,{default:l(()=>t[10]||(t[10]=[n("Difference")])),_:1,__:[10]}),a(s(p),null,{default:l(()=>t[11]||(t[11]=[n("Note")])),_:1,__:[11]})]),_:1})]),_:1}),a(s(Q),null,{default:l(()=>[(f(!0),m($,null,L(r.value.items,(d,y)=>(f(),M(s(b),{key:y},{default:l(()=>[a(s(_),null,{default:l(()=>[n(o(d.size_id),1)]),_:2},1024),a(s(_),null,{default:l(()=>[n(o(d.qty_system),1)]),_:2},1024),a(s(_),null,{default:l(()=>[n(o(d.qty_physical),1)]),_:2},1024),a(s(_),{class:V(d.difference<0?"text-red-600":"text-green-600")},{default:l(()=>[n(o(d.difference),1)]),_:2},1032,["class"]),a(s(_),null,{default:l(()=>[n(o(d.note||"-"),1)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),e("div",Y,[e("button",{onClick:t[0]||(t[0]=d=>s(q).visit("/stock-opnames")),class:"bg-gray-200 hover:bg-gray-300 text-gray-800 px-4 py-2 rounded"}," Back ")])])):v.value?(f(),m("div",G,"Loading...")):(f(),m("div",K,"No data found."))])]}),_:1})],64))}});export{ot as default};
