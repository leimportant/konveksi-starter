import{_ as M}from"./Button.vue_vue_type_script_setup_true_lang-B6TXREVN.js";import{_ as S}from"./Input.vue_vue_type_script_setup_true_lang-BWB1n0oK.js";import{_ as A,a as E,b as $,c as f,d as L,e as p}from"./TableRow.vue_vue_type_script_setup_true_lang-CVJoN5Nr.js";import{_ as z}from"./AppLayout.vue_vue_type_script_setup_true_lang-CxyMViV1.js";import{u as j}from"./useReportStore-ChnP6fYh.js";import{b as U,r as C,e as y,o as H,g as d,j as r,q as a,x as o,y as q,z as l,l as u,A as i,k as m,F as P,D as O,H as Q,N as D,B as T,E as k}from"./app-C0ZtNFPV.js";import"./index-C2dazRLE.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-BIT3zfbJ.js";const W={class:"py-2"},Y={class:"mx-auto max-w-7xl sm:px-2 lg:px-2"},G={class:"overflow-hidden bg-white shadow-sm sm:rounded-lg"},J={class:"mb-4 flex space-x-4"},K={key:0},X={key:1,class:"text-red-500"},Z={key:2},ee={class:"flex gap-1 items-end h-4"},te={class:"mt-4 flex items-center justify-between"},oe={class:"mt-4 flex justify-end space-x-2"},ae=["disabled"],se=["onClick"],le=["disabled"],fe=U({__name:"OmsetReport",setup(ne){const n=j(),N=[{title:"Report Omset",href:"/reports/omzet"}],g=C(""),_=C(""),c=y(()=>n.currentPage),V=y(()=>n.lastPage),b=y(()=>n.perPage),v=async(s=1,e=10)=>{await n.fetchOmsetPerPayment(g.value,_.value,s,e),console.log("Current Page:",n.currentPage),console.log("Last Page:",n.lastPage),console.log("Total Omset Records:",n.totalOmsetRecords)},w=y(()=>Math.ceil(n.totalOmsetRecords/n.perPage)),B=()=>{h(c.value-1)},F=()=>{h(c.value+1)},h=s=>{console.log("Attempting to go to page:",s),console.log("Current Page (before check):",c.value),console.log("Last Page (before check):",V.value),v(s,b.value)},I=s=>{const e=parseFloat(s);return isNaN(e)?"Rp0,00":new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:2}).format(e)},x=(s,e=5e5)=>{const t=typeof s=="string"?parseFloat(s):s,R=Math.min(t/e*100,100);return Math.round(R)};return H(()=>{const s=new Date,e=new Date(s.getFullYear(),s.getMonth(),1);g.value=e.toISOString().split("T")[0],_.value=s.toISOString().split("T")[0],v(c.value,b.value)}),(s,e)=>(r(),d(P,null,[a(o(q),{title:"Omset Report"}),a(z,{breadcrumbs:N},{default:l(()=>[u("div",W,[u("div",Y,[u("div",G,[u("div",J,[a(o(S),{type:"date",modelValue:g.value,"onUpdate:modelValue":e[0]||(e[0]=t=>g.value=t)},null,8,["modelValue"]),a(o(S),{type:"date",modelValue:_.value,"onUpdate:modelValue":e[1]||(e[1]=t=>_.value=t)},null,8,["modelValue"]),a(o(M),{onClick:e[2]||(e[2]=t=>v(1,b.value)),class:"bg-indigo-600 text-white py-2 rounded-md hover:bg-indigo-700 focus:ring-2 focus:ring-indigo-500"},{default:l(()=>e[3]||(e[3]=[i("Tampilkan")])),_:1,__:[3]})]),o(n).loading?(r(),d("div",K,"Loading...")):o(n).error?(r(),d("div",X,"Error: "+m(o(n).error.message),1)):(r(),d("div",Z,[a(o(A),null,{default:l(()=>[a(o(E),null,{default:l(()=>[a(o($),{class:"bg-gray-100"},{default:l(()=>[a(o(f),null,{default:l(()=>e[4]||(e[4]=[i("Tanggal")])),_:1,__:[4]}),a(o(f),null,{default:l(()=>e[5]||(e[5]=[i("Payment Method")])),_:1,__:[5]}),a(o(f),null,{default:l(()=>e[6]||(e[6]=[i("Omset")])),_:1,__:[6]}),a(o(f),null,{default:l(()=>e[7]||(e[7]=[i("Bars")])),_:1,__:[7]})]),_:1})]),_:1}),a(o(L),null,{default:l(()=>[(r(!0),d(P,null,O(o(n).omsetSummary,t=>(r(),Q(o($),{key:t.tanggal,class:D(t.payment_method==="SUBTOTAL"?"bg-green-100 font-semibold":"")},{default:l(()=>[a(o(p),null,{default:l(()=>[i(m(t.tanggal),1)]),_:2},1024),a(o(p),null,{default:l(()=>[i(m(t.payment_method),1)]),_:2},1024),a(o(p),null,{default:l(()=>[i(m(I(t.total_omset.toString())),1)]),_:2},1024),a(o(p),null,{default:l(()=>[u("div",ee,[t.payment_method==="CASH"?(r(),d("div",{key:0,class:"bg-green-500 h-full",style:k({width:`${x(t.total_omset)}%`})},null,4)):T("",!0),t.payment_method==="QRIS"||t.payment_method==="TRANSFER"?(r(),d("div",{key:1,class:"bg-indigo-500 h-full",style:k({width:`${x(t.total_omset)}%`})},null,4)):t.payment_method==="CREDIT"?(r(),d("div",{key:2,class:"bg-blue-500 h-full",style:k({width:`${x(t.total_omset)}%`})},null,4)):T("",!0)])]),_:2},1024)]),_:2},1032,["class"]))),128))]),_:1})]),_:1}),u("div",te,[u("div",oe,[u("button",{onClick:B,disabled:c.value===1,class:"rounded border border-gray-300 px-3 py-1 text-gray-700 hover:bg-gray-100 disabled:cursor-not-allowed disabled:opacity-50"}," Previous ",8,ae),(r(!0),d(P,null,O(w.value,t=>(r(),d("button",{key:t,onClick:R=>h(t),class:D(["rounded border px-3 py-1 text-sm",t===c.value?"border-blue-600 bg-blue-600 text-white":"border-gray-300 text-gray-700 hover:bg-gray-100"])},m(t),11,se))),128)),u("button",{onClick:F,disabled:c.value===w.value,class:"rounded border border-gray-300 px-3 py-1 text-gray-700 hover:bg-gray-100 disabled:cursor-not-allowed disabled:opacity-50"}," Next ",8,le)])])]))])])])]),_:1})],64))}});export{fe as default};
