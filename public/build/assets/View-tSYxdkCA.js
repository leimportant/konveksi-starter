import{_ as F}from"./AppLayout.vue_vue_type_script_setup_true_lang-_mVlUDwO.js";import{r as P,P as x,d as I,o as M,f as T,g as k,p as a,u as t,Z as A,x as s,k as v,C as $,y as r,j as c,F as j,B as E,E as G,D as b}from"./app-BLOMClMO.js";import{u as N}from"./useTransferStockStore-D-y5sxuD.js";import{u as V}from"./useToast-C9x9jF4x.js";import{_ as C,a as D,b as g,c as m,d as S,e as p}from"./TableRow.vue_vue_type_script_setup_true_lang-Cw_mOBoB.js";import"./index-nSIjBrBy.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-BwS9btDF.js";function L(){const y=N(),i=V(),u=P(!1);return{acceptTransfer:async d=>{var _,f;u.value=!0;try{await y.fetchTransferByID(d),await y.acceptTransfer(d),i.success("Transfer diterima"),x.visit("/transfer-stock")}catch(l){console.error(l),i.error(((f=(_=l==null?void 0:l.response)==null?void 0:_.data)==null?void 0:f.message)??"Gagal menerima transfer")}finally{u.value=!1}},rejectTransfer:async d=>{var _,f;u.value=!0;try{await y.fetchTransferByID(d),await y.rejectTransfer(d),i.success("Transfer ditolak"),x.visit("/transfer-stock")}catch(l){console.error(l),i.error(((f=(_=l==null?void 0:l.response)==null?void 0:_.data)==null?void 0:f.message)??"Gagal menolak transfer")}finally{u.value=!1}},loading:u}}const U={class:"p-6 space-y-6"},q={key:0,class:"space-y-6"},z={class:"border rounded p-4"},K={class:"flex items-center justify-between gap-4"},O={key:0,class:"flex gap-2"},Q={key:1,class:"text-center py-8"},h=I({__name:"View",props:{id:{}},setup(y){const i=y,u=[{title:"Transfer Stock",href:"/transfer-stock"}],o=N(),w=V(),{acceptTransfer:d,rejectTransfer:_,loading:f}=L();return M(async()=>{try{await o.fetchTransferByID(i.id),await o.fetchProducts()}catch(l){console.error(l),w.error("Failed to load transfer details")}}),(l,e)=>(k(),T(j,null,[a(t(A),{title:"Transfer Stock Management"}),a(F,{breadcrumbs:u},{default:s(()=>[v("div",U,[t(o).transfer?(k(),T("div",q,[a(t(C),null,{default:s(()=>[a(t(D),null,{default:s(()=>[a(t(g),null,{default:s(()=>[a(t(m),null,{default:s(()=>e[3]||(e[3]=[r("From")])),_:1,__:[3]}),a(t(m),null,{default:s(()=>e[4]||(e[4]=[r("Transfer To")])),_:1,__:[4]}),a(t(m),null,{default:s(()=>e[5]||(e[5]=[r("Sloc")])),_:1,__:[5]})]),_:1})]),_:1}),a(t(S),null,{default:s(()=>[a(t(g),null,{default:s(()=>[a(t(p),null,{default:s(()=>{var n;return[r(c((n=t(o).transfer.location)==null?void 0:n.name),1)]}),_:1}),a(t(p),null,{default:s(()=>{var n;return[r(c((n=t(o).transfer.location_destination)==null?void 0:n.name),1)]}),_:1}),a(t(p),null,{default:s(()=>{var n;return[r(c((n=t(o).transfer.sloc)==null?void 0:n.name),1)]}),_:1})]),_:1})]),_:1})]),_:1}),v("div",z,[e[10]||(e[10]=v("div",{class:"font-semibold text-lg mb-2"},"Detail Barang",-1)),a(t(C),null,{default:s(()=>[a(t(D),null,{default:s(()=>[a(t(g),null,{default:s(()=>[a(t(m),null,{default:s(()=>e[6]||(e[6]=[r("Produk")])),_:1,__:[6]}),a(t(m),null,{default:s(()=>e[7]||(e[7]=[r("Ukuran")])),_:1,__:[7]}),a(t(m),null,{default:s(()=>e[8]||(e[8]=[r("UOM")])),_:1,__:[8]}),a(t(m),{class:"text-right"},{default:s(()=>e[9]||(e[9]=[r("Qty")])),_:1,__:[9]})]),_:1})]),_:1}),a(t(S),null,{default:s(()=>[(k(!0),T(j,null,E(t(o).transfer.transfer_detail,n=>(k(),G(t(g),{key:n.id},{default:s(()=>[a(t(p),null,{default:s(()=>{var B;return[r(c((B=n.product)==null?void 0:B.name),1)]}),_:2},1024),a(t(p),null,{default:s(()=>[r(c(n.size_id),1)]),_:2},1024),a(t(p),null,{default:s(()=>[r(c(n.uom_id),1)]),_:2},1024),a(t(p),{class:"text-right"},{default:s(()=>[r(c(n.qty),1)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),v("div",K,[a(t(b),{variant:"outline",onClick:e[0]||(e[0]=n=>t(x).visit("/transfer-stock"))},{default:s(()=>e[11]||(e[11]=[r(" Kembali ")])),_:1,__:[11]}),t(o).transfer.status==="Pending"?(k(),T("div",O,[a(t(b),{variant:"default",onClick:e[1]||(e[1]=()=>t(d)(i.id)),disabled:t(f)},{default:s(()=>e[12]||(e[12]=[r(" Accept ")])),_:1,__:[12]},8,["disabled"]),a(t(b),{variant:"destructive",onClick:e[2]||(e[2]=()=>t(_)(i.id)),disabled:t(f)},{default:s(()=>e[13]||(e[13]=[r(" Reject ")])),_:1,__:[13]},8,["disabled"])])):$("",!0)])])):t(f)?(k(),T("div",Q," Loading... ")):$("",!0)])]),_:1})],64))}});export{h as default};
