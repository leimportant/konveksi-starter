import{d as L,q as V,o as j,w as q,f as l,g as d,p as s,u as e,Z as E,x as r,k as c,D as x,P as D,y as i,C as k,E as S,F as y,B as h,j as g,K as T,z as A}from"./app-5Im2yDKO.js";import{_ as K}from"./Input.vue_vue_type_script_setup_true_lang-D1xwu6CM.js";import{_ as R,a as H,b as v,c as _,d as Q,e as m}from"./TableRow.vue_vue_type_script_setup_true_lang-CH8UUG8X.js";import{u as Z}from"./useToast-DEJFmVqH.js";import{_ as G}from"./AppLayout.vue_vue_type_script_setup_true_lang-DerYr6w9.js";import{u as J}from"./useModelStore-Dh-4_2D4.js";import{P as O}from"./plus-BvS5-OFz.js";import{S as U}from"./square-pen-dzPwYRzS.js";import{T as W}from"./trash-2-BpH0u3Rk.js";import"./index-DacIMjTM.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-CnjAjBh1.js";const X={class:"px-4 py-4"},Y={class:"mb-6 flex items-center justify-between"},ee={class:"overflow-x-auto rounded-md border border-gray-200 bg-white shadow-sm dark:border-gray-700 dark:bg-gray-900"},te={class:"font-semibold"},se={class:"text-xs text-gray-500 dark:text-gray-400"},ae={key:0,class:"flex flex-col text-xs"},re={key:0},oe={key:1},de={key:0,class:"p-4 text-center text-sm text-gray-500 dark:text-gray-400"},le={class:"mt-4 flex justify-end space-x-2"},ie=["disabled"],ne=["onClick","disabled"],ue=["disabled"],we=L({__name:"ListModel",setup(ce){const w=Z(),o=J(),{models:M,loading:f,currentPage:p,filters:C,lastPage:P}=V(o),N=[{title:"Konveksi",href:"/konveksi"},{title:"List Model",href:"/konveksi/model"}];j(()=>{o.fetchModels()}),q(C,()=>{o.fetchModels()},{deep:!0});const F=n=>{const t=n.target;o.setFilter("search",t.value)},z=async n=>{var t,a;if(confirm("Are you sure you want to delete this model?"))try{await o.deleteModel(n),w.success("Model deleted successfully"),await o.fetchModels()}catch(u){w.error(((a=(t=u==null?void 0:u.response)==null?void 0:t.data)==null?void 0:a.message)??"Failed to delete model")}},B=n=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0,maximumFractionDigits:0}).format(n),I=n=>n?new Date(n).toLocaleDateString("id-ID",{day:"2-digit",month:"long",year:"numeric"}):"-";return(n,t)=>(d(),l(y,null,[s(e(E),{title:"List Model"}),s(G,{breadcrumbs:N},{default:r(()=>[c("div",X,[c("div",Y,[s(e(x),{onClick:t[0]||(t[0]=a=>e(D).visit("/konveksi/model/create")),"aria-label":"Tambah Model Baru",class:"rounded-md bg-indigo-600 py-2 text-white hover:bg-indigo-700 focus:ring-2 focus:ring-indigo-500"},{default:r(()=>[s(e(O),{class:"h-4 w-4"}),t[3]||(t[3]=i(" Tambah "))]),_:1,__:[3]}),s(e(K),{value:e(C).search,debounce:500,placeholder:"Search Model",onInput:F,class:"w-64","aria-label":"Search Model",disabled:e(f)},null,8,["value","disabled"])]),c("div",ee,[s(e(R),{class:"w-full text-sm md:table-auto"},{default:r(()=>[s(e(H),null,{default:r(()=>[s(e(v),{class:"bg-gray-100 dark:bg-gray-800"},{default:r(()=>[s(e(_),{class:"px-3 py-2 text-left"},{default:r(()=>t[4]||(t[4]=[i("Nama Model")])),_:1,__:[4]}),s(e(_),{class:"px-3 py-2"},{default:r(()=>t[5]||(t[5]=[i("Est Harga/Pcs")])),_:1,__:[5]}),s(e(_),{class:"px-3 py-2"},{default:r(()=>t[6]||(t[6]=[i("Qty")])),_:1,__:[6]}),s(e(_),{class:"hidden px-3 py-2 md:table-cell"},{default:r(()=>t[7]||(t[7]=[i("Catatan")])),_:1,__:[7]}),s(e(_),{class:"px-3 py-2 text-right"},{default:r(()=>t[8]||(t[8]=[i("Action")])),_:1,__:[8]})]),_:1})]),_:1}),s(e(Q),null,{default:r(()=>[(d(!0),l(y,null,h(e(M),a=>(d(),S(e(v),{key:a.id,class:"border-b border-gray-100 hover:bg-gray-50 dark:border-gray-800 dark:hover:bg-gray-800"},{default:r(()=>[s(e(m),{class:"px-3 py-2 font-medium text-foreground"},{default:r(()=>[c("div",te,g(a.description),1),c("div",se,"Mulai: "+g(I(a.start_date)),1)]),_:2},1024),s(e(m),{class:"px-3 py-2"},{default:r(()=>[i(g(B(a.estimation_price_pcs)),1)]),_:2},1024),s(e(m),{class:"px-3 py-2"},{default:r(()=>{var u;return[(u=a.sizes)!=null&&u.length?(d(),l("div",ae,[(d(!0),l(y,null,h(a.sizes,(b,$)=>(d(),l("span",{key:$},[i(g(b.size_id)+" "+g(b.variant)+" ("+g(b.qty)+") ",1),$!==a.sizes.length-1?(d(),l("br",re)):k("",!0)]))),128))])):(d(),l("span",oe,"-"))]}),_:2},1024),s(e(m),{class:"hidden px-3 py-2 text-sm text-gray-500 dark:text-gray-400 md:table-cell"},{default:r(()=>[i(g(a.remark||"-"),1)]),_:2},1024),s(e(m),{class:"space-x-1 px-3 py-2 text-right"},{default:r(()=>[s(e(x),{size:"icon",variant:"ghost",class:"hover:bg-gray-100 dark:hover:bg-gray-700",onClick:T(u=>e(D).visit(`/konveksi/model/${a.id}/edit`),["stop"])},{default:r(()=>[s(e(U),{class:"h-4 w-4"})]),_:2},1032,["onClick"]),s(e(x),{size:"icon",variant:"ghost",class:"hover:bg-gray-100 dark:hover:bg-gray-700",onClick:T(u=>z(a.id),["stop"])},{default:r(()=>[s(e(W),{class:"h-4 w-4 text-red-500"})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128)),!e(o).loading&&e(M).length===0?(d(),S(e(v),{key:0},{default:r(()=>[s(e(m),{colspan:"5",class:"px-3 py-6 text-center text-sm text-muted-foreground"},{default:r(()=>t[9]||(t[9]=[i(" Tidak ada model yang ditemukan. ")])),_:1,__:[9]})]),_:1})):k("",!0)]),_:1})]),_:1}),e(f)?(d(),l("div",de,"Memuat data...")):k("",!0)]),c("div",le,[c("button",{onClick:t[1]||(t[1]=(...a)=>e(o).prevPage&&e(o).prevPage(...a)),disabled:e(p)===1||e(f),class:"rounded border border-gray-300 px-3 py-1 text-gray-700 hover:bg-gray-100 disabled:cursor-not-allowed disabled:opacity-50"}," Previous ",8,ie),(d(!0),l(y,null,h(e(P),a=>(d(),l("button",{key:a,onClick:u=>e(o).goToPage(a),class:A(["rounded border px-3 py-1 text-sm",a===e(p)?"border-blue-600 bg-blue-600 text-white":"border-gray-300 text-gray-700 hover:bg-gray-100"]),disabled:e(f)},g(a),11,ne))),128)),c("button",{onClick:t[2]||(t[2]=(...a)=>e(o).nextPage&&e(o).nextPage(...a)),disabled:e(p)===e(P)||e(f),class:"rounded border border-gray-300 px-3 py-1 text-gray-700 hover:bg-gray-100 disabled:cursor-not-allowed disabled:opacity-50"}," Next ",8,ue)])])]),_:1})],64))}});export{we as default};
