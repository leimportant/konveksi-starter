import{d as O,r as b,c as $,e as j,f as u,g as m,p as l,u as d,Z as q,x as v,k as r,K as A,C as S,j as x,D as k,y as N,F as E,P as T}from"./app-0U1VUouX.js";import{_ as D}from"./AppLayout.vue_vue_type_script_setup_true_lang-BUoA2bSc.js";import{_ as w}from"./Input.vue_vue_type_script_setup_true_lang-DRddhaah.js";import{u as F}from"./useCashBalanceStore-CvDl6rS9.js";import{u as P}from"./useToast-DJudyVZB.js";import"./index-zcIcvFws.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-Adv47xyj.js";const U={class:"w-full px-4 py-6"},K={key:0,class:"mt-1 text-sm text-red-600"},Z={key:0,class:"mt-1 text-sm text-red-600"},z={class:"flex flex-col sm:flex-row justify-end gap-2 sm:gap-4 pt-4"},G={key:0},H={key:1},ae=O({__name:"OpenShift",setup(I){const B=F(),f=P(),s=b({shift_number:1,opening_balance:0}),a=b({}),n=b(!1),_=$(()=>Object.keys(a.value).length>0),h=()=>{s.value.shift_number?s.value.shift_number<1?a.value.shift_number="Shift number must be at least 1":delete a.value.shift_number:a.value.shift_number="Shift number is required"},g=()=>{s.value.opening_balance===void 0||s.value.opening_balance===null?a.value.opening_balance="Opening balance is required":s.value.opening_balance<0?a.value.opening_balance="Opening balance cannot be negative":delete a.value.opening_balance},C=async()=>{var i,e,p,t,y;if(h(),g(),!_.value){n.value=!0;try{await B.createCashBalance(s.value),f.success("Shift opened successfully"),T.visit("/pos")}catch(o){if(console.error("Shift creation error:",o),((i=o.response)==null?void 0:i.status)===422&&((p=(e=o.response)==null?void 0:e.data)!=null&&p.errors)){a.value=o.response.data.errors;for(const c in a.value)(Array.isArray(a.value[c])?a.value[c]:[a.value[c]]).forEach(M=>{f.error(M)})}else(y=(t=o.response)==null?void 0:t.data)!=null&&y.message?f.error(o.response.data.message):f.error("Terjadi kesalahan saat menyimpan data")}finally{n.value=!1}}},V=[{title:"Cash Management",href:route("cash-balance.index")},{title:"Open New Shift",href:route("cash-balance.openshift")}];return(i,e)=>{const p=j("Spinner");return m(),u(E,null,[l(d(q),{title:"Open New Shift"}),l(D,{breadcrumbs:V},{default:v(()=>[r("div",U,[r("form",{onSubmit:A(C,["prevent"]),class:"space-y-4 sm:space-y-6"},[r("div",null,[e[3]||(e[3]=r("label",{for:"shiftNumber",class:"block text-sm font-medium mb-1"}," Shift Number ",-1)),l(d(w),{id:"shiftNumber",modelValue:s.value.shift_number,"onUpdate:modelValue":e[0]||(e[0]=t=>s.value.shift_number=t),modelModifiers:{number:!0},type:"number",min:"1",required:"",class:"w-full",disabled:n.value,onBlur:h},null,8,["modelValue","disabled"]),a.value.shift_number?(m(),u("p",K,x(a.value.shift_number),1)):S("",!0)]),r("div",null,[e[4]||(e[4]=r("label",{for:"openingBalance",class:"block text-sm font-medium mb-1"}," Saldo Awal ",-1)),l(d(w),{id:"openingBalance",modelValue:s.value.opening_balance,"onUpdate:modelValue":e[1]||(e[1]=t=>s.value.opening_balance=t),modelModifiers:{number:!0},type:"number",min:"0",step:"0.01",class:"w-full",required:"",disabled:n.value,onBlur:g},null,8,["modelValue","disabled"]),a.value.opening_balance?(m(),u("p",Z,x(a.value.opening_balance),1)):S("",!0)]),r("div",z,[l(d(k),{type:"button",variant:"outline",disabled:n.value,onClick:e[2]||(e[2]=t=>i.$inertia.visit(i.route("cash-balance.index")))},{default:v(()=>e[5]||(e[5]=[N(" Cancel ")])),_:1,__:[5]},8,["disabled"]),l(d(k),{type:"submit",disabled:n.value||_.value},{default:v(()=>[n.value?(m(),u("span",G,[l(p,{class:"mr-2"}),e[6]||(e[6]=N(" Processing... "))])):(m(),u("span",H,"Mulai Shift"))]),_:1},8,["disabled"])])],32)])]),_:1})],64)}}});export{ae as default};
