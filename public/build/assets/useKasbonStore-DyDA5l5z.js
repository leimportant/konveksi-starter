import{R as p,b as o}from"./app-DqmlJ2ej.js";const h=p("kasbon",{state:()=>({kasbonList:[],mutasiList:[],summary:[],pagination:{current_page:1,per_page:50,total:0,last_page:1},loading:!1,error:null}),actions:{async fetchKasbon(e=1,s=50,t={}){var a,i;this.loading=!0;try{const n={page:e,per_page:s,search:t.search,status:t.status},r=await o.get("/api/kasbon",{params:n});this.kasbonList=r.data.data??[],this.pagination.current_page=r.data.current_page??1,this.pagination.per_page=r.data.per_page??50,this.pagination.total=r.data.total??0,this.pagination.last_page=r.data.last_page??1}catch(n){this.error=((i=(a=n.response)==null?void 0:a.data)==null?void 0:i.message)??n.message}finally{this.loading=!1}},async storeKasbon(e){var s,t;this.loading=!0;try{await o.post("/api/kasbon/store",e),await this.fetchKasbon()}catch(a){throw this.error=((t=(s=a.response)==null?void 0:s.data)==null?void 0:t.message)??a.message,a}finally{this.loading=!1}},async updateKasbon(e,s){var t,a;this.loading=!0;try{await o.put(`/api/kasbon/${e}`,s),await this.fetchKasbon()}catch(i){throw this.error=((a=(t=i.response)==null?void 0:t.data)==null?void 0:a.message)??i.message,i}finally{this.loading=!1}},async deleteKasbon(e){var s,t;if(confirm("Yakin ingin menghapus kasbon ini?")){this.loading=!0;try{await o.delete(`/api/kasbon/${e}`),await this.fetchKasbon()}catch(a){this.error=((t=(s=a.response)==null?void 0:s.data)==null?void 0:t.message)??a.message}finally{this.loading=!1}}},async approveKasbon(e){var s,t;this.loading=!0;try{await o.put(`/api/kasbon/${e}/approve`),await this.fetchKasbon()}catch(a){throw this.error=((t=(s=a.response)==null?void 0:s.data)==null?void 0:t.message)??a.message,a}finally{this.loading=!1}},async rejectKasbon(e,s){var t,a;this.loading=!0;try{await o.put(`/api/kasbon/${e}/reject`,{remark:s}),await this.fetchKasbon()}catch(i){throw this.error=((a=(t=i.response)==null?void 0:t.data)==null?void 0:a.message)??i.message,i}finally{this.loading=!1}},async fetchMutasi(e=1,s=50,t={}){var a,i;this.loading=!0;try{const n={page:e,per_page:s,...t},r=await o.get("/api/mutasi",{params:n});this.mutasiList=r.data.data??[],this.pagination.current_page=r.data.current_page??1,this.pagination.per_page=r.data.per_page??50,this.pagination.total=r.data.total??0,this.pagination.last_page=r.data.last_page??1}catch(n){throw this.error=((i=(a=n.response)==null?void 0:a.data)==null?void 0:i.message)??n.message,n}finally{this.loading=!1}}}});export{h as u};
