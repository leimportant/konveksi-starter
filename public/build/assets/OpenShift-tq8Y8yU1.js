import{d as V,r as c,c as O,e as M,f as u,g as m,p as r,u as d,Z as $,x as b,k as o,R as j,C as y,j as S,D as x,y as k,F as q,N as T}from"./app-CCxV7F73.js";import{_ as D}from"./AppLayout.vue_vue_type_script_setup_true_lang-CIoevcAO.js";import{_ as N}from"./Input.vue_vue_type_script_setup_true_lang-oa_Vo4gJ.js";import{u as E}from"./useCashBalanceStore-B97McFTQ.js";import{u as F}from"./useToast-BsW2pVCa.js";import"./index-WbVS-gjC.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-DsghXOI_.js";const U={class:"w-full px-4 py-6"},A={key:0,class:"mt-1 text-sm text-red-600"},P={key:0,class:"mt-1 text-sm text-red-600"},R={class:"flex flex-col sm:flex-row justify-end gap-2 sm:gap-4 pt-4"},Z={key:0},z={key:1},X=V({__name:"OpenShift",setup(G){const w=E(),f=F(),s=c({shift_number:1,opening_balance:0}),a=c({}),n=c(!1),v=O(()=>Object.keys(a.value).length>0),_=()=>{s.value.shift_number?s.value.shift_number<1?a.value.shift_number="Shift number must be at least 1":delete a.value.shift_number:a.value.shift_number="Shift number is required"},h=()=>{s.value.opening_balance===void 0||s.value.opening_balance===null?a.value.opening_balance="Opening balance is required":s.value.opening_balance<0?a.value.opening_balance="Opening balance cannot be negative":delete a.value.opening_balance},B=async()=>{var i,e,p,t,g;if(_(),h(),!v.value){n.value=!0;try{await w.createCashBalance(s.value),f.success("Shift opened successfully"),T.visit("/pos")}catch(l){console.error("Shift creation error:",l),((i=l.response)==null?void 0:i.status)===422&&((p=(e=l.response)==null?void 0:e.data)!=null&&p.errors)?(a.value=l.response.data.errors,f.error(l.response.data.message)):(g=(t=l.response)==null?void 0:t.data)!=null&&g.message?f.error(l.response.data.message):f.error("Terjadi kesalahan saat menyimpan data")}finally{n.value=!1}}},C=[{title:"Cash Management",href:route("cash-balance.index")},{title:"Open New Shift",href:route("cash-balance.openshift")}];return(i,e)=>{const p=M("Spinner");return m(),u(q,null,[r(d($),{title:"Open New Shift"}),r(D,{breadcrumbs:C},{default:b(()=>[o("div",U,[o("form",{onSubmit:j(B,["prevent"]),class:"space-y-4 sm:space-y-6"},[o("div",null,[e[3]||(e[3]=o("label",{for:"shiftNumber",class:"block text-sm font-medium mb-1"}," Shift Number ",-1)),r(d(N),{id:"shiftNumber",modelValue:s.value.shift_number,"onUpdate:modelValue":e[0]||(e[0]=t=>s.value.shift_number=t),modelModifiers:{number:!0},type:"number",min:"1",required:"",class:"w-full",disabled:n.value,onBlur:_},null,8,["modelValue","disabled"]),a.value.shift_number?(m(),u("p",A,S(a.value.shift_number),1)):y("",!0)]),o("div",null,[e[4]||(e[4]=o("label",{for:"openingBalance",class:"block text-sm font-medium mb-1"}," Saldo Awal ",-1)),r(d(N),{id:"openingBalance",modelValue:s.value.opening_balance,"onUpdate:modelValue":e[1]||(e[1]=t=>s.value.opening_balance=t),modelModifiers:{number:!0},type:"number",min:"0",step:"0.01",class:"w-full",required:"",disabled:n.value,onBlur:h},null,8,["modelValue","disabled"]),a.value.opening_balance?(m(),u("p",P,S(a.value.opening_balance),1)):y("",!0)]),o("div",R,[r(d(x),{type:"button",variant:"outline",disabled:n.value,onClick:e[2]||(e[2]=t=>i.$inertia.visit(i.route("cash-balance.index")))},{default:b(()=>e[5]||(e[5]=[k(" Cancel ")])),_:1,__:[5]},8,["disabled"]),r(d(x),{type:"submit",disabled:n.value||v.value},{default:b(()=>[n.value?(m(),u("span",Z,[r(p,{class:"mr-2"}),e[6]||(e[6]=k(" Processing... "))])):(m(),u("span",z,"Mulai Shift"))]),_:1},8,["disabled"])])],32)])]),_:1})],64)}}});export{X as default};
