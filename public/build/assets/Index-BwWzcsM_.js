import{_ as q}from"./AppLayout.vue_vue_type_script_setup_true_lang-B9PZ1YTo.js";import{d as R,q as Y,r as S,c as H,o as L,f as g,g as m,p as s,u as e,Z as U,x as r,k as d,D as x,y as n,S as Z,F as P,B as h,E as G,j as u,z as k}from"./app-BwnCji69.js";import{_ as J,a as K,b as D,c,d as O,e as f}from"./TableRow.vue_vue_type_script_setup_true_lang-DSDsZzXU.js";import{u as Q}from"./useToast-D9UZrMXp.js";import{u as W}from"./useProductPriceStore-CAriKuSe.js";import{d as X}from"./debounce-BcZQbp_F.js";import{_ as tt}from"./Input.vue_vue_type_script_setup_true_lang-vogTXVS2.js";import{P as et}from"./plus-BLewWUpE.js";import{S as at}from"./square-pen-OBU-5Y3N.js";import{T as st}from"./trash-2-015UjRxx.js";import"./index-rHXr64hP.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-ULnn2JbI.js";const ot={class:"px-4 py-4"},rt={class:"flex justify-between items-center gap-2 mb-2"},nt={class:"rounded-md border overflow-x-auto"},lt={class:"flex justify-end mt-4 space-x-2"},it=["disabled"],dt=["onClick"],ut=["disabled"],C=10,St=R({__name:"Index",setup(ct){const $=Q(),_=W(),{productPrices:F,total:N,filterName:p,loading:I}=Y(_),T=[{title:"Product Prices",href:"/product-prices"}],i=S(1),w=S(0),b=H(()=>Math.max(Math.ceil(w.value/C),1)),v=async o=>{await _.fetchProductPrice(o,C),w.value=N.value||0,i.value=o},A=X((o,t)=>{_.setFilter(o,t)},400),M=o=>{const t=o.target;A("name",t.value)};L(async()=>{await v(i.value)});const y=async o=>{o<1||o>b.value||await v(o)},V=()=>y(i.value+1),B=()=>y(i.value-1),z=o=>{if(!o)return"N/A";const t=new Date(o);if(isNaN(t.getTime())){const a=new Date;return`${String(a.getDate()).padStart(2,"0")}/${String(a.getMonth()+1).padStart(2,"0")}/${a.getFullYear()} ${String(a.getHours()).padStart(2,"0")}:${String(a.getMinutes()).padStart(2,"0")}`}return`${String(t.getDate()).padStart(2,"0")}/${String(t.getMonth()+1).padStart(2,"0")}/${t.getFullYear()}`},j=o=>{const t=typeof o=="string"?parseFloat(o):o;return new Intl.NumberFormat("id-ID",{minimumFractionDigits:0,maximumFractionDigits:0}).format(t||0)},E=async o=>{var t,a;if(confirm("Are you sure?"))try{await _.deleteProductPrice(o),$.success("Deleted"),await v(i.value)}catch(l){$.error(((a=(t=l==null?void 0:l.response)==null?void 0:t.data)==null?void 0:a.message)||"Failed to delete")}};return(o,t)=>(m(),g(P,null,[s(e(U),{title:"Product Prices"}),s(q,{breadcrumbs:T},{default:r(()=>[d("div",ot,[d("div",rt,[s(e(x),{onClick:t[0]||(t[0]=a=>o.$inertia.visit("/product-prices/create")),class:"bg-indigo-600 text-white h-10 py-2 rounded-md hover:bg-indigo-700 focus:ring-2 focus:ring-indigo-500"},{default:r(()=>[s(e(et),{class:"h-4 w-4"}),t[2]||(t[2]=n(" Add "))]),_:1,__:[2]}),s(e(tt),{modelValue:e(p),"onUpdate:modelValue":t[1]||(t[1]=a=>Z(p)?p.value=a:null),placeholder:"Search",onInput:M,class:"w-64","aria-label":"Search",disabled:e(I)},null,8,["modelValue","disabled"])]),d("div",nt,[s(e(J),null,{default:r(()=>[s(e(K),null,{default:r(()=>[s(e(D),{class:"bg-gray-100"},{default:r(()=>[s(e(c),null,{default:r(()=>t[3]||(t[3]=[n("ID")])),_:1,__:[3]}),s(e(c),null,{default:r(()=>t[4]||(t[4]=[n("Product")])),_:1,__:[4]}),s(e(c),null,{default:r(()=>t[5]||(t[5]=[n("Cost Price")])),_:1,__:[5]}),s(e(c),null,{default:r(()=>t[6]||(t[6]=[n("Effective Date")])),_:1,__:[6]}),s(e(c),null,{default:r(()=>t[7]||(t[7]=[n("Status")])),_:1,__:[7]}),s(e(c),{class:"w-24"},{default:r(()=>t[8]||(t[8]=[n("Actions")])),_:1,__:[8]})]),_:1})]),_:1}),s(e(O),null,{default:r(()=>[(m(!0),g(P,null,h(e(F),a=>(m(),G(e(D),{key:a.id},{default:r(()=>[s(e(f),null,{default:r(()=>[n(u(a.id),1)]),_:2},1024),s(e(f),null,{default:r(()=>{var l;return[n(u(((l=a.product)==null?void 0:l.name)||"N/A"),1)]}),_:2},1024),s(e(f),null,{default:r(()=>[n(u(j(a.cost_price)),1)]),_:2},1024),s(e(f),null,{default:r(()=>[n(u(z(a.effective_date)),1)]),_:2},1024),s(e(f),null,{default:r(()=>[d("span",{class:k(a.is_active?"text-green-600":"text-red-600")},u(a.is_active?"Active":"Inactive"),3)]),_:2},1024),s(e(f),{class:"flex gap-2"},{default:r(()=>[s(e(x),{variant:"ghost",size:"icon",onClick:l=>o.$inertia.visit(`/product-prices/${a.id}/edit`)},{default:r(()=>[s(e(at),{class:"h-4 w-4"})]),_:2},1032,["onClick"]),s(e(x),{variant:"ghost",size:"icon",onClick:l=>E(a.id)},{default:r(()=>[s(e(st),{class:"h-4 w-4"})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),d("div",lt,[d("button",{onClick:B,disabled:i.value===1,class:"px-3 py-1 rounded border border-gray-300 text-gray-700 hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed"}," Previous ",8,it),(m(!0),g(P,null,h(b.value,a=>(m(),g("button",{key:a,onClick:l=>y(a),class:k(["px-3 py-1 rounded border text-sm",a===i.value?"bg-blue-600 border-blue-600 text-white":"border-gray-300 text-gray-700 hover:bg-gray-100"])},u(a),11,dt))),128)),d("button",{onClick:V,disabled:i.value===b.value,class:"px-3 py-1 rounded border border-gray-300 text-gray-700 hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed"}," Next ",8,ut)])])]),_:1})],64))}});export{St as default};
