import{d as Ee,r as j,c as U,o as $e,f as g,g as u,p as se,C as B,u as ee,Z as Ie,x as le,k as n,l as de,m as ue,F as H,B as te,y as W,j as x,z as ie,R as pe,E as ze,b as Se,N as Be,_ as De}from"./app-DVcE8dC8.js";import{u as qe}from"./useToast-C6n08DS1.js";import{_ as Pe}from"./AppLayout.vue_vue_type_script_setup_true_lang-DmVi_qmP.js";import{d as ge}from"./debounce-BfkDp9Vp.js";import{u as Me}from"./useCartStore-CymuiuAR.js";import{e as je,c as Fe,m as $,b as Te,s as fe,d as Ae,f as me,a as He,S as Ne}from"./swiper-CyarTQmH.js";import"./index-S-BFqM3K.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-BchqU6hv.js";function ve(F,e,w,f){return F.params.createElements&&Object.keys(f).forEach(_=>{if(!w[_]&&w.auto===!0){let h=je(F.el,`.${f[_]}`)[0];h||(h=Fe("div",f[_]),h.className=f[_],F.el.append(h)),w[_]=h,e[_]=h}}),w}function Oe(F){let{swiper:e,extendParams:w,on:f,emit:_}=F;w({navigation:{nextEl:null,prevEl:null,hideOnClick:!1,disabledClass:"swiper-button-disabled",hiddenClass:"swiper-button-hidden",lockClass:"swiper-button-lock",navigationDisabledClass:"swiper-navigation-disabled"}}),e.navigation={nextEl:null,prevEl:null};function h(o){let c;return o&&typeof o=="string"&&e.isElement&&(c=e.el.querySelector(o)||e.hostEl.querySelector(o),c)?c:(o&&(typeof o=="string"&&(c=[...document.querySelectorAll(o)]),e.params.uniqueNavElements&&typeof o=="string"&&c&&c.length>1&&e.el.querySelectorAll(o).length===1?c=e.el.querySelector(o):c&&c.length===1&&(c=c[0])),o&&!c?o:c)}function M(o,c){const m=e.params.navigation;o=$(o),o.forEach(v=>{v&&(v.classList[c?"add":"remove"](...m.disabledClass.split(" ")),v.tagName==="BUTTON"&&(v.disabled=c),e.params.watchOverflow&&e.enabled&&v.classList[e.isLocked?"add":"remove"](m.lockClass))})}function D(){const{nextEl:o,prevEl:c}=e.navigation;if(e.params.loop){M(c,!1),M(o,!1);return}M(c,e.isBeginning&&!e.params.rewind),M(o,e.isEnd&&!e.params.rewind)}function q(o){o.preventDefault(),!(e.isBeginning&&!e.params.loop&&!e.params.rewind)&&(e.slidePrev(),_("navigationPrev"))}function z(o){o.preventDefault(),!(e.isEnd&&!e.params.loop&&!e.params.rewind)&&(e.slideNext(),_("navigationNext"))}function V(){const o=e.params.navigation;if(e.params.navigation=ve(e,e.originalParams.navigation,e.params.navigation,{nextEl:"swiper-button-next",prevEl:"swiper-button-prev"}),!(o.nextEl||o.prevEl))return;let c=h(o.nextEl),m=h(o.prevEl);Object.assign(e.navigation,{nextEl:c,prevEl:m}),c=$(c),m=$(m);const v=(t,s)=>{t&&t.addEventListener("click",s==="next"?z:q),!e.enabled&&t&&t.classList.add(...o.lockClass.split(" "))};c.forEach(t=>v(t,"next")),m.forEach(t=>v(t,"prev"))}function A(){let{nextEl:o,prevEl:c}=e.navigation;o=$(o),c=$(c);const m=(v,t)=>{v.removeEventListener("click",t==="next"?z:q),v.classList.remove(...e.params.navigation.disabledClass.split(" "))};o.forEach(v=>m(v,"next")),c.forEach(v=>m(v,"prev"))}f("init",()=>{e.params.navigation.enabled===!1?L():(V(),D())}),f("toEdge fromEdge lock unlock",()=>{D()}),f("destroy",()=>{A()}),f("enable disable",()=>{let{nextEl:o,prevEl:c}=e.navigation;if(o=$(o),c=$(c),e.enabled){D();return}[...o,...c].filter(m=>!!m).forEach(m=>m.classList.add(e.params.navigation.lockClass))}),f("click",(o,c)=>{let{nextEl:m,prevEl:v}=e.navigation;m=$(m),v=$(v);const t=c.target;let s=v.includes(t)||m.includes(t);if(e.isElement&&!s){const l=c.path||c.composedPath&&c.composedPath();l&&(s=l.find(p=>m.includes(p)||v.includes(p)))}if(e.params.navigation.hideOnClick&&!s){if(e.pagination&&e.params.pagination&&e.params.pagination.clickable&&(e.pagination.el===t||e.pagination.el.contains(t)))return;let l;m.length?l=m[0].classList.contains(e.params.navigation.hiddenClass):v.length&&(l=v[0].classList.contains(e.params.navigation.hiddenClass)),_(l===!0?"navigationShow":"navigationHide"),[...m,...v].filter(p=>!!p).forEach(p=>p.classList.toggle(e.params.navigation.hiddenClass))}});const d=()=>{e.el.classList.remove(...e.params.navigation.navigationDisabledClass.split(" ")),V(),D()},L=()=>{e.el.classList.add(...e.params.navigation.navigationDisabledClass.split(" ")),A()};Object.assign(e.navigation,{enable:d,disable:L,update:D,init:V,destroy:A})}function ae(F){return F===void 0&&(F=""),`.${F.trim().replace(/([\.:!+\/])/g,"\\$1").replace(/ /g,".")}`}function Ve(F){let{swiper:e,extendParams:w,on:f,emit:_}=F;const h="swiper-pagination";w({pagination:{el:null,bulletElement:"span",clickable:!1,hideOnClick:!1,renderBullet:null,renderProgressbar:null,renderFraction:null,renderCustom:null,progressbarOpposite:!1,type:"bullets",dynamicBullets:!1,dynamicMainBullets:1,formatFractionCurrent:t=>t,formatFractionTotal:t=>t,bulletClass:`${h}-bullet`,bulletActiveClass:`${h}-bullet-active`,modifierClass:`${h}-`,currentClass:`${h}-current`,totalClass:`${h}-total`,hiddenClass:`${h}-hidden`,progressbarFillClass:`${h}-progressbar-fill`,progressbarOppositeClass:`${h}-progressbar-opposite`,clickableClass:`${h}-clickable`,lockClass:`${h}-lock`,horizontalClass:`${h}-horizontal`,verticalClass:`${h}-vertical`,paginationDisabledClass:`${h}-disabled`}}),e.pagination={el:null,bullets:[]};let M,D=0;function q(){return!e.params.pagination.el||!e.pagination.el||Array.isArray(e.pagination.el)&&e.pagination.el.length===0}function z(t,s){const{bulletActiveClass:l}=e.params.pagination;t&&(t=t[`${s==="prev"?"previous":"next"}ElementSibling`],t&&(t.classList.add(`${l}-${s}`),t=t[`${s==="prev"?"previous":"next"}ElementSibling`],t&&t.classList.add(`${l}-${s}-${s}`)))}function V(t,s,l){if(t=t%l,s=s%l,s===t+1)return"next";if(s===t-1)return"previous"}function A(t){const s=t.target.closest(ae(e.params.pagination.bulletClass));if(!s)return;t.preventDefault();const l=me(s)*e.params.slidesPerGroup;if(e.params.loop){if(e.realIndex===l)return;const p=V(e.realIndex,l,e.slides.length);p==="next"?e.slideNext():p==="previous"?e.slidePrev():e.slideToLoop(l)}else e.slideTo(l)}function d(){const t=e.rtl,s=e.params.pagination;if(q())return;let l=e.pagination.el;l=$(l);let p,S;const y=e.virtual&&e.params.virtual.enabled?e.virtual.slides.length:e.slides.length,G=e.params.loop?Math.ceil(y/e.params.slidesPerGroup):e.snapGrid.length;if(e.params.loop?(S=e.previousRealIndex||0,p=e.params.slidesPerGroup>1?Math.floor(e.realIndex/e.params.slidesPerGroup):e.realIndex):typeof e.snapIndex<"u"?(p=e.snapIndex,S=e.previousSnapIndex):(S=e.previousIndex||0,p=e.activeIndex||0),s.type==="bullets"&&e.pagination.bullets&&e.pagination.bullets.length>0){const b=e.pagination.bullets;let T,E,N;if(s.dynamicBullets&&(M=Ae(b[0],e.isHorizontal()?"width":"height"),l.forEach(C=>{C.style[e.isHorizontal()?"width":"height"]=`${M*(s.dynamicMainBullets+4)}px`}),s.dynamicMainBullets>1&&S!==void 0&&(D+=p-(S||0),D>s.dynamicMainBullets-1?D=s.dynamicMainBullets-1:D<0&&(D=0)),T=Math.max(p-D,0),E=T+(Math.min(b.length,s.dynamicMainBullets)-1),N=(E+T)/2),b.forEach(C=>{const k=[...["","-next","-next-next","-prev","-prev-prev","-main"].map(I=>`${s.bulletActiveClass}${I}`)].map(I=>typeof I=="string"&&I.includes(" ")?I.split(" "):I).flat();C.classList.remove(...k)}),l.length>1)b.forEach(C=>{const k=me(C);k===p?C.classList.add(...s.bulletActiveClass.split(" ")):e.isElement&&C.setAttribute("part","bullet"),s.dynamicBullets&&(k>=T&&k<=E&&C.classList.add(...`${s.bulletActiveClass}-main`.split(" ")),k===T&&z(C,"prev"),k===E&&z(C,"next"))});else{const C=b[p];if(C&&C.classList.add(...s.bulletActiveClass.split(" ")),e.isElement&&b.forEach((k,I)=>{k.setAttribute("part",I===p?"bullet-active":"bullet")}),s.dynamicBullets){const k=b[T],I=b[E];for(let O=T;O<=E;O+=1)b[O]&&b[O].classList.add(...`${s.bulletActiveClass}-main`.split(" "));z(k,"prev"),z(I,"next")}}if(s.dynamicBullets){const C=Math.min(b.length,s.dynamicMainBullets+4),k=(M*C-M)/2-N*M,I=t?"right":"left";b.forEach(O=>{O.style[e.isHorizontal()?I:"top"]=`${k}px`})}}l.forEach((b,T)=>{if(s.type==="fraction"&&(b.querySelectorAll(ae(s.currentClass)).forEach(E=>{E.textContent=s.formatFractionCurrent(p+1)}),b.querySelectorAll(ae(s.totalClass)).forEach(E=>{E.textContent=s.formatFractionTotal(G)})),s.type==="progressbar"){let E;s.progressbarOpposite?E=e.isHorizontal()?"vertical":"horizontal":E=e.isHorizontal()?"horizontal":"vertical";const N=(p+1)/G;let C=1,k=1;E==="horizontal"?C=N:k=N,b.querySelectorAll(ae(s.progressbarFillClass)).forEach(I=>{I.style.transform=`translate3d(0,0,0) scaleX(${C}) scaleY(${k})`,I.style.transitionDuration=`${e.params.speed}ms`})}s.type==="custom"&&s.renderCustom?(fe(b,s.renderCustom(e,p+1,G)),T===0&&_("paginationRender",b)):(T===0&&_("paginationRender",b),_("paginationUpdate",b)),e.params.watchOverflow&&e.enabled&&b.classList[e.isLocked?"add":"remove"](s.lockClass)})}function L(){const t=e.params.pagination;if(q())return;const s=e.virtual&&e.params.virtual.enabled?e.virtual.slides.length:e.grid&&e.params.grid.rows>1?e.slides.length/Math.ceil(e.params.grid.rows):e.slides.length;let l=e.pagination.el;l=$(l);let p="";if(t.type==="bullets"){let S=e.params.loop?Math.ceil(s/e.params.slidesPerGroup):e.snapGrid.length;e.params.freeMode&&e.params.freeMode.enabled&&S>s&&(S=s);for(let y=0;y<S;y+=1)t.renderBullet?p+=t.renderBullet.call(e,y,t.bulletClass):p+=`<${t.bulletElement} ${e.isElement?'part="bullet"':""} class="${t.bulletClass}"></${t.bulletElement}>`}t.type==="fraction"&&(t.renderFraction?p=t.renderFraction.call(e,t.currentClass,t.totalClass):p=`<span class="${t.currentClass}"></span> / <span class="${t.totalClass}"></span>`),t.type==="progressbar"&&(t.renderProgressbar?p=t.renderProgressbar.call(e,t.progressbarFillClass):p=`<span class="${t.progressbarFillClass}"></span>`),e.pagination.bullets=[],l.forEach(S=>{t.type!=="custom"&&fe(S,p||""),t.type==="bullets"&&e.pagination.bullets.push(...S.querySelectorAll(ae(t.bulletClass)))}),t.type!=="custom"&&_("paginationRender",l[0])}function o(){e.params.pagination=ve(e,e.originalParams.pagination,e.params.pagination,{el:"swiper-pagination"});const t=e.params.pagination;if(!t.el)return;let s;typeof t.el=="string"&&e.isElement&&(s=e.el.querySelector(t.el)),!s&&typeof t.el=="string"&&(s=[...document.querySelectorAll(t.el)]),s||(s=t.el),!(!s||s.length===0)&&(e.params.uniqueNavElements&&typeof t.el=="string"&&Array.isArray(s)&&s.length>1&&(s=[...e.el.querySelectorAll(t.el)],s.length>1&&(s=s.find(l=>Te(l,".swiper")[0]===e.el))),Array.isArray(s)&&s.length===1&&(s=s[0]),Object.assign(e.pagination,{el:s}),s=$(s),s.forEach(l=>{t.type==="bullets"&&t.clickable&&l.classList.add(...(t.clickableClass||"").split(" ")),l.classList.add(t.modifierClass+t.type),l.classList.add(e.isHorizontal()?t.horizontalClass:t.verticalClass),t.type==="bullets"&&t.dynamicBullets&&(l.classList.add(`${t.modifierClass}${t.type}-dynamic`),D=0,t.dynamicMainBullets<1&&(t.dynamicMainBullets=1)),t.type==="progressbar"&&t.progressbarOpposite&&l.classList.add(t.progressbarOppositeClass),t.clickable&&l.addEventListener("click",A),e.enabled||l.classList.add(t.lockClass)}))}function c(){const t=e.params.pagination;if(q())return;let s=e.pagination.el;s&&(s=$(s),s.forEach(l=>{l.classList.remove(t.hiddenClass),l.classList.remove(t.modifierClass+t.type),l.classList.remove(e.isHorizontal()?t.horizontalClass:t.verticalClass),t.clickable&&(l.classList.remove(...(t.clickableClass||"").split(" ")),l.removeEventListener("click",A))})),e.pagination.bullets&&e.pagination.bullets.forEach(l=>l.classList.remove(...t.bulletActiveClass.split(" ")))}f("changeDirection",()=>{if(!e.pagination||!e.pagination.el)return;const t=e.params.pagination;let{el:s}=e.pagination;s=$(s),s.forEach(l=>{l.classList.remove(t.horizontalClass,t.verticalClass),l.classList.add(e.isHorizontal()?t.horizontalClass:t.verticalClass)})}),f("init",()=>{e.params.pagination.enabled===!1?v():(o(),L(),d())}),f("activeIndexChange",()=>{typeof e.snapIndex>"u"&&d()}),f("snapIndexChange",()=>{d()}),f("snapGridLengthChange",()=>{L(),d()}),f("destroy",()=>{c()}),f("enable disable",()=>{let{el:t}=e.pagination;t&&(t=$(t),t.forEach(s=>s.classList[e.enabled?"remove":"add"](e.params.pagination.lockClass)))}),f("lock unlock",()=>{d()}),f("click",(t,s)=>{const l=s.target,p=$(e.pagination.el);if(e.params.pagination.el&&e.params.pagination.hideOnClick&&p&&p.length>0&&!l.classList.contains(e.params.pagination.bulletClass)){if(e.navigation&&(e.navigation.nextEl&&l===e.navigation.nextEl||e.navigation.prevEl&&l===e.navigation.prevEl))return;const S=p[0].classList.contains(e.params.pagination.hiddenClass);_(S===!0?"paginationShow":"paginationHide"),p.forEach(y=>y.classList.toggle(e.params.pagination.hiddenClass))}});const m=()=>{e.el.classList.remove(e.params.pagination.paginationDisabledClass);let{el:t}=e.pagination;t&&(t=$(t),t.forEach(s=>s.classList.remove(e.params.pagination.paginationDisabledClass))),o(),L(),d()},v=()=>{e.el.classList.add(e.params.pagination.paginationDisabledClass);let{el:t}=e.pagination;t&&(t=$(t),t.forEach(s=>s.classList.add(e.params.pagination.paginationDisabledClass))),c()};Object.assign(e.pagination,{enable:m,disable:v,render:L,update:d,init:o,destroy:c})}const Ge={class:"flex flex-col md:col-span-4 lg:col-span-4"},Re={class:"mb-2 flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between"},Ue={class:"w-full space-y-4 bg-white p-4"},Qe={class:"mb-4 flex flex-col gap-2 px-2 sm:flex-row sm:items-center sm:justify-between"},Ke={class:"grid grid-cols-2 gap-1 sm:grid-cols-5 xl:grid-cols-4"},We=["onClick","title"],Xe={class:"mb-2 h-24 w-full"},Ye=["src"],Je={key:1,class:"flex h-full w-full items-center justify-center rounded-lg bg-gray-200 text-xs text-gray-400"},Ze={class:"justify-between truncate text-sm font-semibold text-gray-900"},et={key:0,class:"ml-1 rounded bg-orange-500 px-2 py-0.5 text-[14px] font-bold text-white md:text-xs"},tt={class:"mt-1 text-sm"},at={class:"text-xs text-gray-400 line-through"},st={class:"text-xs text-green-500"},lt={key:1,class:"font-semibold text-gray-700"},it={class:"grid min-h-screen gap-8 overflow-x-hidden bg-white p-2 md:grid-cols-[1fr_400px]"},nt={class:"absolute right-8 top-5 z-50 hidden md:block"},rt={key:0,class:"absolute -right-1 -top-1 flex h-5 w-5 items-center justify-center rounded-full bg-red-500 text-xs text-white"},ot={class:"fixed right-8 top-5 z-50 block md:hidden"},ct={key:0,class:"absolute -right-1 -top-1 flex h-5 w-5 items-center justify-center rounded-full bg-red-500 text-xs text-white"},dt={key:0,class:"mt-10 text-center text-gray-400"},ut=["src"],pt={class:"min-w-0 flex-1",style:{overflow:"hidden"}},gt={class:"truncate text-sm font-semibold text-gray-800 dark:text-gray-100"},ft={class:"text-xs text-gray-500"},mt={class:"text-xs text-gray-800 dark:text-gray-200"},vt={class:"text-xs text-gray-800 dark:text-gray-200"},ht={class:"text-xs text-gray-800 dark:text-gray-200"},yt={class:"flex items-center space-x-1"},bt=["onClick","disabled"],xt={class:"w-8 text-center text-sm text-gray-800 dark:text-gray-100"},_t=["onClick"],Ct=["onClick"],kt={class:"px-4 py-4 border-t border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-900"},wt={class:"text-sm font-semibold"},Lt={class:"text-sm font-semibold"},Et={class:"relative flex max-h-[90vh] w-full max-w-sm flex-col rounded-xl bg-white sm:max-w-md sm:p-0 md:max-w-lg lg:max-w-xl"},$t={class:"flex-1 overflow-y-auto p-4 sm:p-6"},It={key:0},zt={key:0},St=["src","alt","onClick"],Bt=["src"],Dt={key:1,class:"mb-4 h-40 w-full rounded-lg sm:h-48 md:h-60"},qt=["src"],Pt={key:2,class:"mb-4 flex h-40 w-full items-center justify-center rounded-lg bg-gray-200 text-xs text-gray-400 sm:h-48 md:h-60"},Mt={class:"mb-2 text-lg font-semibold text-gray-500 sm:text-xl"},jt={key:3,class:"mb-4"},Ft={class:"flex flex-wrap gap-2"},Tt=["onClick"],At={key:4,class:"mb-4"},Ht={class:"flex flex-wrap gap-2"},Nt=["onClick"],Ot={key:5,class:"mb-4 text-sm text-gray-700"},Vt={key:0},Gt={key:0,class:"mr-2 text-gray-400 line-through"},Rt={class:"font-bold"},Ut={key:1,class:"text-green-600 text-xs"},Qt=["innerHTML"],Kt={class:"mb-4 flex items-center space-x-3"},Wt=["disabled"],Xt=["max"],Yt=["disabled"],Jt={class:"border-t p-4"},Zt=["disabled"],ea={class:"relative"},ta=["src"],aa=Ee({__name:"Cart",setup(F){const e=[Ve,Oe],w=qe(),f=Me(),_=j([]),h=j(""),M=j(1),D=j(1),q=j(null),z=j(null),V=j(null),A=j(!1),d=j(null),L=j(1),o=j(!1),c=j(""),m=j(!1),v=()=>m.value=!m.value,t=[{title:"Katalog Produk",href:"/home"}],s=a=>a?a.startsWith("storage/")?"/"+a:a.startsWith("/storage/")?a:"/storage/"+a:"";function l(a){const i=typeof a=="string"?parseFloat(a):a;return!i||i<=0?"-":new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(i)}const p=U(()=>{var i;if(!((i=d.value)!=null&&i.sizes))return[];const a=d.value.sizes.map(P=>P.variant);return[...new Set(a)]}),S=U(()=>d.value?d.value.variant==="all"?d.value.sizes.map(a=>a.size_id):q.value?d.value.sizes.filter(a=>a.variant===q.value).map(a=>a.size_id):[]:[]),y=U(()=>!z.value||!d.value?null:d.value.variant==="all"?d.value.sizes.find(a=>a.size_id===z.value):q.value?d.value.sizes.find(a=>a.variant===q.value&&a.size_id===z.value):null);async function G(){try{const a=await Se.get(`/api/stock?page=${M.value}&search=${h.value}`);_.value=a.data.data.map(i=>({...i,gallery_images:i.gallery_images?i.gallery_images.map(P=>({...P,extension:P.path.split(".").pop()||""})):[]})),D.value=a.data.last_page,await f.fetchCartItems()}catch(a){console.error("Error fetching products:",a),w.error("Failed to fetch products")}}function b(){M.value=1,G()}function T(a){d.value={...a,gallery_images:a.gallery_images?a.gallery_images.map(i=>({...i,extension:i.path.split(".").pop()||""})):[]},L.value=1,q.value=a.variant==="all"?"all":null,z.value=null,A.value=!0}function E(){A.value=!1,d.value=null,L.value=1}function N(a){c.value=a,o.value=!0}function C(){o.value=!1,c.value=""}const k=U(()=>f.cartItems.reduce((a,i)=>a+(i.quantity||0),0)),I=async()=>{var R,X,Y,J,Z;const a=y.value;if(!a){w.error("Detail produk tidak ditemukan.");return}if(!z.value){w.error("Harap pilih ukuran terlebih dahulu.");return}if(L.value>a.qty_available){w.error("Jumlah melebihi stok tersedia");return}const i=a.price??0,P=a.discount??0,Q=(a.price_sell??0)>0?a.price_sell??0:i-P;try{await f.addToCart(((R=d.value)==null?void 0:R.product_id)??0,L.value,a.size_id??"",((X=d.value)==null?void 0:X.uom_id)??"PCS",i,P,Q,((Y=d.value)==null?void 0:Y.location_id)??2,((J=d.value)==null?void 0:J.variant)??"all",((Z=d.value)==null?void 0:Z.sloc_id)??""),w.success("Product added to cart"),await G(),E()}catch{w.error(f.error||"Failed to add product to cart")}},O=()=>{var a;d.value&&L.value<(((a=y.value)==null?void 0:a.qty_available)??0)&&L.value++},he=()=>{L.value>1&&L.value--},ye=ge(async a=>{const i=a.price-(a.discount??0);if(a.quantity<a.qty_available)try{await f.addToCart(a.product_id??0,a.quantity+1,a.size_id??"",a.uom_id??"PCS",a.price,a.discount??0,a.price_sell??i,a.location_id??1,a.variant??"all",a.sloc_id??"GS00")}catch{w.error("Error increasing quantity")}else w.error("Stok maksimum tercapai")},300),be=ge(async a=>{if(a.quantity>1)try{const i=a.price-(a.discount??0);await f.addToCart(a.product_id??0,a.quantity-1,a.size_id??"",a.uom_id??"PCS",a.price,a.discount??0,a.price_sell??i,a.location_id??0,a.variant??"",a.sloc_id??"")}catch{w.error("Error decreasing quantity")}},300),xe=async a=>{try{await f.removeFromCart(a??0),w.success("Item removed")}catch{w.error(f.error||"Failed to remove item")}},ne=U(()=>f.cartItems.map(a=>({..._.value.find(P=>P.product_id===a.product_id),...a,id:a.product_id,cartItemId:a.id,quantity:a.quantity,price:a.price??0,price_sell:a.price_sell??0,discount:a.discount??0,size_id:a.size_id,uom_id:a.uom_id})).filter(Boolean)),_e=U(()=>f.cartItems.reduce((a,i)=>a+(i.price_sell??!1?i.price_sell??0:i.price)*i.quantity,0)),Ce=U(()=>f.cartItems.reduce((a,i)=>{const P=i.price||0,Q=(i.price_sell??0)>0?i.price_sell??0:i.price||0,R=P-Q;return a+R*(i.quantity||0)},0)),ke=()=>{console.log("Proceeding to checkout"),Be.visit("/checkout")},we=a=>a?["jpg","jpeg","png","gif","webp","avif"].includes(a.toLowerCase()):!1,Le=a=>a?["mp4","webm","ogg"].includes(a.toLowerCase()):!1;return $e(async()=>{m.value=!1,await G()}),(a,i)=>(u(),g(H,null,[se(ee(Ie),{title:"Belanja"}),se(Pe,{breadcrumbs:t},{default:le(()=>{var P,Q,R,X,Y,J,Z,re,oe,ce;return[n("section",Ge,[n("div",Re,[n("section",Ue,[n("div",Qe,[de(n("input",{type:"text","onUpdate:modelValue":i[0]||(i[0]=r=>h.value=r),onInput:b,placeholder:"Cari produk...",class:"w-full rounded border px-3 py-1 text-sm sm:ml-auto sm:w-52"},null,544),[[ue,h.value]])]),n("div",Ke,[(u(!0),g(H,null,te(_.value,r=>(u(),g("div",{key:r.product_id,onClick:K=>T(r),class:"cursor-pointer rounded-xl border border-gray-200 bg-green-50 p-3 shadow-sm transition hover:bg-green-100 hover:shadow-md",title:`${r.product_name} - ${l(r.price)}`},[n("div",Xe,[r.image_path?(u(),g("img",{key:0,src:s(r.image_path),alt:"product",class:"h-full w-full cursor-pointer rounded-lg object-cover"},null,8,Ye)):(u(),g("div",Je," No Image "))]),n("p",Ze,[W(x(r.product_name)+" ",1),r.discount&&r.price?(u(),g(H,{key:0},[r.discount>0?(u(),g("span",et," - "+x(Math.round(r.discount/r.price*100))+"% ",1)):B("",!0)],64)):B("",!0)]),n("div",tt,[r.discount&&r.discount>0?(u(),g(H,{key:0},[n("p",at,x(l(r.price)),1),n("p",null,[W(x(l(r.price_sell||r.price))+" ",1),i[4]||(i[4]=n("br",null,null,-1)),n("span",st,"(Diskon "+x(l(r.discount))+")",1)])],64)):(u(),g("p",lt,x(l(r.price)),1))])],8,We))),128))])])])]),n("div",it,[n("div",nt,[n("button",{onClick:v,class:"relative rounded-full bg-white p-2 shadow hover:shadow-md"},[i[5]||(i[5]=W(" 🛒 ")),k.value>0?(u(),g("span",rt,x(k.value),1)):B("",!0)])]),n("div",ot,[n("button",{onClick:v,class:"relative rounded-full bg-white p-2 shadow hover:shadow-md"},[i[6]||(i[6]=W(" 🛒 ")),k.value>0?(u(),g("span",ct,x(k.value),1)):B("",!0)])])]),m.value?(u(),g("div",{key:0,class:"fixed inset-0 z-30 bg-black bg-opacity-10 md:hidden",onClick:i[1]||(i[1]=r=>m.value=!1)})):B("",!0),n("aside",{class:ie(["fixed right-0 top-0 z-40 h-screen w-full max-w-md flex flex-col bg-gray-100 dark:bg-gray-300 transition-transform duration-300 transform",m.value?"translate-x-0":"translate-x-full"])},[i[7]||(i[7]=n("div",{class:"px-2 py-2 border-b border-gray-100 dark:border-gray-200"},[n("h2",{class:"text-sm font-bold"},"Keranjang Belanja")],-1)),n("div",{ref_key:"orderList",ref:V,class:"h-[420px] overflow-y-scroll px-4 py-2 space-y-4"},[ne.value.length===0?(u(),g("div",dt," Cart is empty ")):B("",!0),(u(!0),g(H,null,te(ne.value,r=>(u(),g("div",{key:r.product_id,class:"flex items-center gap-3 h-300 border-b pb-3 border-gray-300 dark:border-gray-700",style:{height:"200","overflow-y":"auto"}},[r.image_path?(u(),g("img",{key:0,src:s(r.image_path),alt:"product",class:"h-12 w-12 rounded object-cover"},null,8,ut)):B("",!0),n("div",pt,[n("p",gt,x(r.product_name),1),n("p",ft,"Stock: "+x(r.qty_available),1),n("p",mt,x(l((r.price_sell??0)>0?r.price_sell??0:r.price??0)),1),n("p",vt,"Size: "+x(r.size_id),1),n("p",ht," Diskon: "+x(l(r.discount??0)),1)]),n("div",yt,[n("button",{onClick:K=>ee(be)(r),disabled:r.quantity<=1,class:"rounded bg-gray-500 px-2 py-1 text-white disabled:opacity-50"}," - ",8,bt),n("span",xt,x(r.quantity),1),n("button",{onClick:K=>ee(ye)(r),class:"rounded bg-gray-500 px-2 py-1 text-white"}," + ",8,_t)]),n("button",{onClick:K=>xe(r.cartItemId),class:"text-lg text-red-500 hover:text-red-700"}," × ",8,Ct)]))),128))],512),n("div",kt,[n("p",wt,"Total Diskon: "+x(l(Ce.value)),1),n("p",Lt,"Total: "+x(l(_e.value)),1),n("button",{onClick:ke,class:"mt-2 w-full rounded-md bg-indigo-600 py-2 text-white hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500"}," Lanjut Checkout ")])],2),A.value?(u(),g("div",{key:1,class:"fixed inset-0 z-50 flex items-center justify-center overflow-y-auto bg-black bg-opacity-50 px-4",onClick:pe(E,["self"])},[n("div",Et,[n("button",{onClick:E,class:"absolute right-3 top-2 text-2xl font-bold text-gray-600 hover:text-gray-900 sm:text-xl"}," × "),n("div",$t,[d.value?(u(),g("div",It,[(P=d.value)!=null&&P.gallery_images&&d.value.gallery_images.length>0?(u(),g("div",zt,[se(ee(He),{"slides-per-view":1,"space-between":10,modules:e,pagination:{clickable:!0},navigation:!0,class:"mb-4 h-40 w-full rounded-lg sm:h-48 md:h-60"},{default:le(()=>[(u(!0),g(H,null,te(d.value.gallery_images,(r,K)=>(u(),ze(ee(Ne),{key:K},{default:le(()=>[we(r.extension)?(u(),g("img",{key:0,src:s(r.path),alt:r.filename||"product gallery image",class:"h-full w-full cursor-pointer rounded-lg object-cover transition hover:scale-105",onClick:sa=>N(s(r.path))},null,8,St)):Le(r.extension)?(u(),g("video",{key:1,src:s(r.path),controls:"",class:"h-full w-full rounded-lg object-cover"},null,8,Bt)):B("",!0)]),_:2},1024))),128))]),_:1})])):(Q=d.value)!=null&&Q.image_path?(u(),g("div",Dt,[n("img",{src:s(d.value.image_path),alt:"product",class:"h-full w-full cursor-pointer rounded-lg object-cover",onClick:i[2]||(i[2]=r=>N(s(d.value.image_path)))},null,8,qt)])):(u(),g("div",Pt," No Image ")),n("h3",Mt,x((R=d.value)==null?void 0:R.product_name),1),((X=d.value)==null?void 0:X.variant)!=="all"?(u(),g("div",jt,[i[8]||(i[8]=n("h4",{class:"mb-1 text-sm font-semibold text-gray-700"},"Variant",-1)),n("div",Ft,[(u(!0),g(H,null,te(p.value,r=>(u(),g("button",{key:r,onClick:()=>{q.value=r,z.value=null},class:ie(["rounded-full border px-3 py-1 text-sm font-semibold transition",q.value===r?"border-indigo-600 bg-indigo-600 text-white":"border-gray-300 bg-gray-200 text-gray-800 hover:bg-gray-300"])},x(r),11,Tt))),128))])])):B("",!0),q.value||((Y=d.value)==null?void 0:Y.variant)==="all"?(u(),g("div",At,[i[9]||(i[9]=n("h4",{class:"mb-1 text-sm font-semibold text-gray-700"},"Ukuran",-1)),n("div",Ht,[(u(!0),g(H,null,te(S.value,r=>(u(),g("button",{key:r,onClick:K=>z.value=r,class:ie(["rounded-full border px-3 py-1 text-sm font-semibold transition",z.value===r?"border-green-600 bg-green-600 text-white":"border-gray-300 bg-gray-200 text-gray-800 hover:bg-gray-300"])},x(r),11,Nt))),128))])])):B("",!0),y.value?(u(),g("div",Ot,[n("p",null,[i[10]||(i[10]=W(" Stok: ")),n("strong",null,x(y.value.qty_available),1)]),n("p",null,[!y.value.price||y.value.price<=0?(u(),g("span",Vt," Harga Belum di Setting ")):(u(),g(H,{key:1},[(y.value.discount??0)>0?(u(),g("span",Gt," Harga "+x(l(y.value.price)),1)):B("",!0),i[11]||(i[11]=W()),i[12]||(i[12]=n("br",null,null,-1)),n("span",Rt," Harga Diskon "+x(l(y.value.price_sell||y.value.price)),1),i[13]||(i[13]=n("br",null,null,-1)),(y.value.discount??0)>0?(u(),g("span",Ut," (Diskon: "+x(l(y.value.discount??0))+") ",1)):B("",!0)],64))])])):B("",!0),n("div",{class:"w-full",innerHTML:(J=d.value)==null?void 0:J.product_description},null,8,Qt),n("div",Kt,[n("button",{onClick:he,disabled:L.value<=1,class:"rounded bg-gray-200 px-3 py-1 text-sm text-gray-800 disabled:opacity-50"}," - ",8,Wt),de(n("input",{type:"number",min:"1",max:((Z=y.value)==null?void 0:Z.qty_available)??1,"onUpdate:modelValue":i[3]||(i[3]=r=>L.value=r),class:"w-12 rounded border py-1 text-center text-sm text-gray-800 sm:w-16"},null,8,Xt),[[ue,L.value,void 0,{number:!0}]]),n("button",{onClick:O,disabled:L.value>=(((re=y.value)==null?void 0:re.qty_available)??1),class:"rounded px-3 py-1 text-sm disabled:opacity-50"}," + ",8,Yt)])])):B("",!0),n("div",Jt,[n("button",{onClick:I,disabled:(((oe=d.value)==null?void 0:oe.qty_available)??0)===0||(((ce=y.value)==null?void 0:ce.price_sell)??0)===0,class:"w-full rounded bg-blue-600 py-2 text-sm text-white hover:bg-blue-700 disabled:opacity-50 sm:py-3"}," Tambah Keranjang ",8,Zt)])])])])):B("",!0)]}),_:1}),o.value?(u(),g("div",{key:0,class:"fixed inset-0 z-[9999] flex items-center justify-center bg-black bg-opacity-75",onClick:pe(C,["self"])},[n("div",ea,[n("img",{src:c.value,alt:"Fullscreen Product Image",class:"max-h-screen max-w-full object-contain"},null,8,ta),n("button",{onClick:C,class:"absolute right-4 top-4 flex h-12 w-12 items-center justify-center rounded-full bg-black bg-opacity-50 text-4xl font-bold text-white"}," × ")])])):B("",!0)],64))}}),pa=De(aa,[["__scopeId","data-v-4ee5a337"]]);export{pa as default};
