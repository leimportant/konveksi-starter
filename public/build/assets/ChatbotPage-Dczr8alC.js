import{R as u,r as a,d as k,o as d}from"./app-9be07bG9.js";const h=u("storeCookies",()=>{const s=a(!1),o=a(null),n=a(!1);function r(t){const e=document.cookie.match(new RegExp("(^| )"+t+"=([^;]+)"));return e?decodeURIComponent(e[2]):null}async function l(t){s.value=!0,o.value=null,n.value=!1;try{await fetch("/sanctum/csrf-cookie",{method:"GET",credentials:"include"});const e=r("XSRF-TOKEN"),f=r("aninkafashion-token");console.log("aninkafashion_session:",f),console.log("XSRF-TOKEN:",e);const i=await fetch("/api/transfer-cookies",{method:"POST",headers:{"Content-Type":"application/json","X-XSRF-TOKEN":e||""},credentials:"include",body:JSON.stringify({childUrl:t})}),c=await i.json();if(!i.ok)throw new Error(c.message||"Transfer failed");n.value=!0,window.location.href=t+"?_token="+(c._token||"")}catch(e){o.value=(e==null?void 0:e.message)||"Network or CSRF error",console.error("Failed to transfer cookie:",o.value)}finally{s.value=!1}}return{isTransferring:s,transferError:o,transferSuccess:n,transferCookies:l}}),p=k({__name:"ChatbotPage",setup(s){const o="http://localhost:4500",n=h();return d(()=>{console.log("Assistant URL:",o),n.transferCookies(o)}),()=>{}}});export{p as default};
