import{d as B,q as L,o as V,f as c,g as i,p as r,u as l,Z as O,x as d,k as s,l as k,S as w,m as D,D as P,y as x,F as _,B as v,E as q,j as n,z as C,C as I}from"./app-BjS9V559.js";import{_ as U,a as A,b as S,c as $,d as F,e as j}from"./TableRow.vue_vue_type_script_setup_true_lang-iAlIABgh.js";import{_ as R}from"./AppLayout.vue_vue_type_script_setup_true_lang-DZvDN96H.js";import{u as G}from"./usePayrollStore-CV7Eok6e.js";import"./index-CPQH5Eah.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-Cx1FFA3U.js";const K={class:"space-y-4 p-6"},Q={class:"grid grid-cols-2 gap-3 sm:grid-cols-2"},Z={class:"flex flex-col"},H={class:"flex flex-col"},J={class:"flex items-center gap-2"},W={class:"overflow-hidden rounded-md border"},X={class:"flex items-center justify-between rounded bg-gray-200 p-2 font-bold dark:bg-gray-700"},Y=["checked","onChange"],tt={class:"flex-1 text-sm font-bold text-gray-800"},st={class:C(["text-[11px] text-gray-700 grid sm:grid-cols-2 sm:gap-x-4"])},et={class:"flex justify-between"},ot={class:"font-bold text-gray-800"},lt={class:"flex justify-between"},at={class:"font-bold text-gray-800"},nt={class:"flex justify-between"},rt={class:"font-bold text-gray-800"},dt={class:"flex items-center"},it={class:"flex justify-between border-t pt-1 sm:border-t-0 sm:pt-0"},ut={class:"font-bold text-gray-900"},ct={class:"w-full text-xs"},_t={class:"bg-gray-200 font-bold dark:bg-gray-700"},ft={colspan:"4",class:"px-3 py-2"},pt={class:"bg-blue-50 font-semibold"},gt={colspan:"4",class:"px-3 py-2"},mt={class:"p-2"},yt={class:"p-2 text-right"},bt={key:0},$t=B({__name:"Index",setup(xt){const p=G(),{employees:T,startDate:g,endDate:m,selectedEmployees:N}=L(p),z=[{title:"Payroll Management",href:"/payroll"}];V(()=>{const u=new Date,t=new Date;t.setDate(u.getDate()-60),g.value=t.toISOString().split("T")[0],m.value=u.toISOString().split("T")[0],p.loadData()});const E=u=>{if(!u)return"-";const t=u.split("T")[0],[e,o,a]=t.split("-");return`${a}/${o}/${e}`},M=u=>{if(!u.details)return{};const t={};u.details.forEach(o=>{var y;const a=((y=o.created_at)==null?void 0:y.split("T")[0])||"-",f=o.model_desc||"-";t[a]||(t[a]={}),t[a][f]||(t[a][f]=[]),t[a][f].push(o)});const e={};return Object.keys(t).sort((o,a)=>a.localeCompare(o)).forEach(o=>{e[o]={},Object.keys(t[o]).sort().forEach(a=>{e[o][a]=t[o][a]})}),e};return(u,t)=>(i(),c(_,null,[r(l(O),{title:"Payroll Management"}),r(R,{breadcrumbs:z},{default:d(()=>[s("div",K,[s("div",Q,[s("div",Z,[t[2]||(t[2]=s("label",{class:"mb-1 text-xs font-medium"},"Start Date",-1)),k(s("input",{type:"date","onUpdate:modelValue":t[0]||(t[0]=e=>w(g)?g.value=e:null),class:"rounded-md border px-3 py-1.5 text-sm shadow-sm focus:border-indigo-500 focus:ring"},null,512),[[D,l(g),void 0,{lazy:!0}]])]),s("div",H,[t[3]||(t[3]=s("label",{class:"mb-1 text-xs font-medium"},"End Date",-1)),k(s("input",{type:"date","onUpdate:modelValue":t[1]||(t[1]=e=>w(m)?m.value=e:null),class:"rounded-md border px-3 py-1.5 text-sm shadow-sm focus:border-indigo-500 focus:ring"},null,512),[[D,l(m),void 0,{lazy:!0}]])])]),s("div",J,[r(l(P),{onClick:l(p).loadData,size:"sm",class:"rounded bg-blue-600 px-4 py-2 text-sm text-white hover:bg-blue-700"},{default:d(()=>t[4]||(t[4]=[x(" Tampilkan ")])),_:1,__:[4]},8,["onClick"])]),s("div",W,[r(l(U),null,{default:d(()=>[r(l(A),null,{default:d(()=>[r(l(S),{class:"bg-gray-50"},{default:d(()=>[r(l($),null,{default:d(()=>t[5]||(t[5]=[x("Karyawan")])),_:1,__:[5]}),r(l($),null,{default:d(()=>t[6]||(t[6]=[x("Detail")])),_:1,__:[6]})]),_:1})]),_:1}),r(l(F),null,{default:d(()=>[(i(!0),c(_,null,v(l(T),e=>(i(),q(l(S),{key:e.employee_id,class:"bg-white align-top hover:bg-gray-50"},{default:d(()=>[r(l(j),{class:"align-top"},{default:d(()=>{var o;return[s("div",X,[s("input",{type:"checkbox",checked:l(N).includes(e.employee_id),onChange:()=>l(p).toggleSelect(e.employee_id),class:"mr-2 h-4 w-4"},null,40,Y),s("span",tt,n((o=e.employee)==null?void 0:o.name),1),s("span",{class:C(["rounded-md border px-2 py-0.5 text-[10px] font-semibold capitalize",e.status==="closed"?"border-green-300 bg-green-50 text-green-700":"border-yellow-300 bg-yellow-50 text-yellow-700"])},n(e.status),3)]),s("div",st,[s("div",et,[t[7]||(t[7]=s("span",null,"Qty",-1)),s("span",ot,n(e.total_qty),1)]),s("div",lt,[t[8]||(t[8]=s("span",null,"Upah",-1)),s("span",at,n(Number(e.total_upah).toLocaleString()),1)]),s("div",nt,[t[9]||(t[9]=s("span",null,"Makan",-1)),s("span",rt,n(Number(e.uang_makan).toLocaleString()),1)]),s("div",dt,[t[10]||(t[10]=s("span",null,"Potongan",-1)),t[11]||(t[11]=s("div",{class:"mx-2 flex-grow border-b border-dotted"},null,-1)),x(" "+n(Number(e.potongan).toLocaleString()),1)]),s("div",it,[t[12]||(t[12]=s("span",{class:"font-semibold text-gray-800"},"Total Gaji",-1)),s("span",ut,n(Number(e.net_gaji).toLocaleString()),1)])])]}),_:2},1024),r(l(j),{class:"p-0 align-top sm:p-2"},{default:d(()=>{var o;return[s("table",ct,[(i(!0),c(_,null,v(M(e),(a,f)=>(i(),c(_,{key:f},[s("tr",_t,[s("td",ft,"ðŸ“… "+n(E(f)),1)]),(i(!0),c(_,null,v(a,(y,h)=>(i(),c(_,{key:h},[s("tr",pt,[s("td",gt,"ðŸ§µ Model: "+n(h),1)]),(i(!0),c(_,null,v(y,b=>(i(),c("tr",{key:b.id,class:"border-b bg-white"},[s("td",mt,n(b.size_id)+" - "+n(b.variant),1),s("td",yt,n(Number(b.qty).toLocaleString()),1)]))),128))],64))),128))],64))),128)),(o=e.details)!=null&&o.length?I("",!0):(i(),c("tr",bt,t[13]||(t[13]=[s("td",{colspan:"4",class:"p-4 text-center text-gray-500"},"Tidak ada data rincian aktivitas.",-1)])))])]}),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})])])]),_:1})],64))}});export{$t as default};
