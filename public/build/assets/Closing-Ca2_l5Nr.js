import{d as I,Q as T,r as b,w as p,f as k,g as F,p as d,u as a,Z as R,x as y,k as u,R as U,l as q,m as N,D as g,y as $,F as K,N as M}from"./app-D3IMWQF4.js";import{_ as O}from"./AppLayout.vue_vue_type_script_setup_true_lang-BcwQf37b.js";import{_ as v}from"./Input.vue_vue_type_script_setup_true_lang-Bw3MkARf.js";import{u as j}from"./useCashBalanceStore-BdffgKru.js";import{u as D}from"./useToast-Drtd9KeE.js";import{u as f}from"./useCurrencyInput-DQp3mrj9.js";import"./index-C-72ODlk.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-BqgIrXHM.js";const A={class:"w-full px-4 py-6"},E={class:"space-y-4"},G={class:"mt-6 flex justify-end gap-2"},h=I({__name:"Closing",setup(P){const S=j(),V=D(),B=T().props.id,n=f(0),s=f(0),o=f(0),r=f(0),i=f(0),m=b({cash_sales_total:n.internalValue.value,cash_in:s.internalValue.value,cash_out:o.internalValue.value,closing_balance:r.internalValue.value,discrepancy:i.internalValue.value,notes:""});p(n.internalValue,l=>{m.value.cash_sales_total=l}),p(s.internalValue,l=>{m.value.cash_in=l}),p(o.internalValue,l=>{m.value.cash_out=l}),p(r.internalValue,l=>{m.value.closing_balance=l}),p(i.internalValue,l=>{m.value.discrepancy=l});const x=b(!1),C=async()=>{x.value=!0;try{await S.closing(B,m.value),V.success("Shift berhasil ditutup"),M.visit("/sales")}catch(l){if(l.response&&l.response.data&&l.response.data.errors)for(const e in l.response.data.errors)V.error(l.response.data.errors[e][0]);else l.response&&l.response.data&&l.response.data.message?V.error(l.response.data.message):(V.error("Gagal menutup shift"),console.error(l))}finally{x.value=!1}},w=[{title:"Close Shift",href:"/close-shift"}];return(l,e)=>(F(),k(K,null,[d(a(R),{title:"Tutup Shift Kasir"}),d(O,{breadcrumbs:w},{default:y(()=>[u("div",A,[u("form",{onSubmit:U(C,["prevent"])},[u("div",E,[u("div",null,[e[17]||(e[17]=u("label",{class:"text-[14px]"},"Total Penjualan Tunai",-1)),d(a(v),{modelValue:a(n).formattedValue.value,"onUpdate:modelValue":e[0]||(e[0]=t=>a(n).formattedValue.value=t),onBlur:e[1]||(e[1]=t=>a(n).formattedValue.value=a(n).formatRupiah(a(n).internalValue.value)),onFocus:e[2]||(e[2]=t=>a(n).formattedValue.value=a(n).internalValue.value.toString()),type:"text",required:""},null,8,["modelValue"])]),u("div",null,[e[18]||(e[18]=u("label",{class:"text-[14px]"},"Kas Masuk (Cash In)",-1)),d(a(v),{modelValue:a(s).formattedValue.value,"onUpdate:modelValue":e[3]||(e[3]=t=>a(s).formattedValue.value=t),onBlur:e[4]||(e[4]=t=>a(s).formattedValue.value=a(s).formatRupiah(a(s).internalValue.value)),onFocus:e[5]||(e[5]=t=>a(s).formattedValue.value=a(s).internalValue.value.toString()),type:"text",required:""},null,8,["modelValue"])]),u("div",null,[e[19]||(e[19]=u("label",{class:"text-[14px]"},"Kas Keluar (Cash Out)",-1)),d(a(v),{modelValue:a(o).formattedValue.value,"onUpdate:modelValue":e[6]||(e[6]=t=>a(o).formattedValue.value=t),onBlur:e[7]||(e[7]=t=>a(o).formattedValue.value=a(o).formatRupiah(a(o).internalValue.value)),onFocus:e[8]||(e[8]=t=>a(o).formattedValue.value=a(o).internalValue.value.toString()),type:"text",required:""},null,8,["modelValue"])]),u("div",null,[e[20]||(e[20]=u("label",{class:"text-[14px]"},"Saldo Akhir",-1)),d(a(v),{modelValue:a(r).formattedValue.value,"onUpdate:modelValue":e[9]||(e[9]=t=>a(r).formattedValue.value=t),onBlur:e[10]||(e[10]=t=>a(r).formattedValue.value=a(r).formatRupiah(a(r).internalValue.value)),onFocus:e[11]||(e[11]=t=>a(r).formattedValue.value=a(r).internalValue.value.toString()),type:"text",required:""},null,8,["modelValue"])]),u("div",null,[e[21]||(e[21]=u("label",{class:"text-[14px]"},"Selisih",-1)),d(a(v),{modelValue:a(i).formattedValue.value,"onUpdate:modelValue":e[12]||(e[12]=t=>a(i).formattedValue.value=t),onBlur:e[13]||(e[13]=t=>a(i).formattedValue.value=a(i).formatRupiah(a(i).internalValue.value)),onFocus:e[14]||(e[14]=t=>a(i).formattedValue.value=a(i).internalValue.value.toString()),type:"text",required:""},null,8,["modelValue"])]),u("div",null,[e[22]||(e[22]=u("label",{class:"text-[14px]"},"Catatan",-1)),q(u("textarea",{"onUpdate:modelValue":e[15]||(e[15]=t=>m.value.notes=t),class:"w-full border rounded px-3 py-2",rows:"3",placeholder:"Opsional"},null,512),[[N,m.value.notes]])])]),u("div",G,[d(a(g),{type:"submit",disabled:x.value},{default:y(()=>e[23]||(e[23]=[$("Tutup Shift")])),_:1,__:[23]},8,["disabled"]),d(a(g),{type:"button",variant:"outline",onClick:e[16]||(e[16]=t=>l.$inertia.visit("/cash-balances"))},{default:y(()=>e[24]||(e[24]=[$(" Batal ")])),_:1,__:[24]})])],32)])]),_:1})],64))}});export{h as default};
