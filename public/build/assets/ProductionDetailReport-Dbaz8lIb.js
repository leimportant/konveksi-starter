import{d as w,r as x,o as T,w as $,f as _,g as f,p as l,u as t,Z as I,x as a,k as d,l as D,m as k,j as s,y as o,F as y,B as R,E as N}from"./app-CJqfVmpi.js";import{_ as V,a as B,b as P,c as p,d as C,e as i}from"./TableRow.vue_vue_type_script_setup_true_lang-C54C7mXv.js";import{_ as F}from"./AppLayout.vue_vue_type_script_setup_true_lang-DY0hRfUP.js";import{u as L}from"./useReportStore-B5RTTsJC.js";import"./index-BX9Ggp7C.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-Bjho6l_o.js";const U={class:"p-4"},M={class:"mb-4 flex flex-wrap gap-2"},O={key:0},h={key:1,class:"text-red-500"},A={key:2,class:"text-gray-500"},E={key:3,class:"overflow-auto"},j={class:"mt-4 flex justify-end space-x-2"},W=["disabled"],q={class:"py-1"},K=["disabled"],X=w({__name:"ProductionDetailReport",setup(Q){const r=L(),c=x(""),m=x(""),g=x(""),b=()=>{r.fetchProductionDetail(c.value,m.value,g.value,r.currentPage)},S=u=>u?new Date(u).toLocaleDateString("id-ID",{year:"numeric",month:"long",day:"numeric"}):"-",v=u=>typeof u!="number"||isNaN(u)?"":new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:2}).format(u);return T(()=>{const u=new Date,e=new Date(u.getFullYear(),u.getMonth(),1);c.value=e.toISOString().split("T")[0],m.value=u.toISOString().split("T")[0],b()}),$(()=>r.currentPage,b),(u,e)=>(f(),_(y,null,[l(t(I),{title:"Production Detail Report"}),l(F,null,{header:a(()=>e[5]||(e[5]=[d("h2",{class:"text-xl font-semibold text-gray-800"},"Production Detail Report",-1)])),default:a(()=>[d("div",U,[d("div",M,[D(d("input",{type:"date","onUpdate:modelValue":e[0]||(e[0]=n=>c.value=n),class:"rounded border px-2 py-1"},null,512),[[k,c.value]]),D(d("input",{type:"date","onUpdate:modelValue":e[1]||(e[1]=n=>m.value=n),class:"rounded border px-2 py-1"},null,512),[[k,m.value]]),D(d("input",{type:"text","onUpdate:modelValue":e[2]||(e[2]=n=>g.value=n),placeholder:"Search by product name",class:"rounded border px-2 py-1"},null,512),[[k,g.value]]),d("button",{onClick:b,class:"rounded bg-blue-600 px-4 py-1 text-white hover:bg-blue-700"},"Tampilkan")]),t(r).loading?(f(),_("div",O,"Loading...")):t(r).error?(f(),_("div",h,"Error: "+s(t(r).error.message),1)):t(r).productionDetailItem.length===0?(f(),_("div",A,"Tidak ada data ditampilkan.")):(f(),_("div",E,[l(t(V),null,{default:a(()=>[l(t(B),null,{default:a(()=>[l(t(P),{class:"bg-gray-100"},{default:a(()=>[l(t(p),null,{default:a(()=>e[6]||(e[6]=[o("Tanggal")])),_:1,__:[6]}),l(t(p),null,{default:a(()=>e[7]||(e[7]=[o("Staff")])),_:1,__:[7]}),l(t(p),null,{default:a(()=>e[8]||(e[8]=[o("Model")])),_:1,__:[8]}),l(t(p),null,{default:a(()=>e[9]||(e[9]=[o("Activity Role")])),_:1,__:[9]}),l(t(p),null,{default:a(()=>e[10]||(e[10]=[o("Variant")])),_:1,__:[10]}),l(t(p),null,{default:a(()=>e[11]||(e[11]=[o("Qty")])),_:1,__:[11]}),l(t(p),null,{default:a(()=>e[12]||(e[12]=[o("Unit Price")])),_:1,__:[12]}),l(t(p),null,{default:a(()=>e[13]||(e[13]=[o("Subtotal")])),_:1,__:[13]})]),_:1})]),_:1}),l(t(C),null,{default:a(()=>[(f(!0),_(y,null,R(t(r).productionDetailItem,n=>(f(),N(t(P),{key:n.model_id},{default:a(()=>[n.staff_name&&(n.staff_name.startsWith("SUBTOTAL")||n.staff_name.startsWith("TOTAL"))?(f(),_(y,{key:0},[l(t(i),{colspan:7,class:"text-center font-bold"},{default:a(()=>[o(s(n.staff_name),1)]),_:2},1024),l(t(i),{class:"font-bold"},{default:a(()=>[o(s(v(n.total)),1)]),_:2},1024)],64)):(f(),_(y,{key:1},[l(t(i),null,{default:a(()=>[o(s(S(n.created_at)),1)]),_:2},1024),l(t(i),null,{default:a(()=>[o(s(n.staff_name),1)]),_:2},1024),l(t(i),null,{default:a(()=>[o(s(n.model_name),1)]),_:2},1024),l(t(i),null,{default:a(()=>[o(s(n.activity_role_name),1)]),_:2},1024),l(t(i),null,{default:a(()=>[o(s(n.variant),1)]),_:2},1024),l(t(i),null,{default:a(()=>[o(s(n.qty),1)]),_:2},1024),l(t(i),null,{default:a(()=>[o(s(v(n.unit_price)),1)]),_:2},1024),l(t(i),null,{default:a(()=>[o(s(v(n.total)),1)]),_:2},1024)],64))]),_:2},1024))),128))]),_:1})]),_:1}),d("div",j,[d("button",{onClick:e[3]||(e[3]=n=>t(r).currentPage--),disabled:t(r).currentPage<=1,class:"rounded border bg-gray-100 px-3 py-1 hover:bg-gray-200 disabled:opacity-50"}," Previous ",8,W),d("span",q,"Page "+s(t(r).currentPage)+" of "+s(t(r).lastPage),1),d("button",{onClick:e[4]||(e[4]=n=>t(r).currentPage++),disabled:t(r).currentPage>=t(r).lastPage,class:"rounded border bg-gray-100 px-3 py-1 hover:bg-gray-200 disabled:opacity-50"}," Next ",8,K)])]))])]),_:1})],64))}});export{X as default};
