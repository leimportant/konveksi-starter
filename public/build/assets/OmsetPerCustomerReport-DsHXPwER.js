import{d as $,r as v,c as C,o as D,f as p,g as d,p as a,u as t,Z as O,x as s,k as i,D as I,y as r,j as u,F as w,B as R,E as N,z as B}from"./app-BVfchgiJ.js";import{_ as b}from"./Input.vue_vue_type_script_setup_true_lang-DKH5E57N.js";import{_ as F,a as L,b as S,c as m,d as U,e as f}from"./TableRow.vue_vue_type_script_setup_true_lang-D_kk1V0H.js";import{_ as j}from"./AppLayout.vue_vue_type_script_setup_true_lang-CUMNAqQ4.js";import{u as E}from"./useReportStore-Bh__ltvl.js";import"./index-C1tPyWL9.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-BEJMLWWB.js";const M={class:"space-y-4 p-4"},z={class:"flex flex-col gap-3 sm:flex-row sm:items-center"},A={key:0},q={key:1,class:"text-red-500"},H={key:2,class:"text-gray-500"},K={key:3,class:"overflow-auto"},Q={class:"mt-4 flex justify-end space-x-2"},Y=["disabled"],Z={class:"py-1"},G=["disabled"],se=$({__name:"OmsetPerCustomerReport",setup(J){const o=E(),_=v(""),g=v(""),c=v(""),T=C(()=>o.currentPage),P=C(()=>o.perPage),y=async(n=1,e=10)=>{const l=parseInt(c.value)||0;await o.fetchOmsetPerCustomer(l,c.value,_.value,g.value,n,e)},x=n=>{o.currentPage=n,y(n,P.value)},k=n=>{const e=parseFloat(n);return isNaN(e)?"Rp0,00":new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:2}).format(e)};return D(()=>{const n=new Date,e=new Date(n.getFullYear(),n.getMonth(),1);_.value=e.toISOString().split("T")[0],g.value=n.toISOString().split("T")[0],y(T.value,P.value)}),(n,e)=>(d(),p(w,null,[a(t(O),{title:"Omset Report Per Customer"}),a(j,null,{header:s(()=>e[6]||(e[6]=[i("h2",{class:"text-lg font-semibold text-gray-800"},"Omset Report Per Customer",-1)])),default:s(()=>[i("div",M,[i("div",z,[a(t(b),{type:"date",modelValue:_.value,"onUpdate:modelValue":e[0]||(e[0]=l=>_.value=l),class:"w-full sm:w-auto"},null,8,["modelValue"]),a(t(b),{type:"date",modelValue:g.value,"onUpdate:modelValue":e[1]||(e[1]=l=>g.value=l),class:"w-full sm:w-auto"},null,8,["modelValue"]),a(t(b),{type:"text",modelValue:c.value,"onUpdate:modelValue":e[2]||(e[2]=l=>c.value=l),placeholder:"Cari customer atau produk...",class:"flex-1"},null,8,["modelValue"]),a(t(I),{onClick:e[3]||(e[3]=l=>y(1,10)),class:"bg-indigo-600 text-white transition hover:bg-indigo-700"},{default:s(()=>e[7]||(e[7]=[r(" Tampilkan ")])),_:1,__:[7]})]),t(o).loading?(d(),p("div",A,"Loading...")):t(o).error?(d(),p("div",q,"Error: "+u(t(o).error.message),1)):t(o).omsetSummaryPerCustomer.length===0?(d(),p("div",H,"Tidak ada data ditampilkan.")):(d(),p("div",K,[a(t(F),null,{default:s(()=>[a(t(L),null,{default:s(()=>[a(t(S),{class:"bg-gray-100 text-sm font-bold"},{default:s(()=>[a(t(m),null,{default:s(()=>e[8]||(e[8]=[r("Tanggal")])),_:1,__:[8]}),a(t(m),null,{default:s(()=>e[9]||(e[9]=[r("Customer")])),_:1,__:[9]}),a(t(m),null,{default:s(()=>e[10]||(e[10]=[r("Produk ID")])),_:1,__:[10]}),a(t(m),null,{default:s(()=>e[11]||(e[11]=[r("Produk")])),_:1,__:[11]}),a(t(m),null,{default:s(()=>e[12]||(e[12]=[r("Qty")])),_:1,__:[12]}),a(t(m),null,{default:s(()=>e[13]||(e[13]=[r("Harga")])),_:1,__:[13]}),a(t(m),null,{default:s(()=>e[14]||(e[14]=[r("Total")])),_:1,__:[14]})]),_:1})]),_:1}),a(t(U),null,{default:s(()=>[(d(!0),p(w,null,R(t(o).omsetSummaryPerCustomer,(l,V)=>(d(),N(t(S),{key:V,class:B(["text-sm",l.product==="SUBTOTAL"||l.product==="TOTAL"?"bg-green-100 font-semibold":""].join(" "))},{default:s(()=>[a(t(f),null,{default:s(()=>[r(u(l.tanggal||""),1)]),_:2},1024),a(t(f),null,{default:s(()=>[r(u(l.customer||""),1)]),_:2},1024),a(t(f),null,{default:s(()=>[r(u(l.product_id||""),1)]),_:2},1024),a(t(f),null,{default:s(()=>[r(u(l.product||""),1)]),_:2},1024),a(t(f),null,{default:s(()=>[r(u(l.qty||""),1)]),_:2},1024),a(t(f),null,{default:s(()=>[r(u(l.price?k(l.price.toString()):""),1)]),_:2},1024),a(t(f),null,{default:s(()=>[r(u(l.total?k(l.total.toString()):""),1)]),_:2},1024)]),_:2},1032,["class"]))),128))]),_:1})]),_:1}),i("div",Q,[i("button",{onClick:e[4]||(e[4]=l=>x(t(o).currentPage-1)),disabled:t(o).currentPage<=1,class:"rounded border bg-gray-100 px-3 py-1 hover:bg-gray-200 disabled:opacity-50"}," Previous ",8,Y),i("span",Z,"Page "+u(t(o).currentPage)+" of "+u(t(o).lastPage),1),i("button",{onClick:e[5]||(e[5]=l=>x(t(o).currentPage+1)),disabled:t(o).currentPage>=t(o).lastPage,class:"rounded border bg-gray-100 px-3 py-1 hover:bg-gray-200 disabled:opacity-50"}," Next ",8,G)])]))])]),_:1})],64))}});export{se as default};
