import{d as C,r as c,c as O,e as M,f as u,g as d,p as i,u as m,Z as $,x as b,k as o,N as j,C as y,j as S,D as x,y as k,F as q,V as T}from"./app-B3R-chD2.js";import{_ as D}from"./AppLayout.vue_vue_type_script_setup_true_lang-DigAKhiz.js";import{_ as N}from"./Input.vue_vue_type_script_setup_true_lang-_fdH5lon.js";import{u as E}from"./useCashBalanceStore-DP0yc8va.js";import{u as F}from"./useToast-CeMCsTb3.js";import"./index-DpKs9e2F.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-wIdYCgKq.js";const U={class:"w-full px-4 py-6"},A={key:0,class:"mt-1 text-sm text-red-600"},P={key:0,class:"mt-1 text-sm text-red-600"},Z={class:"flex flex-col sm:flex-row justify-end gap-2 sm:gap-4 pt-4"},z={key:0},G={key:1},X=C({__name:"OpenShift",setup(H){const w=E(),f=F(),s=c({shift_number:1,opening_balance:0}),a=c({}),n=c(!1),v=O(()=>Object.keys(a.value).length>0),_=()=>{s.value.shift_number?s.value.shift_number<1?a.value.shift_number="Shift number must be at least 1":delete a.value.shift_number:a.value.shift_number="Shift number is required"},g=()=>{s.value.opening_balance===void 0||s.value.opening_balance===null?a.value.opening_balance="Opening balance is required":s.value.opening_balance<0?a.value.opening_balance="Opening balance cannot be negative":delete a.value.opening_balance},V=async()=>{var r,e,p,t,h;if(_(),g(),!v.value){n.value=!0;try{await w.createCashBalance(s.value),f.success("Shift opened successfully"),T.visit("/pos")}catch(l){console.error("Shift creation error:",l),((r=l.response)==null?void 0:r.status)===422&&((p=(e=l.response)==null?void 0:e.data)!=null&&p.errors)?(a.value=l.response.data.errors,f.error(l.response.data.message)):(h=(t=l.response)==null?void 0:t.data)!=null&&h.message?f.error(l.response.data.message):f.error("Terjadi kesalahan saat menyimpan data")}finally{n.value=!1}}},B=[{title:"Cash Management",href:route("cash-balance.index")},{title:"Open New Shift",href:route("cash-balance.openshift")}];return(r,e)=>{const p=M("Spinner");return d(),u(q,null,[i(m($),{title:"Open New Shift"}),i(D,{breadcrumbs:B},{default:b(()=>[o("div",U,[o("form",{onSubmit:j(V,["prevent"]),class:"space-y-4 sm:space-y-6"},[o("div",null,[e[3]||(e[3]=o("label",{for:"shiftNumber",class:"block text-sm font-medium mb-1"}," Shift Number ",-1)),i(m(N),{id:"shiftNumber",modelValue:s.value.shift_number,"onUpdate:modelValue":e[0]||(e[0]=t=>s.value.shift_number=t),modelModifiers:{number:!0},type:"number",min:"1",required:"",class:"w-full",disabled:n.value,onBlur:_},null,8,["modelValue","disabled"]),a.value.shift_number?(d(),u("p",A,S(a.value.shift_number),1)):y("",!0)]),o("div",null,[e[4]||(e[4]=o("label",{for:"openingBalance",class:"block text-sm font-medium mb-1"}," Saldo Awal ",-1)),i(m(N),{id:"openingBalance",modelValue:s.value.opening_balance,"onUpdate:modelValue":e[1]||(e[1]=t=>s.value.opening_balance=t),modelModifiers:{number:!0},type:"number",min:"0",step:"0.01",class:"w-full",required:"",disabled:n.value,onBlur:g},null,8,["modelValue","disabled"]),a.value.opening_balance?(d(),u("p",P,S(a.value.opening_balance),1)):y("",!0)]),o("div",Z,[i(m(x),{type:"button",variant:"outline",class:"bg-indigo-600 text-white py-2 h-10 rounded-md hover:bg-indigo-700 focus:ring-2 focus:ring-indigo-500",disabled:n.value,onClick:e[2]||(e[2]=t=>r.$inertia.visit(r.route("cash-balance.index")))},{default:b(()=>e[5]||(e[5]=[k(" Cancel ")])),_:1,__:[5]},8,["disabled"]),i(m(x),{type:"submit",class:"h-10",disabled:n.value||v.value},{default:b(()=>[n.value?(d(),u("span",z,[i(p,{class:"mr-2"}),e[6]||(e[6]=k(" Processing... "))])):(d(),u("span",G,"Mulai Shift"))]),_:1},8,["disabled"])])],32)])]),_:1})],64)}}});export{X as default};
