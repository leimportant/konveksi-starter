import{_ as V}from"./AppLayout.vue_vue_type_script_setup_true_lang-UgZEbxA1.js";import{d as C,Q as I,r as S,o as N,f as _,g as f,p as a,u as e,Z as z,x as l,k as s,y as n,j as o,F as $,B as F,E as L,z as M,V as Q}from"./app-Dvnty1_T.js";import{u as j}from"./useToast-BYGji__r.js";import{u as q}from"./useStockOpnameStore-tPbKDHAU.js";import{_ as E,a as P,b,c as m,d as T,e as p}from"./TableRow.vue_vue_type_script_setup_true_lang-CoEJ4s3p.js";import"./index-DyqtVOcO.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-BNrdeW_Y.js";const A={class:"px-4 py-4"},H={key:0,class:"bg-white shadow rounded p-6 space-y-6"},R={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},U={class:"md:col-span-2"},Y={class:"mt-6"},Z={class:"flex justify-end mt-4"},G={key:1,class:"text-center text-gray-600"},J={key:2,class:"text-center text-red-600"},nt=C({__name:"View",setup(K){const k=j(),i=I().props.id;(!i||i==="0")&&(console.error("Invalid stockOpnameId:",i),k.error("Invalid stock opname ID"));const v=S(!1),d=S(null),x=q(),D=async()=>{try{v.value=!0,await x.fetchOpnameById(i),d.value=x.items.find(u=>u.id===i)}catch(u){console.error("Failed to load stock opname:",u),k.error("Failed to load stock opname data")}finally{v.value=!1}};N(()=>{D()});const O=[{title:"Stock Opname",href:"/stock-opnames"},{title:"Detail",href:`/stock-opnames/${i}`}];function w(u){if(!u)return"-";const t=new Date(u),c=String(t.getDate()).padStart(2,"0"),g=String(t.getMonth()+1).padStart(2,"0"),r=t.getFullYear(),y=String(t.getHours()).padStart(2,"0"),B=String(t.getMinutes()).padStart(2,"0");return`${c}/${g}/${r} ${y}:${B}`}return(u,t)=>(f(),_($,null,[a(e(z),{title:"View Stock Opname"}),a(V,{breadcrumbs:O},{default:l(()=>{var c,g;return[s("div",A,[t[14]||(t[14]=s("h1",{class:"text-sm font-bold mb-4"},"Stock Opname Detail",-1)),d.value?(f(),_("div",H,[s("div",R,[s("div",null,[t[1]||(t[1]=s("strong",null,"Location:",-1)),n(" "+o(((c=d.value.location)==null?void 0:c.name)||"-"),1)]),s("div",null,[t[2]||(t[2]=s("strong",null,"Product:",-1)),n(" "+o(((g=d.value.product)==null?void 0:g.name)||"-"),1)]),s("div",null,[t[3]||(t[3]=s("strong",null,"SLOC:",-1)),n(" "+o(d.value.sloc_id),1)]),s("div",null,[t[4]||(t[4]=s("strong",null,"UOM:",-1)),n(" "+o(d.value.uom_id),1)]),s("div",U,[t[5]||(t[5]=s("strong",null,"Remark:",-1)),n(" "+o(d.value.remark||"-"),1)]),s("div",null,[t[6]||(t[6]=s("strong",null,"Created At:",-1)),n(" "+o(w(d.value.created_at)),1)])]),s("div",Y,[t[13]||(t[13]=s("h2",{class:"text-lg font-semibold mb-2"},"Size Details",-1)),a(e(E),null,{default:l(()=>[a(e(P),null,{default:l(()=>[a(e(b),null,{default:l(()=>[a(e(m),null,{default:l(()=>t[7]||(t[7]=[n("Size")])),_:1,__:[7]}),a(e(m),null,{default:l(()=>t[8]||(t[8]=[n("Variant")])),_:1,__:[8]}),a(e(m),null,{default:l(()=>t[9]||(t[9]=[n("System Qty")])),_:1,__:[9]}),a(e(m),null,{default:l(()=>t[10]||(t[10]=[n("Physical Qty")])),_:1,__:[10]}),a(e(m),null,{default:l(()=>t[11]||(t[11]=[n("Difference")])),_:1,__:[11]}),a(e(m),null,{default:l(()=>t[12]||(t[12]=[n("Note")])),_:1,__:[12]})]),_:1})]),_:1}),a(e(T),null,{default:l(()=>[(f(!0),_($,null,F(d.value.items,(r,y)=>(f(),L(e(b),{key:y},{default:l(()=>[a(e(p),null,{default:l(()=>[n(o(r.size_id),1)]),_:2},1024),a(e(p),null,{default:l(()=>[n(o(r.variant),1)]),_:2},1024),a(e(p),null,{default:l(()=>[n(o(r.qty_system),1)]),_:2},1024),a(e(p),null,{default:l(()=>[n(o(r.qty_physical),1)]),_:2},1024),a(e(p),{class:M(r.difference<0?"text-red-600":"text-green-600")},{default:l(()=>[n(o(r.difference),1)]),_:2},1032,["class"]),a(e(p),null,{default:l(()=>[n(o(r.note||"-"),1)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),s("div",Z,[s("button",{onClick:t[0]||(t[0]=r=>e(Q).visit("/stock-opnames")),class:"bg-gray-200 hover:bg-gray-300 text-gray-800 px-4 py-2 rounded"}," Back ")])])):v.value?(f(),_("div",G,"Loading...")):(f(),_("div",J,"No data found."))])]}),_:1})],64))}});export{nt as default};
