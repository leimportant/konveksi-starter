import{_ as W}from"./AppLayout.vue_vue_type_script_setup_true_lang-CRvYir_q.js";import{U as X,b as w,d as ee,r as V,T as te,q as ae,c as se,o as ie,e as le,f as h,g as v,p as a,u as e,Z as re,x as i,k as f,D as g,y as c,V as oe,F,B as E,E as ne,j as P,z as de,aY as j,aZ as q,a_ as z,a$ as A,C as D,b0 as I}from"./app-ES40TwV8.js";import{_ as S}from"./Input.vue_vue_type_script_setup_true_lang-Dd0BZ7q_.js";import{_ as ue,a as ce,b as M,c as U,d as fe,e as B}from"./TableRow.vue_vue_type_script_setup_true_lang-D0ldoZlp.js";import{u as pe}from"./useToast-3q3NZr1O.js";import{_ as R}from"./Checkbox.vue_vue_type_script_setup_true_lang-BblXeWrW.js";import{_ as T}from"./Label.vue_vue_type_script_setup_true_lang-07byIOCF.js";import{P as me}from"./plus-CwxHbnnS.js";import{S as _e}from"./square-pen-djKk-N-9.js";import{T as ye}from"./trash-2-DvRL14oQ.js";import"./index-P5wiNW0v.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-CjluVPN9.js";import"./check-CaiB9tjK.js";const ve=X("priceType",{state:()=>({priceTypes:[],total:0,loaded:!1,loading:!1,currentPage:1,lastPage:1,filterName:"",error:void 0}),actions:{async fetchPriceTypes(m=1,r=10){var o,n;this.loading=!0;try{const u=await w.get("/api/price-types",{params:{page:m,perPage:r,name:this.filterName}});this.priceTypes=u.data.data,this.total=u.data.total,this.currentPage=m,this.lastPage=u.data.last_page||1,this.loaded=!0}catch(u){throw this.error=((n=(o=u.response)==null?void 0:o.data)==null?void 0:n.message)||"Failed to fetch price types",u}finally{this.loading=!1}},setFilter(m,r){m==="name"&&(this.filterName=r,this.currentPage=1,this.fetchPriceTypes(1))},async createPriceType(m){var r,o;this.loading=!0;try{const n=await w.post("/api/price-types",m);return await this.fetchPriceTypes(),n.data}catch(n){throw this.error=((o=(r=n.response)==null?void 0:r.data)==null?void 0:o.message)||"Failed to create price type",n}finally{this.loading=!1}},async updatePriceType(m,r){var o,n;this.loading=!0;try{const u=await w.put(`/api/price-types/${m}`,r);return await this.fetchPriceTypes(),u.data}catch(u){throw this.error=((n=(o=u.response)==null?void 0:o.data)==null?void 0:n.message)||"Failed to update price type",u}finally{this.loading=!1}},async deletePriceType(m){var r,o;this.loading=!0;try{await w.delete(`/api/price-types/${m}`),await this.fetchPriceTypes()}catch(n){throw this.error=((o=(r=n.response)==null?void 0:r.data)==null?void 0:o.message)||"Failed to delete price type",n}finally{this.loading=!1}}}}),ge={class:"px-4 py-4"},he={class:"flex justify-between items-center gap-2 mb-2"},be={class:"rounded-md border"},Pe={class:"flex justify-end mt-4 space-x-2"},xe=["disabled"],we=["onClick","disabled"],Te=["disabled"],ke={class:"space-y-4"},$e={key:0,class:"text-red-500 text-xs mt-1"},Ce={class:"flex items-center space-x-2"},Ne={class:"flex justify-end gap-2"},Ve={class:"space-y-4"},Fe={key:0,class:"text-red-500 text-xs mt-1"},Se={class:"flex items-center space-x-2"},Ue={class:"flex justify-end gap-2"},Ge=ee({__name:"Index",setup(m){const r=pe(),o=V(!1),n=V(!1),u=V(null),l=te({name:"",is_active:!0}),y=ve(),{priceTypes:Z,currentPage:b,lastPage:L,loading:x,filterName:k}=ae(y),$=se(()=>L.value||1),C=async d=>{d<1||d>$.value||await y.fetchPriceTypes(d)},Y=()=>C(b.value+1),G=()=>C(b.value-1),H=(d,t)=>{const p=t.target;y.setFilter(d,p.value)};ie(async()=>{await y.fetchPriceTypes()});const J=async()=>{var d,t,p,s;if(!l.name)return r.error("Name is required");try{await y.createPriceType({name:l.name,is_active:l.is_active}),r.success("Price Type created successfully"),l.reset(),o.value=!1}catch(_){const N=(s=(p=(t=(d=_==null?void 0:_.response)==null?void 0:d.data)==null?void 0:t.errors)==null?void 0:p.name)==null?void 0:s[0];r.error(N||"Failed to create Price Type")}},K=d=>{u.value=d,l.name=d.name,l.is_active=d.is_active,n.value=!0},O=async()=>{var d,t,p,s;if(!u.value||!l.name)return r.error("Name is required");try{await y.updatePriceType(u.value.id,{name:l.name,is_active:l.is_active}),r.success("Price Type updated successfully"),l.reset(),await y.fetchPriceTypes(),n.value=!1,u.value=null}catch(_){const N=(s=(p=(t=(d=_==null?void 0:_.response)==null?void 0:d.data)==null?void 0:t.errors)==null?void 0:p.name)==null?void 0:s[0];r.error(N||"Failed to update Price Type")}},Q=async d=>{var t,p;try{await y.deletePriceType(d),r.success("Price Type deleted successfully")}catch(s){r.error(((p=(t=s==null?void 0:s.response)==null?void 0:t.data)==null?void 0:p.message)??"Failed to delete Price Type")}};return(d,t)=>{const p=le("Badge");return v(),h(F,null,[a(e(re),{title:"Price Types"}),a(W,null,{default:i(()=>[f("div",ge,[f("div",he,[a(e(g),{onClick:t[0]||(t[0]=s=>o.value=!0),class:"bg-indigo-600 text-white py-2 h-10 rounded-md hover:bg-indigo-700 focus:ring-2 focus:ring-indigo-500"},{default:i(()=>[a(e(me),{class:"h-4 w-4"}),t[11]||(t[11]=c(" Tambah data "))]),_:1,__:[11]}),a(e(S),{modelValue:e(k),"onUpdate:modelValue":t[1]||(t[1]=s=>oe(k)?k.value=s:null),placeholder:"Search",onInput:t[2]||(t[2]=s=>H("name",s)),class:"w-64","aria-label":"Search",disabled:e(x)},null,8,["modelValue","disabled"])]),f("div",be,[a(e(ue),null,{default:i(()=>[a(e(ce),null,{default:i(()=>[a(e(M),{class:"bg-gray-100"},{default:i(()=>[a(e(U),null,{default:i(()=>t[12]||(t[12]=[c("Name")])),_:1,__:[12]}),a(e(U),null,{default:i(()=>t[13]||(t[13]=[c("Status")])),_:1,__:[13]}),a(e(U),{class:"w-24"},{default:i(()=>t[14]||(t[14]=[c("Actions")])),_:1,__:[14]})]),_:1})]),_:1}),a(e(fe),null,{default:i(()=>[(v(!0),h(F,null,E(e(Z),s=>(v(),ne(e(M),{key:s.id},{default:i(()=>[a(e(B),null,{default:i(()=>[c(P(s.name),1)]),_:2},1024),a(e(B),null,{default:i(()=>[a(p,{variant:s.is_active?"default":"secondary"},{default:i(()=>[c(P(s.is_active?"Active":"Inactive"),1)]),_:2},1032,["variant"])]),_:2},1024),a(e(B),{class:"flex gap-2"},{default:i(()=>[a(e(g),{variant:"ghost",size:"icon",onClick:_=>K(s)},{default:i(()=>[a(e(_e),{class:"h-4 w-4"})]),_:2},1032,["onClick"]),a(e(g),{variant:"ghost",size:"icon",onClick:_=>Q(s.id)},{default:i(()=>[a(e(ye),{class:"h-4 w-4"})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),f("div",Pe,[f("button",{onClick:G,disabled:e(b)===1||e(x),class:"px-3 py-1 rounded border border-gray-300 text-gray-700 hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed"}," Previous ",8,xe),(v(!0),h(F,null,E($.value,s=>(v(),h("button",{key:s,onClick:_=>C(s),class:de(["px-3 py-1 rounded border text-sm",s===e(b)?"bg-blue-600 border-blue-600 text-white":"border-gray-300 text-gray-700 hover:bg-gray-100"]),disabled:e(x)},P(s),11,we))),128)),f("button",{onClick:Y,disabled:e(b)===$.value||e(x),class:"px-3 py-1 rounded border border-gray-300 text-gray-700 hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed"}," Next ",8,Te)]),a(e(j),{open:o.value,"onUpdate:open":t[6]||(t[6]=s=>o.value=s)},{default:i(()=>[a(e(q),null,{default:i(()=>[a(e(z),null,{default:i(()=>[a(e(A),null,{default:i(()=>t[15]||(t[15]=[c("Create Price Type")])),_:1,__:[15]})]),_:1}),f("div",ke,[f("div",null,[a(e(T),null,{default:i(()=>t[16]||(t[16]=[c("Name")])),_:1,__:[16]}),a(e(S),{modelValue:e(l).name,"onUpdate:modelValue":t[3]||(t[3]=s=>e(l).name=s),type:"text"},null,8,["modelValue"]),e(l).errors.name?(v(),h("p",$e,P(e(l).errors.name),1)):D("",!0)]),f("div",Ce,[a(e(R),{id:"is_active",checked:e(l).is_active,"onUpdate:checked":t[4]||(t[4]=s=>e(l).is_active=s)},null,8,["checked"]),a(e(T),{for:"is_active"},{default:i(()=>t[17]||(t[17]=[c("Active")])),_:1,__:[17]})])]),a(e(I),null,{default:i(()=>[f("div",Ne,[a(e(g),{type:"button",variant:"outline",onClick:t[5]||(t[5]=s=>o.value=!1),class:"h-10"},{default:i(()=>t[18]||(t[18]=[c("Cancel")])),_:1,__:[18]}),a(e(g),{onClick:J,class:"bg-indigo-600 text-white py-2 h-10 rounded-md hover:bg-indigo-700 focus:ring-2 focus:ring-indigo-500"},{default:i(()=>t[19]||(t[19]=[c("Save")])),_:1,__:[19]})])]),_:1})]),_:1})]),_:1},8,["open"]),a(e(j),{open:n.value,"onUpdate:open":t[10]||(t[10]=s=>n.value=s)},{default:i(()=>[a(e(q),null,{default:i(()=>[a(e(z),null,{default:i(()=>[a(e(A),null,{default:i(()=>t[20]||(t[20]=[c("Edit Price Type")])),_:1,__:[20]})]),_:1}),f("div",Ve,[f("div",null,[a(e(T),null,{default:i(()=>t[21]||(t[21]=[c("Name")])),_:1,__:[21]}),a(e(S),{modelValue:e(l).name,"onUpdate:modelValue":t[7]||(t[7]=s=>e(l).name=s),type:"text"},null,8,["modelValue"]),e(l).errors.name?(v(),h("p",Fe,P(e(l).errors.name),1)):D("",!0)]),f("div",Se,[a(e(R),{id:"is_active",checked:e(l).is_active,"onUpdate:checked":t[8]||(t[8]=s=>e(l).is_active=s)},null,8,["checked"]),a(e(T),{for:"is_active"},{default:i(()=>t[22]||(t[22]=[c("Active")])),_:1,__:[22]})])]),a(e(I),null,{default:i(()=>[f("div",Ue,[a(e(g),{type:"button",variant:"outline",onClick:t[9]||(t[9]=s=>o.value=!1),class:"h-10"},{default:i(()=>t[23]||(t[23]=[c("Cancel")])),_:1,__:[23]}),a(e(g),{onClick:O,class:"bg-indigo-600 text-white py-2 h-10 rounded-md hover:bg-indigo-700 focus:ring-2 focus:ring-indigo-500"},{default:i(()=>t[24]||(t[24]=[c("Update")])),_:1,__:[24]})])]),_:1})]),_:1})]),_:1},8,["open"])])]),_:1})],64)}}});export{Ge as default};
