import{d as A,r as C,q as M,o as U,w as R,c as Z,f as v,g as i,p as o,u as t,Z as G,x as s,k as a,E as N,D as m,y as n,F as I,B as P,j as r,z as H,aS as J,C as z,b as K}from"./app-Di3VD2wF.js";import{_ as S}from"./Input.vue_vue_type_script_setup_true_lang-YgRub-mj.js";import{_ as O,a as W,b as Q,c as f,d as X,e as _}from"./TableRow.vue_vue_type_script_setup_true_lang-sJPd0PKL.js";import{u as Y}from"./useToast-CJi-_njE.js";import{_ as ee}from"./AppLayout.vue_vue_type_script_setup_true_lang-YamAR-Dq.js";import{u as te}from"./useInventoryStore-j2voF-Fy.js";import{P as le}from"./plus-Dq8C2eKT.js";import{S as oe}from"./square-pen-C71ayQ9p.js";import{T as se}from"./trash-2-DlkDCp_O.js";import"./index-DnLtb5dp.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-CVeNkWmG.js";const ae={class:"px-4 py-4"},ne={class:"mb-6 flex items-center justify-between"},re={class:"rounded-md border"},de={class:"flex justify-end gap-2"},ue={class:"mt-4 flex justify-end space-x-2"},ie=["disabled"],fe=["onClick"],_e=["disabled"],ye={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm p-4"},ce={class:"w-full max-w-sm rounded-2xl bg-white shadow-xl"},ve={key:0,class:"space-y-3 px-5 py-4 text-sm text-gray-700"},me={class:"grid grid-cols-2 gap-2"},pe={class:"flex justify-end gap-2 border-t px-5 py-3"},Qe=A({__name:"Index",setup(be){const p=Y(),b=C(!1),g=C(0),d=C(null),y=te(),{inventoryRpt:V,filters:w,currentPage:c,loading:E,lastPage:q}=M(y),D=[{title:"Inventory",href:"/inventory"}];U(async()=>{await y.fetchInventory(1)}),R(w,async()=>{await y.fetchInventory(1)},{deep:!0});const $=Z(()=>q.value||1),k=async u=>{u<1||u>$.value||await y.fetchInventory(u)},T=()=>k(c.value+1),h=()=>k(c.value-1),j=u=>{b.value=!0,d.value=u,g.value=u.qty},B=async()=>{if(d.value)try{await K.put(`/api/inventory/${d.value.product_id}/${d.value.location_id}/${d.value.sloc_id}/${d.value.size_id}`,{qty:g.value}),p.success("Inventory updated successfully"),b.value=!1,await y.fetchInventory(c.value)}catch(u){console.error("Error updating inventory:",u),p.error("Failed to update inventory")}},F=async(u,e,l,x)=>{if(confirm("Are you sure you want to delete this inventory?"))try{await y.deleteInventory(u,e,l,x),p.success("Inventory deleted"),await y.fetchInventory(c.value)}catch(L){console.error("Error deleting inventory:",L),p.error("Failed to delete inventory")}};return(u,e)=>(i(),v(I,null,[o(t(G),{title:"Inventory Management"}),o(ee,{breadcrumbs:D},{default:s(()=>[a("div",ae,[a("div",ne,[o(t(m),{onClick:e[0]||(e[0]=l=>u.$inertia.visit("/inventory/create")),class:"gap-2 bg-blue-600 text-white hover:bg-blue-700"},{default:s(()=>[o(t(le),{class:"h-4 w-4"}),e[4]||(e[4]=n(" Add "))]),_:1,__:[4]}),o(t(S),{modelValue:t(w).productName,"onUpdate:modelValue":e[1]||(e[1]=l=>t(w).productName=l),placeholder:"Search",class:"w-64 border-gray-300 focus:border-blue-500 focus:ring-blue-500","aria-label":"Search",disabled:t(E)},null,8,["modelValue","disabled"])]),a("div",re,[o(t(O),null,{default:s(()=>[o(t(W),{class:"bg-gray-100"},{default:s(()=>[o(t(Q),null,{default:s(()=>[o(t(f),null,{default:s(()=>e[5]||(e[5]=[n("Product ID")])),_:1,__:[5]}),o(t(f),null,{default:s(()=>e[6]||(e[6]=[n("Product Name")])),_:1,__:[6]}),o(t(f),null,{default:s(()=>e[7]||(e[7]=[n("Location")])),_:1,__:[7]}),o(t(f),null,{default:s(()=>e[8]||(e[8]=[n("SLoc")])),_:1,__:[8]}),o(t(f),null,{default:s(()=>e[9]||(e[9]=[n("Unit")])),_:1,__:[9]}),o(t(f),null,{default:s(()=>e[10]||(e[10]=[n("Size")])),_:1,__:[10]}),o(t(f),null,{default:s(()=>e[11]||(e[11]=[n("Qty")])),_:1,__:[11]}),o(t(f),null,{default:s(()=>e[12]||(e[12]=[n("Action")])),_:1,__:[12]})]),_:1})]),_:1}),o(t(X),null,{default:s(()=>[(i(!0),v(I,null,P(t(V),l=>(i(),N(t(Q),{key:`${l.product_id}-${l.location_id}-${l.sloc_id}-${l.size_id}`},{default:s(()=>[o(t(_),null,{default:s(()=>[n(r(l.product_id),1)]),_:2},1024),o(t(_),null,{default:s(()=>[n(r(l.product_name),1)]),_:2},1024),o(t(_),null,{default:s(()=>[n(r(l.location_name),1)]),_:2},1024),o(t(_),null,{default:s(()=>[n(r(l.sloc_name),1)]),_:2},1024),o(t(_),null,{default:s(()=>[n(r(l.uom_id),1)]),_:2},1024),o(t(_),null,{default:s(()=>[n(r(l.size_id),1)]),_:2},1024),o(t(_),null,{default:s(()=>[n(r(l.qty),1)]),_:2},1024),o(t(_),null,{default:s(()=>[a("div",de,[o(t(m),{variant:"ghost",size:"icon",onClick:x=>j({...l,product_id:Number(l.product_id),location_id:Number(l.location_id),qty:Number(l.qty)})},{default:s(()=>[o(t(oe),{class:"h-4 w-4"})]),_:2},1032,["onClick"]),o(t(m),{variant:"ghost",size:"icon",onClick:x=>F(Number(l.product_id),Number(l.location_id),l.sloc_id,l.size_id)},{default:s(()=>[o(t(se),{class:"h-4 w-4"})]),_:2},1032,["onClick"])])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),a("div",ue,[a("button",{onClick:h,disabled:t(c)===1,class:"rounded border border-gray-300 px-3 py-1 text-gray-700 hover:bg-gray-100 disabled:opacity-50"}," Previous ",8,ie),(i(!0),v(I,null,P($.value,l=>(i(),v("button",{key:l,onClick:x=>k(l),class:H(["rounded border px-3 py-1 text-sm",l===t(c)?"border-blue-600 bg-blue-600 text-white":"border-gray-300 text-gray-700 hover:bg-gray-100"])},r(l),11,fe))),128)),a("button",{onClick:T,disabled:t(c)===$.value,class:"rounded border border-gray-300 px-3 py-1 text-gray-700 hover:bg-gray-100 disabled:opacity-50"}," Next ",8,_e)])]),(i(),N(J,{to:"body"},[b.value?(i(),v("div",ye,[a("div",ce,[e[21]||(e[21]=a("div",{class:"border-b px-5 py-4"},[a("h2",{class:"text-lg font-semibold text-gray-800"},"Edit Quantity")],-1)),d.value?(i(),v("div",ve,[a("div",me,[e[13]||(e[13]=a("span",{class:"font-medium"},"Product ID:",-1)),a("span",null,r(d.value.product_id),1),e[14]||(e[14]=a("span",{class:"font-medium"},"Product Name:",-1)),a("span",null,r(d.value.product_name),1),e[15]||(e[15]=a("span",{class:"font-medium"},"Location:",-1)),a("span",null,r(d.value.location_name),1),e[16]||(e[16]=a("span",{class:"font-medium"},"Size:",-1)),a("span",null,r(d.value.size_id),1),e[17]||(e[17]=a("span",{class:"font-medium"},"Current Qty:",-1)),a("span",null,r(d.value.qty),1)]),a("div",null,[e[18]||(e[18]=a("label",{for:"newQty",class:"block text-sm font-medium text-gray-700 mb-1"}," New Quantity ",-1)),o(t(S),{id:"newQty",modelValue:g.value,"onUpdate:modelValue":e[2]||(e[2]=l=>g.value=l),modelModifiers:{number:!0},type:"number",min:"0",class:"w-full"},null,8,["modelValue"])])])):z("",!0),a("div",pe,[o(t(m),{variant:"ghost",onClick:e[3]||(e[3]=l=>b.value=!1),class:"h-10"},{default:s(()=>e[19]||(e[19]=[n("Cancel")])),_:1,__:[19]}),o(t(m),{onClick:B,class:"bg-blue-600 text-white hover:bg-blue-700"},{default:s(()=>e[20]||(e[20]=[n(" Save ")])),_:1,__:[20]})])])])):z("",!0)]))]),_:1})],64))}});export{Qe as default};
