import{d as T,r as c,o as $,w as I,f as p,g as f,p as n,u as t,Z as N,x as a,k as u,l as g,m as b,j as s,y as o,F as v,B as R,E as V}from"./app-ES40TwV8.js";import{_ as B,a as C,b as S,c as _,d as M,e as i}from"./TableRow.vue_vue_type_script_setup_true_lang-D0ldoZlp.js";import{_ as U}from"./AppLayout.vue_vue_type_script_setup_true_lang-CRvYir_q.js";import{u as F}from"./useReportStore-ClshySPw.js";import"./index-P5wiNW0v.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-CjluVPN9.js";const L={class:"p-4"},O={class:"mb-4 flex flex-wrap gap-2"},h={key:0},A={key:1,class:"text-red-500"},E={key:2,class:"text-gray-500"},j={key:3,class:"overflow-auto"},W={class:"mt-4 flex justify-end space-x-2"},q=["disabled"],K={class:"py-1"},Q=["disabled"],tt=T({__name:"ProductionDetailReport",setup(Y){const r=F(),m=c(""),y=c(""),x=c(""),D=c(""),k=()=>{r.fetchProductionDetail(m.value,y.value,x.value,Number(r.currentPage),D.value)},w=d=>d?new Date(d).toLocaleDateString("id-ID",{year:"numeric",month:"long",day:"numeric"}):"-",P=d=>typeof d!="number"||isNaN(d)?"":new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(d);return $(()=>{const d=new Date,e=new Date(d.getFullYear(),d.getMonth(),1);m.value=e.toISOString().split("T")[0],y.value=d.toISOString().split("T")[0],k()}),I(()=>r.currentPage,k),(d,e)=>(f(),p(v,null,[n(t(N),{title:"Production Detail Report"}),n(U,null,{header:a(()=>e[6]||(e[6]=[u("h2",{class:"text-sm font-semibold text-gray-800"},"Production Detail Report",-1)])),default:a(()=>[u("div",L,[u("div",O,[g(u("input",{type:"date","onUpdate:modelValue":e[0]||(e[0]=l=>m.value=l),class:"rounded border px-2 py-1"},null,512),[[b,m.value]]),g(u("input",{type:"date","onUpdate:modelValue":e[1]||(e[1]=l=>y.value=l),class:"rounded border px-2 py-1"},null,512),[[b,y.value]]),g(u("input",{type:"text","onUpdate:modelValue":e[2]||(e[2]=l=>D.value=l),placeholder:"Cari Model",class:"rounded border px-2 py-1"},null,512),[[b,D.value]]),g(u("input",{type:"text","onUpdate:modelValue":e[3]||(e[3]=l=>x.value=l),placeholder:"Search by product name / variant",class:"rounded border px-2 py-1"},null,512),[[b,x.value]]),u("button",{onClick:k,class:"rounded bg-blue-600 px-4 py-1 text-white hover:bg-blue-700"},"Tampilkan")]),t(r).loading?(f(),p("div",h,"Loading...")):t(r).error?(f(),p("div",A,"Error: "+s(t(r).error.message),1)):t(r).productionDetailItem.length===0?(f(),p("div",E,"Tidak ada data ditampilkan.")):(f(),p("div",j,[n(t(B),null,{default:a(()=>[n(t(C),null,{default:a(()=>[n(t(S),{class:"bg-gray-100"},{default:a(()=>[n(t(_),null,{default:a(()=>e[7]||(e[7]=[o("Tanggal")])),_:1,__:[7]}),n(t(_),null,{default:a(()=>e[8]||(e[8]=[o("Staff")])),_:1,__:[8]}),n(t(_),null,{default:a(()=>e[9]||(e[9]=[o("Model")])),_:1,__:[9]}),n(t(_),null,{default:a(()=>e[10]||(e[10]=[o("Activity Role")])),_:1,__:[10]}),n(t(_),null,{default:a(()=>e[11]||(e[11]=[o("Variant")])),_:1,__:[11]}),n(t(_),null,{default:a(()=>e[12]||(e[12]=[o("Qty")])),_:1,__:[12]}),n(t(_),null,{default:a(()=>e[13]||(e[13]=[o("Unit Price")])),_:1,__:[13]}),n(t(_),null,{default:a(()=>e[14]||(e[14]=[o("Subtotal")])),_:1,__:[14]})]),_:1})]),_:1}),n(t(M),null,{default:a(()=>[(f(!0),p(v,null,R(t(r).productionDetailItem,l=>(f(),V(t(S),{key:l.model_id},{default:a(()=>[l.staff_name&&(l.staff_name.startsWith("SUBTOTAL")||l.staff_name.startsWith("TOTAL"))?(f(),p(v,{key:0},[n(t(i),{colspan:7,class:"text-center font-bold"},{default:a(()=>[o(s(l.staff_name),1)]),_:2},1024),n(t(i),{class:"font-bold"},{default:a(()=>[o(s(P(l.total)),1)]),_:2},1024)],64)):(f(),p(v,{key:1},[n(t(i),null,{default:a(()=>[o(s(w(l.created_at)),1)]),_:2},1024),n(t(i),null,{default:a(()=>[o(s(l.staff_name),1)]),_:2},1024),n(t(i),null,{default:a(()=>[o(s(l.model_name),1)]),_:2},1024),n(t(i),null,{default:a(()=>[o(s(l.activity_role_name),1)]),_:2},1024),n(t(i),null,{default:a(()=>[o(s(l.variant),1)]),_:2},1024),n(t(i),null,{default:a(()=>[o(s(l.qty),1)]),_:2},1024),n(t(i),null,{default:a(()=>[o(s(P(l.unit_price)),1)]),_:2},1024),n(t(i),null,{default:a(()=>[o(s(P(l.total)),1)]),_:2},1024)],64))]),_:2},1024))),128))]),_:1})]),_:1}),u("div",W,[u("button",{onClick:e[4]||(e[4]=l=>t(r).currentPage--),disabled:t(r).currentPage<=1,class:"rounded border bg-gray-100 px-3 py-1 hover:bg-gray-200 disabled:opacity-50"}," Previous ",8,q),u("span",K,"Page "+s(t(r).currentPage)+" of "+s(t(r).lastPage),1),u("button",{onClick:e[5]||(e[5]=l=>t(r).currentPage++),disabled:t(r).currentPage>=t(r).lastPage,class:"rounded border bg-gray-100 px-3 py-1 hover:bg-gray-200 disabled:opacity-50"}," Next ",8,Q)])]))])]),_:1})],64))}});export{tt as default};
