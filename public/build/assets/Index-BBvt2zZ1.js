import{d as B,q as L,o as V,f as c,g as u,p as n,u as o,Z as O,x as r,k as s,l as k,S as w,m as D,D as S,y as g,F as _,B as v,E as q,j as i,z as T,C as I}from"./app-s_VUL-pL.js";import{_ as U,a as A,b as $,c as C,d as F,e as j}from"./TableRow.vue_vue_type_script_setup_true_lang-CWR9XsoH.js";import{_ as R}from"./AppLayout.vue_vue_type_script_setup_true_lang-GCQNGHxL.js";import{u as G}from"./usePayrollStore-DZ3MPpYH.js";import{P as K}from"./printer-check-CTrgZsyI.js";import"./index-DyUzcNVM.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-BTsazKbx.js";const Q={class:"space-y-4 p-6"},Z={class:"grid grid-cols-2 gap-3 sm:grid-cols-2"},H={class:"flex flex-col"},J={class:"flex flex-col"},W={class:"flex items-center gap-2"},X={class:"overflow-hidden rounded-md border"},Y={class:"flex items-center justify-between rounded bg-gray-200 p-2 font-bold dark:bg-gray-700"},tt=["checked","onChange"],st={class:"flex-1 text-sm font-bold text-gray-800"},et={class:T(["grid text-[11px] text-gray-700 sm:grid-cols-2 sm:gap-x-4"])},ot={class:"flex justify-between"},lt={class:"font-bold text-gray-800"},at={class:"flex justify-between"},nt={class:"font-bold text-gray-800"},rt={class:"flex justify-between"},it={class:"font-bold text-gray-800"},dt={class:"flex items-center"},ut={class:"flex justify-between border-t pt-1 sm:border-t-0 sm:pt-0"},ct={class:"font-bold text-gray-900"},_t={class:"mt-2 flex gap-2"},ft={class:"w-full text-xs"},gt={class:"bg-gray-200 font-bold dark:bg-gray-700"},pt={colspan:"4",class:"px-3 py-2"},mt={class:"bg-blue-50 font-semibold"},yt={colspan:"4",class:"px-3 py-2"},bt={class:"p-2"},xt={class:"p-2 text-right"},vt={key:0},Tt=B({__name:"Index",setup(ht){const p=G(),{employees:N,startDate:m,endDate:y,selectedEmployees:z}=L(p),E=[{title:"Payroll Management",href:"/payroll"}];V(()=>{const d=new Date,t=new Date;t.setDate(d.getDate()-6),m.value=t.toISOString().split("T")[0],y.value=d.toISOString().split("T")[0],p.loadData()});const M=d=>{if(!d)return"-";const t=d.split("T")[0],[e,l,a]=t.split("-");return`${a}/${l}/${e}`},P=d=>{if(!d.details)return{};const t={};d.details.forEach(l=>{var b;const a=((b=l.created_at)==null?void 0:b.split("T")[0])||"-",f=l.model_desc||"-";t[a]||(t[a]={}),t[a][f]||(t[a][f]=[]),t[a][f].push(l)});const e={};return Object.keys(t).sort((l,a)=>a.localeCompare(l)).forEach(l=>{e[l]={},Object.keys(t[l]).sort().forEach(a=>{e[l][a]=t[l][a]})}),e};return(d,t)=>(u(),c(_,null,[n(o(O),{title:"Payroll Management"}),n(R,{breadcrumbs:E},{default:r(()=>[s("div",Q,[s("div",Z,[s("div",H,[t[2]||(t[2]=s("label",{class:"mb-1 text-xs font-medium"},"Start Date",-1)),k(s("input",{type:"date","onUpdate:modelValue":t[0]||(t[0]=e=>w(m)?m.value=e:null),class:"rounded-md border px-3 py-1.5 text-sm shadow-sm focus:border-indigo-500 focus:ring"},null,512),[[D,o(m),void 0,{lazy:!0}]])]),s("div",J,[t[3]||(t[3]=s("label",{class:"mb-1 text-xs font-medium"},"End Date",-1)),k(s("input",{type:"date","onUpdate:modelValue":t[1]||(t[1]=e=>w(y)?y.value=e:null),class:"rounded-md border px-3 py-1.5 text-sm shadow-sm focus:border-indigo-500 focus:ring"},null,512),[[D,o(y),void 0,{lazy:!0}]])])]),s("div",W,[n(o(S),{onClick:o(p).loadData,size:"sm",class:"rounded bg-blue-600 px-4 py-2 text-sm text-white hover:bg-blue-700"},{default:r(()=>t[4]||(t[4]=[g(" Tampilkan ")])),_:1,__:[4]},8,["onClick"])]),s("div",X,[n(o(U),null,{default:r(()=>[n(o(A),null,{default:r(()=>[n(o($),{class:"bg-gray-50"},{default:r(()=>[n(o(C),null,{default:r(()=>t[5]||(t[5]=[g("Karyawan")])),_:1,__:[5]}),n(o(C),null,{default:r(()=>t[6]||(t[6]=[g("Detail")])),_:1,__:[6]})]),_:1})]),_:1}),n(o(F),null,{default:r(()=>[(u(!0),c(_,null,v(o(N),e=>(u(),q(o($),{key:e.employee_id,class:"bg-white align-top hover:bg-gray-50"},{default:r(()=>[n(o(j),{class:"align-top"},{default:r(()=>{var l;return[s("div",Y,[s("input",{type:"checkbox",checked:o(z).includes(e.employee_id),onChange:()=>o(p).toggleSelect(e.employee_id),class:"mr-2 h-4 w-4"},null,40,tt),s("span",st,i((l=e.employee)==null?void 0:l.name),1),s("span",{class:T(["rounded-md border px-2 py-0.5 text-[10px] font-semibold capitalize",e.status==="closed"?"border-green-300 bg-green-50 text-green-700":"border-yellow-300 bg-yellow-50 text-yellow-700"])},i(e.status),3)]),s("div",et,[s("div",ot,[t[7]||(t[7]=s("span",null,"Qty",-1)),s("span",lt,i(e.total_qty),1)]),s("div",at,[t[8]||(t[8]=s("span",null,"Upah",-1)),s("span",nt,i(Number(e.total_upah).toLocaleString()),1)]),s("div",rt,[t[9]||(t[9]=s("span",null,"Makan",-1)),s("span",it,i(Number(e.uang_makan).toLocaleString()),1)]),s("div",dt,[t[10]||(t[10]=s("span",null,"Potongan",-1)),t[11]||(t[11]=s("div",{class:"mx-2 flex-grow border-b border-dotted"},null,-1)),g(" "+i(Number(e.potongan).toLocaleString()),1)]),s("div",ut,[t[12]||(t[12]=s("span",{class:"font-semibold text-gray-800"},"Total Gaji",-1)),s("span",ct,i(Number(e.net_gaji).toLocaleString()),1)]),s("div",_t,[n(o(S),{variant:"ghost",size:"icon",class:"hover:bg-gray-100 dark:hover:bg-gray-700",onClick:a=>d.$inertia.visit(`/payroll/${e.id}/view`)},{default:r(()=>[n(o(K),{class:"h-4 w-4"}),t[13]||(t[13]=g(" Payslip "))]),_:2,__:[13]},1032,["onClick"])])])]}),_:2},1024),n(o(j),{class:"p-0 align-top sm:p-2"},{default:r(()=>{var l;return[s("table",ft,[(u(!0),c(_,null,v(P(e),(a,f)=>(u(),c(_,{key:f},[s("tr",gt,[s("td",pt,"ðŸ“… "+i(M(f)),1)]),(u(!0),c(_,null,v(a,(b,h)=>(u(),c(_,{key:h},[s("tr",mt,[s("td",yt,"ðŸ§µ Model: "+i(h),1)]),(u(!0),c(_,null,v(b,x=>(u(),c("tr",{key:x.id,class:"border-b bg-white"},[s("td",bt,i(x.size_id)+" - "+i(x.variant),1),s("td",xt,i(Number(x.qty).toLocaleString()),1)]))),128))],64))),128))],64))),128)),(l=e.details)!=null&&l.length?I("",!0):(u(),c("tr",vt,t[14]||(t[14]=[s("td",{colspan:"4",class:"p-4 text-center text-gray-500"},"Tidak ada data rincian aktivitas.",-1)])))])]}),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})])])]),_:1})],64))}});export{Tt as default};
