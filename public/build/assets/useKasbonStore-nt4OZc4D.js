import{R as h,b as o}from"./app-BjS9V559.js";const g=h("kasbon",{state:()=>({kasbonList:[],mutasiList:[],summary:[],pagination:{current_page:1,per_page:50,total:0},loading:!1,error:null}),actions:{async fetchKasbon(e=1,s=50,t={}){var a,i;this.loading=!0;try{const r={page:e,per_page:s,search:t.search,status:t.status},n=await o.get("/api/kasbon",{params:r});this.kasbonList=n.data.data??[],this.pagination.current_page=n.data.current_page??1,this.pagination.per_page=n.data.per_page??50,this.pagination.total=n.data.total??0}catch(r){this.error=((i=(a=r.response)==null?void 0:a.data)==null?void 0:i.message)??r.message}finally{this.loading=!1}},async storeKasbon(e){var s,t;this.loading=!0;try{await o.post("/api/kasbon/store",e),await this.fetchKasbon()}catch(a){throw this.error=((t=(s=a.response)==null?void 0:s.data)==null?void 0:t.message)??a.message,a}finally{this.loading=!1}},async updateKasbon(e,s){var t,a;this.loading=!0;try{await o.put(`/api/kasbon/${e}`,s),await this.fetchKasbon()}catch(i){throw this.error=((a=(t=i.response)==null?void 0:t.data)==null?void 0:a.message)??i.message,i}finally{this.loading=!1}},async deleteKasbon(e){var s,t;if(confirm("Yakin ingin menghapus kasbon ini?")){this.loading=!0;try{await o.delete(`/api/kasbon/${e}`),await this.fetchKasbon()}catch(a){this.error=((t=(s=a.response)==null?void 0:s.data)==null?void 0:t.message)??a.message}finally{this.loading=!1}}},async approveKasbon(e){var s,t;this.loading=!0;try{await o.post(`/api/kasbon/${e}/approve`),await this.fetchKasbon()}catch(a){throw this.error=((t=(s=a.response)==null?void 0:s.data)==null?void 0:t.message)??a.message,a}finally{this.loading=!1}},async rejectKasbon(e,s){var t,a;this.loading=!0;try{await o.post(`/api/kasbon/${e}/reject`,{remark:s}),await this.fetchKasbon()}catch(i){throw this.error=((a=(t=i.response)==null?void 0:t.data)==null?void 0:a.message)??i.message,i}finally{this.loading=!1}},async fetchMutasi(e=1,s=50,t={}){var a,i;this.loading=!0;try{const r={page:e,per_page:s,...t},n=await o.get("/api/kasbon/mutation",{params:r});this.mutasiList=n.data.data??[],this.pagination.current_page=n.data.current_page??1,this.pagination.per_page=n.data.per_page??50,this.pagination.total=n.data.total??0}catch(r){throw this.error=((i=(a=r.response)==null?void 0:a.data)==null?void 0:i.message)??r.message,r}finally{this.loading=!1}}}});export{g as u};
