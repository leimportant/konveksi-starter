import{d as P,r as V,c as T,o as q,f as _,g as u,p as a,u as t,Z as B,x as o,k as c,D as F,y as n,j as s,F as g,B as x,E as S}from"./app-BEPvCQbj.js";import{_ as w}from"./Input.vue_vue_type_script_setup_true_lang-BgmhXku8.js";import{_ as M,a as h,b as $,c as p,d as O,e as d}from"./TableRow.vue_vue_type_script_setup_true_lang-8JBIeDXU.js";import{_ as C}from"./AppLayout.vue_vue_type_script_setup_true_lang-BLPKlCaC.js";import{u as U}from"./useReportStore-D9VvYDDB.js";import"./index-DH-OK387.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-vqTKA5IJ.js";const j={class:"py-6"},A={class:"mx-auto max-w-7xl sm:px-2 lg:px-2"},L={class:"overflow-hidden bg-white shadow-sm sm:rounded-lg"},Q={class:"mb-4 flex space-x-4"},K={key:0},Y={key:1,class:"text-red-500"},Z={key:2},lt=P({__name:"ProductionSummary",setup(z){const I=[{title:"Report Production Summary",href:"/reports/production-summary"}],i=U(),v=V(""),b=V(""),D=V(""),R=()=>{i.fetchProductionSummary(v.value,b.value,D.value)},N=r=>typeof r!="number"||isNaN(r)?"0,00":new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:2}).format(r),k=T(()=>{const r=new Map;return i.productionSummary.forEach(e=>{if(e.activities)for(const[l,m]of Object.entries(e.activities)){const f=Number(l);r.has(f)||r.set(f,m.name||`Role ${f}`)}}),Array.from(r.entries()).map(([e,l])=>({id:e,name:l}))});return q(()=>{const r=new Date,e=new Date(r.getFullYear(),r.getMonth(),1);v.value=e.toISOString().split("T")[0],b.value=r.toISOString().split("T")[0],R()}),(r,e)=>(u(),_(g,null,[a(t(B),{title:"Production Summary Report"}),a(C,{breadcrumbs:I},{header:o(()=>e[3]||(e[3]=[c("h2",{class:"text-xl font-semibold leading-tight text-gray-800"},"Production Summary Report",-1)])),default:o(()=>[c("div",j,[c("div",A,[c("div",L,[c("div",Q,[a(t(w),{type:"date",modelValue:v.value,"onUpdate:modelValue":e[0]||(e[0]=l=>v.value=l)},null,8,["modelValue"]),a(t(w),{type:"date",modelValue:b.value,"onUpdate:modelValue":e[1]||(e[1]=l=>b.value=l)},null,8,["modelValue"]),a(t(w),{type:"text",modelValue:D.value,"onUpdate:modelValue":e[2]||(e[2]=l=>D.value=l),placeholder:"Search by product name"},null,8,["modelValue"]),a(t(F),{onClick:R,class:"bg-indigo-600 text-white py-2 h-10 rounded-md hover:bg-indigo-700 focus:ring-2 focus:ring-indigo-500"},{default:o(()=>e[4]||(e[4]=[n("Tampilkan")])),_:1,__:[4]})]),t(i).loading?(u(),_("div",K,"Loading...")):t(i).error?(u(),_("div",Y,"Error: "+s(t(i).error.message),1)):(u(),_("div",Z,[a(t(M),null,{default:o(()=>[a(t(h),null,{default:o(()=>[a(t($),{class:"bg-gray-100"},{default:o(()=>[a(t(p),null,{default:o(()=>e[5]||(e[5]=[n("ID")])),_:1,__:[5]}),a(t(p),null,{default:o(()=>e[6]||(e[6]=[n("Description")])),_:1,__:[6]}),a(t(p),null,{default:o(()=>e[7]||(e[7]=[n("Estimation Price/Pcs")])),_:1,__:[7]}),a(t(p),null,{default:o(()=>e[8]||(e[8]=[n("Estimation Quantity")])),_:1,__:[8]}),a(t(p),null,{default:o(()=>e[9]||(e[9]=[n("Start Date")])),_:1,__:[9]}),a(t(p),null,{default:o(()=>e[10]||(e[10]=[n("End Date")])),_:1,__:[10]}),(u(!0),_(g,null,x(k.value,l=>(u(),S(t(p),{key:l.id},{default:o(()=>[n(s(l.name),1)]),_:2},1024))),128)),a(t(p),null,{default:o(()=>e[11]||(e[11]=[n("Total Qty")])),_:1,__:[11]})]),_:1})]),_:1}),a(t(O),null,{default:o(()=>[(u(!0),_(g,null,x(t(i).productionSummary,l=>(u(),S(t($),{key:l.model_id},{default:o(()=>[a(t(d),null,{default:o(()=>[n(s(l.model_id),1)]),_:2},1024),a(t(d),null,{default:o(()=>[n(s(l.description),1)]),_:2},1024),a(t(d),null,{default:o(()=>[n(s(N(l.estimation_price_pcs)),1)]),_:2},1024),a(t(d),null,{default:o(()=>[n(s(l.estimation_qty),1)]),_:2},1024),a(t(d),null,{default:o(()=>[n(s(l.start_date),1)]),_:2},1024),a(t(d),null,{default:o(()=>[n(s(l.end_date??"-"),1)]),_:2},1024),(u(!0),_(g,null,x(k.value,m=>(u(),S(t(d),{key:m.id+"-"+l.model_id},{default:o(()=>{var f,y;return[n(s(((y=(f=l.activities)==null?void 0:f[m.id])==null?void 0:y.qty)??"-"),1)]}),_:2},1024))),128)),a(t(d),{class:"font-semibold"},{default:o(()=>[n(s(l.subtotal_qty),1)]),_:2},1024)]),_:2},1024))),128))]),_:1}),c("tfoot",null,[a(t($),null,{default:o(()=>[a(t(d),{colspan:"6",class:"text-right font-bold"},{default:o(()=>e[12]||(e[12]=[n("Total")])),_:1,__:[12]}),(u(!0),_(g,null,x(k.value,l=>(u(),S(t(d),{key:"footer-"+l.id,class:"font-bold"},{default:o(()=>[n(s(t(i).productionSummary.reduce((m,f)=>{var y,E;return m+(((E=(y=f.activities)==null?void 0:y[l.id])==null?void 0:E.qty)||0)},0)),1)]),_:2},1024))),128)),a(t(d),{class:"font-bold"},{default:o(()=>[n(s(t(i).productionSummary.reduce((l,m)=>l+(m.subtotal_qty||0),0)),1)]),_:1})]),_:1})])]),_:1})]))])])])]),_:1})],64))}});export{lt as default};
