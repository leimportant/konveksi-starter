import{R as n,b as o}from"./app-BtHBITuZ.js";const u=n("user",{state:()=>({users:[],total:0,loaded:!1,loading:!1,currentPage:1,lastPage:1,error:null,filterName:""}),getters:{activeUsers(e){return e.users.filter(t=>t.active)},inactiveUsers(e){return e.users.filter(t=>!t.active)}},actions:{async fetchUsers(e=1,t=50,a="",s=""){var r,l;this.loading=!0;try{const i=await o.get("/api/users",{params:{page:e,perPage:t,role:a,name:s||this.filterName}});this.users=i.data.data,this.total=i.data.total,this.currentPage=e,this.lastPage=i.data.last_page||1,this.loaded=!0}catch(i){throw this.error=((l=(r=i.response)==null?void 0:r.data)==null?void 0:l.message)||"Failed to load users",i}finally{this.loading=!1}},setFilter(e,t){e==="name"&&(this.filterName=t,this.currentPage=1,this.fetchUsers(1))},async createUser(e){var t,a;this.loading=!0;try{const s=await o.post("/api/users",e);return await this.fetchUsers(),s.data}catch(s){throw this.error=((a=(t=s.response)==null?void 0:t.data)==null?void 0:a.message)||"Failed to create user",s}finally{this.loading=!1}},async updateUser(e,t){var a,s;this.loading=!0;try{const r=await o.put(`/api/users/${e}`,t);return await this.fetchUsers(),r.data}catch(r){throw this.error=((s=(a=r.response)==null?void 0:a.data)==null?void 0:s.message)||"Failed to update user",r}finally{this.loading=!1}},async deleteUser(e){var t,a;this.loading=!0;try{return await o.delete(`/api/users/${e}`),this.users=this.users.filter(s=>s.id!==e),!0}catch(s){throw this.error=((a=(t=s.response)==null?void 0:t.data)==null?void 0:a.message)||"Failed to delete user",s}finally{this.loading=!1}}}});export{u};
