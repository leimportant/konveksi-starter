import{d as k,q as j,r as E,aS as H,c as M,o as z,f,g as c,p as a,u as e,Z as F,x as o,k as s,l as S,m as D,G as I,D as U,y as m,F as _,B as N,j as d,E as P,C as q,am as A,z as G}from"./app-CLOMIjv3.js";import{_ as O,a as R,b,c as $,d as Z,e as y}from"./TableRow.vue_vue_type_script_setup_true_lang-C1EYWxGV.js";import{_ as J}from"./AppLayout.vue_vue_type_script_setup_true_lang-CYKlwWHs.js";import{u as Q}from"./useKasbonStore-DAZ3qwnX.js";import{S as W}from"./search-DUB5vLHp.js";import{C as X}from"./credit-card-COKQI_sY.js";import{C as Y}from"./circle-check-big-xMbDSm_2.js";import"./index-DdXuAnxd.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-BOe_L7tA.js";const ee={class:"px-4 py-4"},te={class:"mb-4 flex flex-col items-center justify-between gap-3 sm:flex-row"},ae={class:"flex w-full items-center gap-3 sm:w-auto"},se={class:"overflow-x-auto rounded-lg border shadow-sm"},oe={class:"flex items-center gap-1"},ne=["innerHTML"],re={class:"mt-1 text-xs text-gray-500"},le={class:"mt-4 flex justify-end space-x-2"},ie=["disabled"],ue=["disabled"],he=k({__name:"Mutasi",setup(ce){const p=Q(),{mutasiList:K,pagination:i,loading:h}=j(p),u=E(""),L=[{title:"Mutasi Kasbon",href:"/kasbon/mutasi"}],g=H({search:""}),v=()=>{var t;const n=typeof u.value=="string"?u.value:((t=u.value)==null?void 0:t.value)??"";p.fetchMutasi(1,50,{search:g.search,status:n})},V=M(()=>{const n={};return K.value.forEach(t=>{const l=t.employee_name||"-";n[l]||(n[l]=[]),n[l].push(t)}),n}),x=M(()=>Math.ceil(i.value.total/i.value.per_page)||1),w=async n=>{n<1||n>x.value||await p.fetchMutasi(n)},B=()=>w(i.value.current_page+1),T=()=>w(i.value.current_page-1);return z(()=>{const t=new Date().toISOString().slice(0,7);u.value=t,p.fetchMutasi()}),(n,t)=>(c(),f(_,null,[a(e(F),{title:"History Mutasi Management"}),a(J,{breadcrumbs:L},{default:o(()=>[s("div",ee,[s("div",te,[s("div",ae,[S(s("input",{type:"month","onUpdate:modelValue":t[0]||(t[0]=l=>u.value=l),class:"w-full rounded-lg border border-gray-300 bg-white px-2 py-2 text-gray-700 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500 sm:w-auto"},null,512),[[D,u.value]]),S(s("input",{"onUpdate:modelValue":t[1]||(t[1]=l=>g.search=l),type:"text",placeholder:"Cari data...",onKeyup:I(v,["enter"]),class:"w-full rounded-md border border-gray-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 sm:w-56"},null,544),[[D,g.search]]),a(e(U),{onClick:v,class:"flex items-center gap-1 bg-indigo-600 text-white hover:bg-indigo-700"},{default:o(()=>[a(e(W),{class:"h-4 w-4"}),t[2]||(t[2]=m(" Cari "))]),_:1,__:[2]})])]),s("div",se,[a(e(O),{class:"min-w-full"},{default:o(()=>[a(e(R),null,{default:o(()=>[a(e(b),{class:"bg-gray-100"},{default:o(()=>[a(e($),{class:"px-4 py-2 text-left text-sm font-medium text-gray-700"},{default:o(()=>t[3]||(t[3]=[m("Name")])),_:1,__:[3]}),a(e($),{class:"px-4 py-2 text-right text-sm font-medium text-gray-700"},{default:o(()=>t[4]||(t[4]=[m("Amount")])),_:1,__:[4]})]),_:1})]),_:1}),a(e(Z),null,{default:o(()=>[(c(!0),f(_,null,N(V.value,(l,C)=>(c(),f(_,{key:C},[a(e(b),{class:"border-b bg-gray-50"},{default:o(()=>[a(e(y),{class:"px-4 py-2 font-semibold text-gray-800",colspan:"3"},{default:o(()=>[m(d(C),1)]),_:2},1024)]),_:2},1024),(c(!0),f(_,null,N(l,r=>(c(),P(e(b),{key:r.id,class:"border-b bg-white align-top"},{default:o(()=>[a(e(y),{class:"flex flex-col px-4 py-1 text-sm text-gray-600"},{default:o(()=>[s("div",oe,[r.type==="Kasbon"||r.type==="Pembayaran"?(c(),P(A(r.type==="Kasbon"?e(X):e(Y)),{key:0,class:"h-4 w-4 text-blue-500"})):q("",!0),s("span",null,d(r.created_at?new Date(r.created_at).toLocaleDateString("id-ID"):"-"),1)]),s("div",{class:"mt-1 text-md text-gray-800 uppercase",innerHTML:r.description||"-"},null,8,ne)]),_:2},1024),a(e(y),{class:G(["px-4 py-1 text-right align-top text-sm font-medium",r.type==="Kasbon"?"text-green-600":r.type==="Pembayaran"?"text-red-600":""])},{default:o(()=>[m(d(Number(r.amount||0).toLocaleString())+" ",1),s("div",re," saldo kasbon: "+d(Number(r.saldo_kasbon||0).toLocaleString()),1)]),_:2},1032,["class"])]),_:2},1024))),128))],64))),128))]),_:1})]),_:1})]),s("div",le,[s("button",{onClick:T,disabled:e(i).current_page===1||e(h),class:"rounded border px-3 py-1 hover:bg-gray-100 disabled:opacity-50"}," Previous ",8,ie),s("span",null,"Page "+d(e(i).current_page)+" / "+d(x.value),1),s("button",{onClick:B,disabled:e(i).current_page>=x.value||e(h),class:"rounded border px-3 py-1 hover:bg-gray-100 disabled:opacity-50"}," Next ",8,ue)])])]),_:1})],64))}});export{he as default};
