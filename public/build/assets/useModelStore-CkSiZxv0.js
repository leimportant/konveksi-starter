import{R as n,b as i}from"./app-DqmlJ2ej.js";const c=n("model",{state:()=>({loading:!1,error:null,models:[],employees:[],total:0,currentPage:1,lastPage:1,filters:{search:"",start_date:null,end_date:null}}),actions:{async createModel(e){var t,s,a,r;try{if(this.loading=!0,!e.start_date)throw new Error("Tanggal mulai harus diisi");return(await i.post("/api/models",{...e,start_date:e.start_date})).data}catch(o){const l=(s=(t=o.response)==null?void 0:t.data)==null?void 0:s.message,d=(r=(a=o.response)==null?void 0:a.data)==null?void 0:r.error;l||d?this.error=`${l??""}${d?`: ${d}`:""}`:this.error=o.message||"Terjadi kesalahan saat membuat model"}finally{this.loading=!1}},async fetchModels(e){var t,s;try{this.loading=!0;const a={...this.filters,...e};this.filters=a;const r=await i.get("/api/models/list",{params:a});return this.models=r.data.data.data,this.total=r.data.data.total,this.currentPage=r.data.data.current_page,this.lastPage=r.data.data.last_page,r.data}catch(a){throw this.error=((s=(t=a.response)==null?void 0:t.data)==null?void 0:s.message)||"Terjadi kesalahan saat mengambil data model",a}finally{this.loading=!1}},async fetchActivityEmployee(e){var t,s;try{this.loading=!0;const a=await i.get(`/api/employee-activity-group/${e}`);return this.employees=a.data.data,a.data}catch(a){throw this.error=((s=(t=a.response)==null?void 0:t.data)==null?void 0:s.message)||"Terjadi kesalahan saat mengambil data model",a}finally{this.loading=!1}},setFilter(e,t){this.fetchModels({[e]:t,page:1})},goToPage(e){e<1||e>this.lastPage||this.fetchModels({page:e})},nextPage(){this.currentPage<this.lastPage&&this.fetchModels({page:this.currentPage+1})},prevPage(){this.currentPage>1&&this.fetchModels({page:this.currentPage-1})},async fetchModelById(e){var t,s;try{this.loading=!0;const a=await i.get(`/api/models/${e}`);if(!a.data||!a.data.data)throw new Error("Data model tidak ditemukan");return a.data}catch(a){throw this.error=((s=(t=a.response)==null?void 0:t.data)==null?void 0:s.message)||a.message||"Gagal mengambil data model",a}finally{this.loading=!1}},async updateModel(e,t){var s,a;try{this.loading=!0;const r=await i.put(`/api/models/${e}`,t),o=this.models.findIndex(l=>l.id===e);return o!==-1&&(this.models[o]=r.data.data),r.data}catch(r){throw this.error=((a=(s=r.response)==null?void 0:s.data)==null?void 0:a.message)||"Terjadi kesalahan saat memperbarui model",r}finally{this.loading=!1}},async deleteModel(e){var t,s;try{this.loading=!0,await i.delete(`/api/models/${e}`),this.models=this.models.filter(a=>a.id!==e)}catch(a){throw this.error=((s=(t=a.response)==null?void 0:t.data)==null?void 0:s.message)||"Terjadi kesalahan saat menghapus model",a}finally{this.loading=!1}},async updateCloseStatus(e){var t,s;try{this.loading=!0,this.error=null;const a=await i.patch(`/api/models/${e}/close`),r=a.data.data,o=this.models.findIndex(l=>l.id===e);return o!==-1&&(this.models[o]=r),a.data}catch(a){throw this.error=((s=(t=a.response)==null?void 0:t.data)==null?void 0:s.message)||"Terjadi kesalahan saat memperbarui status model",a}finally{this.loading=!1}}}});export{c as u};
