import{_ as h}from"./AppLayout.vue_vue_type_script_setup_true_lang-_mVlUDwO.js";import{d as B,q as T,r as y,o as I,f as $,g as D,p as a,u as e,Z as L,x as l,k as _,D as g,P as w,y as o,F as V,B as N,E as j,j as m}from"./app-BLOMClMO.js";import{_ as q}from"./Input.vue_vue_type_script_setup_true_lang-DKMhKz4H.js";import{_ as E,a as R,b as x,c as n,d as U,e as i}from"./TableRow.vue_vue_type_script_setup_true_lang-Cw_mOBoB.js";import{u as z}from"./useToast-C9x9jF4x.js";import{u as A}from"./useModelStore-D7wUMwT1.js";import{_ as M}from"./DateInput.vue_vue_type_script_setup_true_lang-4GghZd-Y.js";import{P as Q}from"./plus-DcRksKsP.js";import{S as G}from"./square-pen-B7JjyCW5.js";import{T as K}from"./trash-2-B8YCx3uy.js";import"./index-nSIjBrBy.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-BwS9btDF.js";const Z={class:"px-4 py-4"},H={class:"flex justify-between items-center gap-2 mb-2"},J={class:"flex gap-4 items-center"},O={class:"rounded-md border"},de=B({__name:"ListModelFix",setup(W){const f=z(),c=A(),{models:b}=T(c),S=[{title:"Konveksi",href:"/konveksi"},{title:"List Model",href:"/konveksi/model"}],p=y(""),v=y(null),k=y(null);I(()=>{u()});const u=async()=>{var r,t;try{await c.fetchModels({search:p.value,start_date:v.value,end_date:k.value})}catch(s){(t=(r=s.response)==null?void 0:r.data)!=null&&t.errors?(console.error(s.response.data.errors),f.error("Gagal ambil data")):f.error("Terjadi kesalahan saat membuat model")}},C=async r=>{var t,s;if(confirm("Are you sure you want to delete this model?"))try{await c.deleteModel(r),f.success("Model deleted successfully"),await u()}catch(d){f.error(((s=(t=d==null?void 0:d.response)==null?void 0:t.data)==null?void 0:s.message)??"Failed to delete model")}},F=r=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0,maximumFractionDigits:0}).format(r),P=r=>r?new Date(r).toLocaleDateString("id-ID",{day:"2-digit",month:"long",year:"numeric"}):"-";return(r,t)=>(D(),$(V,null,[a(e(L),{title:"List Model"}),a(h,{breadcrumbs:S},{default:l(()=>[_("div",Z,[_("div",H,[_("div",J,[a(e(q),{modelValue:p.value,"onUpdate:modelValue":t[0]||(t[0]=s=>p.value=s),placeholder:"Search models...",class:"w-64",onInput:u},null,8,["modelValue"]),a(e(M),{modelValue:v.value,"onUpdate:modelValue":[t[1]||(t[1]=s=>v.value=s),u],placeholder:"Start Date"},null,8,["modelValue"]),a(e(M),{modelValue:k.value,"onUpdate:modelValue":[t[2]||(t[2]=s=>k.value=s),u],placeholder:"End Date"},null,8,["modelValue"])]),a(e(g),{onClick:t[3]||(t[3]=s=>e(w).visit("/konveksi/model/create"))},{default:l(()=>[a(e(Q),{class:"h-4 w-4 mr-2"}),t[4]||(t[4]=o(" Buat Model "))]),_:1,__:[4]})]),_("div",O,[a(e(E),null,{default:l(()=>[a(e(R),null,{default:l(()=>[a(e(x),null,{default:l(()=>[a(e(n),null,{default:l(()=>t[5]||(t[5]=[o("Description")])),_:1,__:[5]}),a(e(n),null,{default:l(()=>t[6]||(t[6]=[o("Start Date")])),_:1,__:[6]}),a(e(n),null,{default:l(()=>t[7]||(t[7]=[o("Price/Pcs")])),_:1,__:[7]}),a(e(n),null,{default:l(()=>t[8]||(t[8]=[o("Qty")])),_:1,__:[8]}),a(e(n),null,{default:l(()=>t[9]||(t[9]=[o("Remark")])),_:1,__:[9]}),a(e(n),{class:"w-24"},{default:l(()=>t[10]||(t[10]=[o("Actions")])),_:1,__:[10]})]),_:1})]),_:1}),a(e(U),null,{default:l(()=>[(D(!0),$(V,null,N(e(b),s=>(D(),j(e(x),{key:s.id},{default:l(()=>[a(e(i),null,{default:l(()=>[o(m(s.description),1)]),_:2},1024),a(e(i),null,{default:l(()=>[o(m(P(s.start_date)),1)]),_:2},1024),a(e(i),null,{default:l(()=>[o(m(F(s.estimation_price_pcs)),1)]),_:2},1024),a(e(i),null,{default:l(()=>[o(m(s.estimation_qty),1)]),_:2},1024),a(e(i),null,{default:l(()=>[o(m(s.remark),1)]),_:2},1024),a(e(i),{class:"flex gap-2"},{default:l(()=>[a(e(g),{variant:"ghost",size:"icon",onClick:d=>e(w).visit(`/konveksi/model/${s.id}/edit`)},{default:l(()=>[a(e(G),{class:"h-4 w-4"})]),_:2},1032,["onClick"]),a(e(g),{variant:"ghost",size:"icon",onClick:d=>C(s.id)},{default:l(()=>[a(e(K),{class:"h-4 w-4"})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})])])]),_:1})],64))}});export{de as default};
