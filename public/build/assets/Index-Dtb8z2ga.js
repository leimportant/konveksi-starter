import{d as g,f as v,g as _,z as k,u as e,J as $,A as C,r as y,T as E,p as s,Z as z,x as a,k as f,y as n,D as S,j as m,E as b,F as w,B as I,C as L,N as j}from"./app-C0haUAd3.js";import{_ as H}from"./AppLayout.vue_vue_type_script_setup_true_lang-BV7Kz6jH.js";import{_ as J,a as O,b as h,c as x,d as R,e as p}from"./TableRow.vue_vue_type_script_setup_true_lang-7ZGVvEIP.js";import{_ as B}from"./Input.vue_vue_type_script_setup_true_lang-DYd3c6mh.js";import{_ as D}from"./Checkbox.vue_vue_type_script_setup_true_lang-DFvi2h6P.js";import"./index-Dq1WJwb7.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-DHmxgee6.js";import"./check-BjkkBgDz.js";const Z=g({__name:"Card",props:{class:{}},setup(c){const d=c;return(o,i)=>(_(),v("div",{class:k(e($)("rounded-lg border bg-card text-card-foreground shadow-sm",d.class))},[C(o.$slots,"default")],2))}}),q=g({__name:"CardContent",props:{class:{}},setup(c){const d=c;return(o,i)=>(_(),v("div",{class:k(e($)("p-6 pt-0",d.class))},[C(o.$slots,"default")],2))}}),G=g({__name:"CardHeader",props:{class:{}},setup(c){const d=c;return(o,i)=>(_(),v("div",{class:k(e($)("flex flex-col gap-y-1.5 p-6",d.class))},[C(o.$slots,"default")],2))}}),K=g({__name:"CardTitle",props:{class:{}},setup(c){const d=c;return(o,i)=>(_(),v("h3",{class:k(e($)("text-2xl font-semibold leading-none tracking-tight",d.class))},[C(o.$slots,"default")],2))}}),M={class:"py-12"},Q={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},W={class:"flex items-center space-x-4 mb-4"},X={class:"rounded-md border"},oe=g({__name:"Index",props:{payrolls:{},start_date:{},end_date:{}},setup(c){const d=c,o=y(d.start_date),i=y(d.end_date),V=()=>{j.get(route("payrolls.index"),{start_date:o.value,end_date:i.value},{preserveState:!0,replace:!0})},r=y([]),P=(u,t)=>{if(t)r.value.includes(u)||r.value.push(u);else{const l=r.value.indexOf(u);l>-1&&r.value.splice(l,1)}},U=E({payroll_ids:[]}),A=()=>{U.transform(u=>({...u,payroll_ids:r.value})).post(route("payrolls.close"),{onSuccess:()=>{r.value=[],V()}})},N=y(!1),F=u=>{N.value=u,u?r.value=d.payrolls.data.filter(t=>t.status!=="Closed").map(t=>t.id):r.value=[]};return(u,t)=>(_(),v(w,null,[s(e(z),{title:"Payroll"}),s(H,null,{header:a(()=>t[2]||(t[2]=[f("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"},"Payroll Transactions",-1)])),default:a(()=>[f("div",M,[f("div",Q,[s(e(Z),null,{default:a(()=>[s(e(G),null,{default:a(()=>[s(e(K),null,{default:a(()=>t[3]||(t[3]=[n("Payroll List")])),_:1,__:[3]})]),_:1}),s(e(q),null,{default:a(()=>[f("div",W,[s(e(B),{type:"date",modelValue:o.value,"onUpdate:modelValue":t[0]||(t[0]=l=>o.value=l),class:"w-auto"},null,8,["modelValue"]),t[5]||(t[5]=f("span",{class:"mx-2"},"to",-1)),s(e(B),{type:"date",modelValue:i.value,"onUpdate:modelValue":t[1]||(t[1]=l=>i.value=l),class:"w-auto"},null,8,["modelValue"]),s(e(S),{onClick:V},{default:a(()=>t[4]||(t[4]=[n("Filter")])),_:1,__:[4]}),s(e(S),{onClick:A,disabled:r.value.length===0,variant:"destructive"},{default:a(()=>[n(" Close Selected ("+m(r.value.length)+") ",1)]),_:1},8,["disabled"])]),f("div",X,[s(e(J),null,{default:a(()=>[s(e(O),null,{default:a(()=>[s(e(h),null,{default:a(()=>[s(e(x),{class:"w-[50px]"},{default:a(()=>[s(e(D),{"onUpdate:checked":F,checked:N.value},null,8,["checked"])]),_:1}),s(e(x),null,{default:a(()=>t[6]||(t[6]=[n("Employee")])),_:1,__:[6]}),s(e(x),null,{default:a(()=>t[7]||(t[7]=[n("Period")])),_:1,__:[7]}),s(e(x),{class:"text-right"},{default:a(()=>t[8]||(t[8]=[n("Amount")])),_:1,__:[8]}),s(e(x),null,{default:a(()=>t[9]||(t[9]=[n("Status")])),_:1,__:[9]})]),_:1})]),_:1}),s(e(R),null,{default:a(()=>[u.payrolls.data.length>0?(_(!0),v(w,{key:0},I(u.payrolls.data,l=>(_(),b(e(h),{key:l.id},{default:a(()=>[s(e(p),null,{default:a(()=>[l.status!=="Closed"?(_(),b(e(D),{key:0,checked:r.value.includes(l.id),"onUpdate:checked":T=>P(l.id,!!T)},null,8,["checked","onUpdate:checked"])):L("",!0)]),_:2},1024),s(e(p),null,{default:a(()=>[n(m(l.employee.name),1)]),_:2},1024),s(e(p),null,{default:a(()=>[n(m(l.start_date)+" - "+m(l.end_date),1)]),_:2},1024),s(e(p),{class:"text-right"},{default:a(()=>[n(m(new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR"}).format(l.total_amount)),1)]),_:2},1024),s(e(p),null,{default:a(()=>[n(m(l.status),1)]),_:2},1024)]),_:2},1024))),128)):(_(),b(e(h),{key:1},{default:a(()=>[s(e(p),{colspan:"5",class:"text-center"},{default:a(()=>t[10]||(t[10]=[n(" No payroll data found for the selected date range. ")])),_:1,__:[10]})]),_:1}))]),_:1})]),_:1})])]),_:1})]),_:1})])])]),_:1})],64))}});export{oe as default};
