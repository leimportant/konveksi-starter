import{d as L,r as C,c as p,o as E,f as d,g as r,p as a,u as o,Z as M,x as s,k as u,D as z,y as i,j as m,F as P,B as S,E as A,z as $,C as O,L as k}from"./app-DqmlJ2ej.js";import{_ as T}from"./Input.vue_vue_type_script_setup_true_lang-HFGc4jfr.js";import{_ as j,a as U,b as V,c as f,d as H,e as y}from"./TableRow.vue_vue_type_script_setup_true_lang-CgDUlZ_y.js";import{_ as Q}from"./AppLayout.vue_vue_type_script_setup_true_lang-CLv-yavH.js";import{u as W}from"./useReportStore-hweqUgHn.js";import"./index-BF0nI2gr.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-CIlX9X7-.js";const Z={class:"py-2"},q={class:"mx-auto max-w-7xl sm:px-2 lg:px-2"},G={class:"overflow-hidden bg-white shadow-sm sm:rounded-lg"},J={class:"mb-4 flex space-x-4"},K={key:0},X={key:1,class:"text-red-500"},Y={key:2},ee={class:"flex gap-1 items-end h-4"},te={class:"mt-4 flex items-center justify-between"},oe={class:"mt-4 flex justify-end space-x-2"},ae=["disabled"],se=["onClick"],le=["disabled"],_e=L({__name:"OmsetReport",setup(ne){const n=W(),D=[{title:"Report Omset",href:"/reports/omzet"}],g=C(""),_=C(""),c=p(()=>n.currentPage),N=p(()=>n.lastPage),v=p(()=>n.perPage),b=async(l=1,t=10)=>{await n.fetchOmsetPerPayment(g.value,_.value,l,t),console.log("Current Page:",n.currentPage),console.log("Last Page:",n.lastPage),console.log("Total Omset Records:",n.totalOmsetRecords)},w=p(()=>Math.ceil(n.totalOmsetRecords/n.perPage)),B=()=>{h(c.value-1)},F=()=>{h(c.value+1)},h=l=>{console.log("Attempting to go to page:",l),console.log("Current Page (before check):",c.value),console.log("Last Page (before check):",N.value),b(l,v.value)},I=l=>{const t=parseFloat(l);return isNaN(t)?"Rp0,00":new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(t)},x=(l,t=5e5)=>{const e=typeof l=="string"?parseFloat(l):l,R=Math.min(e/t*100,100);return Math.round(R)};return E(()=>{const l=new Date;g.value=l.toISOString().split("T")[0],_.value=l.toISOString().split("T")[0],b(c.value,v.value)}),(l,t)=>(r(),d(P,null,[a(o(M),{title:"Omset Report"}),a(Q,{breadcrumbs:D},{default:s(()=>[u("div",Z,[u("div",q,[u("div",G,[u("div",J,[a(o(T),{type:"date",modelValue:g.value,"onUpdate:modelValue":t[0]||(t[0]=e=>g.value=e)},null,8,["modelValue"]),a(o(T),{type:"date",modelValue:_.value,"onUpdate:modelValue":t[1]||(t[1]=e=>_.value=e)},null,8,["modelValue"]),a(o(z),{onClick:t[2]||(t[2]=e=>b(1,v.value)),class:"bg-indigo-600 text-white py-2 h-10 rounded-md hover:bg-indigo-700 focus:ring-2 focus:ring-indigo-500"},{default:s(()=>t[3]||(t[3]=[i("Tampilkan")])),_:1,__:[3]})]),o(n).loading?(r(),d("div",K,"Loading...")):o(n).error?(r(),d("div",X,"Error: "+m(o(n).error.message),1)):(r(),d("div",Y,[a(o(j),null,{default:s(()=>[a(o(U),null,{default:s(()=>[a(o(V),{class:"bg-gray-100"},{default:s(()=>[a(o(f),null,{default:s(()=>t[4]||(t[4]=[i("Tanggal")])),_:1,__:[4]}),a(o(f),null,{default:s(()=>t[5]||(t[5]=[i("Payment Method")])),_:1,__:[5]}),a(o(f),null,{default:s(()=>t[6]||(t[6]=[i("Omset")])),_:1,__:[6]}),a(o(f),null,{default:s(()=>t[7]||(t[7]=[i("Bars")])),_:1,__:[7]})]),_:1})]),_:1}),a(o(H),null,{default:s(()=>[(r(!0),d(P,null,S(o(n).omsetSummary,e=>(r(),A(o(V),{key:e.tanggal,class:$(e.payment_method==="SUBTOTAL"?"bg-green-100 font-semibold":"")},{default:s(()=>[a(o(y),null,{default:s(()=>[i(m(e.tanggal),1)]),_:2},1024),a(o(y),null,{default:s(()=>[i(m(e.payment_method),1)]),_:2},1024),a(o(y),null,{default:s(()=>[i(m(I(e.total_omset.toString())),1)]),_:2},1024),a(o(y),null,{default:s(()=>[u("div",ee,[e.payment_method==="CASH"?(r(),d("div",{key:0,class:"bg-green-500 h-full",style:k({width:`${x(e.total_omset)}%`})},null,4)):O("",!0),e.payment_method==="QRIS"||e.payment_method==="TRANSFER"?(r(),d("div",{key:1,class:"bg-indigo-500 h-full",style:k({width:`${x(e.total_omset)}%`})},null,4)):e.payment_method==="CREDIT"?(r(),d("div",{key:2,class:"bg-blue-500 h-full",style:k({width:`${x(e.total_omset)}%`})},null,4)):O("",!0)])]),_:2},1024)]),_:2},1032,["class"]))),128))]),_:1})]),_:1}),u("div",te,[u("div",oe,[u("button",{onClick:B,disabled:c.value===1,class:"rounded border border-gray-300 px-3 py-1 text-gray-700 hover:bg-gray-100 disabled:cursor-not-allowed disabled:opacity-50"}," Previous ",8,ae),(r(!0),d(P,null,S(w.value,e=>(r(),d("button",{key:e,onClick:R=>h(e),class:$(["rounded border px-3 py-1 text-sm",e===c.value?"border-blue-600 bg-blue-600 text-white":"border-gray-300 text-gray-700 hover:bg-gray-100"])},m(e),11,se))),128)),u("button",{onClick:F,disabled:c.value===w.value,class:"rounded border border-gray-300 px-3 py-1 text-gray-700 hover:bg-gray-100 disabled:cursor-not-allowed disabled:opacity-50"}," Next ",8,le)])])]))])])])]),_:1})],64))}});export{_e as default};
