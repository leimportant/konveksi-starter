import{d as F,q as L,r as q,o as M,w as P,c as Q,Q as U,e as Z,f as p,g as u,p as s,u as t,Z as G,x as a,k as r,D as b,y as n,F as w,B as S,E as y,j as _,z as D,C as $}from"./app-BscK5G4r.js";import{_ as H,a as J,b as N,c as m,d as K,e as f}from"./TableRow.vue_vue_type_script_setup_true_lang-DFcX0pX5.js";import{u as O}from"./useToast-B4Cwobnv.js";import{_ as W}from"./AppLayout.vue_vue_type_script_setup_true_lang-BYRlbZlQ.js";import{u as X}from"./useTransferStockStore-BsqcbNKX.js";import{P as Y}from"./plus-l3dWl5VO.js";import{E as ee}from"./eye-y-qxxWWv.js";import{S as te}from"./square-pen-BAOPR-EX.js";import{T as se}from"./trash-2-B23BPpJD.js";import"./index-DZgK4evs.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-C3c0ANBC.js";const ae={class:"px-4 py-4"},oe={class:"mb-6 flex items-center justify-between"},le={class:"rounded-md border"},ne={class:"mt-4 flex justify-end space-x-2"},ie=["disabled"],de=["onClick"],ue=["disabled"],$e=F({__name:"Index",setup(re){const C=O(),c=X(),{transfers:V,filters:v,loading:j,currentPage:d,lastPage:z}=L(c),k=q(10);M(()=>{c.fetchTransfers(d.value,k.value)}),P(v,async()=>{await c.fetchTransfers(1,k.value)},{deep:!0}),P(d,async l=>{await c.fetchTransfers(l,k.value)});const x=Q(()=>z.value||1),h=async l=>{l<1||l>x.value||(d.value=l)},B=()=>h(d.value+1),A=()=>h(d.value-1),E=async l=>{var o,g;if(confirm("Are you sure you want to delete this transfer?"))try{await c.deleteTransfer(l),await c.fetchTransfers(),C.success("Transfer deleted successfully")}catch(e){C.error(((g=(o=e==null?void 0:e.response)==null?void 0:o.data)==null?void 0:g.message)??"Failed to delete transfer")}},I=U().props.auth.user.location_id,R=[{title:"Transfer Stocks",href:"/transfer-stocks"}];return(l,o)=>{const g=Z("Input");return u(),p(w,null,[s(t(G),{title:"Transfer Stocks"}),s(W,{breadcrumbs:R},{default:a(()=>[r("div",ae,[r("div",oe,[s(t(b),{onClick:o[0]||(o[0]=e=>l.$inertia.visit("/transfer-stock/create")),class:"gap-2 bg-blue-600 text-white hover:bg-blue-700"},{default:a(()=>[s(t(Y),{class:"h-4 w-4"}),o[2]||(o[2]=n(" Add "))]),_:1,__:[2]}),s(g,{modelValue:t(v).productName,"onUpdate:modelValue":o[1]||(o[1]=e=>t(v).productName=e),placeholder:"Search",class:"w-64 border-gray-300 focus:border-blue-500 focus:ring-blue-500","aria-label":"Search",disabled:t(j)},null,8,["modelValue","disabled"])]),r("div",le,[s(t(H),null,{default:a(()=>[s(t(J),null,{default:a(()=>[s(t(N),{class:"bg-gray-100"},{default:a(()=>[s(t(m),null,{default:a(()=>o[3]||(o[3]=[n("Location")])),_:1,__:[3]}),s(t(m),null,{default:a(()=>o[4]||(o[4]=[n("Destination")])),_:1,__:[4]}),s(t(m),null,{default:a(()=>o[5]||(o[5]=[n("Sloc")])),_:1,__:[5]}),s(t(m),null,{default:a(()=>o[6]||(o[6]=[n("Date")])),_:1,__:[6]}),s(t(m),null,{default:a(()=>o[7]||(o[7]=[n("Status")])),_:1,__:[7]}),s(t(m),{class:"w-24"},{default:a(()=>o[8]||(o[8]=[n("Actions")])),_:1,__:[8]})]),_:1})]),_:1}),s(t(K),null,{default:a(()=>[(u(!0),p(w,null,S(t(V),e=>(u(),y(t(N),{key:e.id},{default:a(()=>[s(t(f),null,{default:a(()=>{var i;return[n(_((i=e.location)==null?void 0:i.name),1)]}),_:2},1024),s(t(f),null,{default:a(()=>{var i;return[n(_((i=e.location_destination)==null?void 0:i.name),1)]}),_:2},1024),s(t(f),null,{default:a(()=>[n(_(e.sloc_id),1)]),_:2},1024),s(t(f),null,{default:a(()=>[n(_(e.created_at?new Date(e.created_at).toLocaleDateString():"-"),1)]),_:2},1024),s(t(f),null,{default:a(()=>[r("span",{class:D([e.status=="Pending"?"bg-green-100 text-green-800":"bg-red-100 text-red-800","rounded-full px-2 py-1 text-xs font-semibold"])},_(e.status),3)]),_:2},1024),s(t(f),{class:"flex gap-2"},{default:a(()=>{var i;return[e!=null&&e.id&&(e.status==="Accepted"||e.status==="Rejected")||((i=e.location_destination)==null?void 0:i.id)===t(I)?(u(),y(t(b),{key:0,variant:"ghost",size:"icon",class:"hover:bg-gray-100",onClick:T=>l.$inertia.visit(`/transfer-stock/${e.id}/view`)},{default:a(()=>[s(t(ee),{class:"h-4 w-4"})]),_:2},1032,["onClick"])):$("",!0),e!=null&&e.id&&(e.status==="Pending"||e.status==="Rejected")?(u(),y(t(b),{key:1,variant:"ghost",size:"icon",class:"hover:bg-gray-100",onClick:T=>l.$inertia.visit(`/transfer-stock/${e.id}/edit`)},{default:a(()=>[s(t(te),{class:"h-4 w-4"})]),_:2},1032,["onClick"])):$("",!0),e!=null&&e.id&&(e.status==="Pending"||e.status==="Rejected")?(u(),y(t(b),{key:2,variant:"ghost",size:"icon",class:"hover:bg-gray-100",onClick:T=>E(e.id)},{default:a(()=>[s(t(se),{class:"h-4 w-4"})]),_:2},1032,["onClick"])):$("",!0)]}),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),r("div",ne,[r("button",{onClick:A,disabled:t(d)===1,class:"rounded border border-gray-300 px-3 py-1 text-gray-700 hover:bg-gray-100 disabled:opacity-50"}," Previous ",8,ie),(u(!0),p(w,null,S(x.value,e=>(u(),p("button",{key:e,onClick:i=>h(e),class:D(["rounded border px-3 py-1 text-sm",e===t(d)?"border-blue-600 bg-blue-600 text-white":"border-gray-300 text-gray-700 hover:bg-gray-100"])},_(e),11,de))),128)),r("button",{onClick:B,disabled:t(d)===x.value,class:"rounded border border-gray-300 px-3 py-1 text-gray-700 hover:bg-gray-100 disabled:opacity-50"}," Next ",8,ue)])])]),_:1})],64)}}});export{$e as default};
