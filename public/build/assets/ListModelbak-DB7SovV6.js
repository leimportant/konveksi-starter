import{d as L,q as V,o as j,w as q,f as n,g as d,p as s,u as e,Z as A,x as r,k as c,D as x,R as D,y as l,C as k,E as S,F as y,B as v,j as g,L as N,z as E}from"./app-DpgjxKsy.js";import{_ as R}from"./Input.vue_vue_type_script_setup_true_lang-hdijLHS7.js";import{_ as H,a as K,b as h,c as p,d as Q,e as m}from"./TableRow.vue_vue_type_script_setup_true_lang-C7RwZ6W3.js";import{u as Z}from"./useToast-C6K0Rb0S.js";import{_ as G}from"./AppLayout.vue_vue_type_script_setup_true_lang-CtOhsmG-.js";import{u as J}from"./useModelStore-CDllvoYb.js";import{P as O}from"./plus-CmyZsT0Y.js";import{S as U}from"./square-pen-DWlOGYVr.js";import{T as W}from"./trash-2-Bj3mgX_b.js";import"./index-DtZ7KzO-.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-BGoPCiWI.js";const X={class:"px-4 py-4"},Y={class:"mb-6 flex items-center justify-between"},ee={class:"overflow-x-auto rounded-md border border-gray-200 bg-white shadow-sm dark:border-gray-700 dark:bg-gray-900"},te={class:"font-semibold"},se={class:"text-xs text-gray-500 dark:text-gray-400"},ae={key:0,class:"flex flex-col text-xs"},re={key:1},oe={key:0,class:"p-4 text-center text-sm text-gray-500 dark:text-gray-400"},de={class:"mt-4 flex justify-end space-x-2"},le=["disabled"],ne=["onClick","disabled"],ie=["disabled"],he=L({__name:"ListModelbak",setup(ue){const w=Z(),o=J(),{models:M,loading:f,currentPage:_,filters:C,lastPage:$}=V(o),T=[{title:"Konveksi",href:"/konveksi"},{title:"List Model",href:"/konveksi/model"}];j(()=>{o.fetchModels()}),q(C,()=>{o.fetchModels()},{deep:!0});const F=i=>{const t=i.target;o.setFilter("search",t.value)},z=async i=>{var t,a;if(confirm("Are you sure you want to delete this model?"))try{await o.deleteModel(i),w.success("Model deleted successfully"),await o.fetchModels()}catch(u){w.error(((a=(t=u==null?void 0:u.response)==null?void 0:t.data)==null?void 0:a.message)??"Failed to delete model")}},B=i=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0,maximumFractionDigits:0}).format(i),I=i=>i?new Date(i).toLocaleDateString("id-ID",{day:"2-digit",month:"long",year:"numeric"}):"-";return(i,t)=>(d(),n(y,null,[s(e(A),{title:"List Model"}),s(G,{breadcrumbs:T},{default:r(()=>[c("div",X,[c("div",Y,[s(e(x),{onClick:t[0]||(t[0]=a=>e(D).visit("/konveksi/model/create")),"aria-label":"Tambah Model Baru",class:"rounded-md bg-indigo-600 py-2 text-white hover:bg-indigo-700 focus:ring-2 focus:ring-indigo-500"},{default:r(()=>[s(e(O),{class:"h-4 w-4"}),t[3]||(t[3]=l(" Add "))]),_:1,__:[3]}),s(e(R),{value:e(C).search,debounce:500,placeholder:"Search Model",onInput:F,class:"w-64","aria-label":"Search Model",disabled:e(f)},null,8,["value","disabled"])]),c("div",ee,[s(e(H),{class:"w-full min-w-[600px] text-sm"},{default:r(()=>[s(e(K),null,{default:r(()=>[s(e(h),{class:"bg-gray-100 dark:bg-gray-800"},{default:r(()=>[s(e(p),{class:"px-3 py-2 text-left"},{default:r(()=>t[4]||(t[4]=[l("Nama Model")])),_:1,__:[4]}),s(e(p),{class:"px-3 py-2"},{default:r(()=>t[5]||(t[5]=[l("Est Harga/Pcs")])),_:1,__:[5]}),s(e(p),{class:"px-3 py-2"},{default:r(()=>t[6]||(t[6]=[l("Qty")])),_:1,__:[6]}),s(e(p),{class:"hidden px-3 py-2 md:table-cell"},{default:r(()=>t[7]||(t[7]=[l("Catatan")])),_:1,__:[7]}),s(e(p),{class:"px-3 py-2 text-right"},{default:r(()=>t[8]||(t[8]=[l("Action")])),_:1,__:[8]})]),_:1})]),_:1}),s(e(Q),null,{default:r(()=>[(d(!0),n(y,null,v(e(M),a=>(d(),S(e(h),{key:a.id,class:"border-b border-gray-100 hover:bg-gray-50 dark:border-gray-800 dark:hover:bg-gray-800"},{default:r(()=>[s(e(m),{class:"px-3 py-2 font-medium text-foreground"},{default:r(()=>[c("div",te,g(a.description),1),c("div",se,"Mulai: "+g(I(a.start_date)),1)]),_:2},1024),s(e(m),{class:"px-3 py-2"},{default:r(()=>[l(g(B(a.estimation_price_pcs)),1)]),_:2},1024),s(e(m),{class:"px-3 py-2"},{default:r(()=>{var u;return[(u=a.sizes)!=null&&u.length?(d(),n("div",ae,[(d(!0),n(y,null,v(a.sizes,(b,P)=>(d(),n("span",{key:P},[l(g(b.size_id)+" "+g(b.variant)+" ("+g(b.qty)+") ",1),P!==a.sizes.length-1?(d(),n(y,{key:0},[t[9]||(t[9]=l(" ,")),t[10]||(t[10]=c("br",null,null,-1))],64)):k("",!0)]))),128))])):(d(),n("span",re,"-"))]}),_:2},1024),s(e(m),{class:"hidden px-3 py-2 text-sm text-gray-500 dark:text-gray-400 md:table-cell"},{default:r(()=>[l(g(a.remark||"-"),1)]),_:2},1024),s(e(m),{class:"space-x-1 px-3 py-2 text-right"},{default:r(()=>[s(e(x),{size:"icon",variant:"ghost",class:"hover:bg-gray-100 dark:hover:bg-gray-700",onClick:N(u=>e(D).visit(`/konveksi/model/${a.id}/edit`),["stop"])},{default:r(()=>[s(e(U),{class:"h-4 w-4"})]),_:2},1032,["onClick"]),s(e(x),{size:"icon",variant:"ghost",class:"hover:bg-gray-100 dark:hover:bg-gray-700",onClick:N(u=>z(a.id),["stop"])},{default:r(()=>[s(e(W),{class:"h-4 w-4 text-red-500"})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128)),!e(o).loading&&e(M).length===0?(d(),S(e(h),{key:0},{default:r(()=>[s(e(m),{colspan:"5",class:"px-3 py-6 text-center text-sm text-muted-foreground"},{default:r(()=>t[11]||(t[11]=[l(" Tidak ada model yang ditemukan. ")])),_:1,__:[11]})]),_:1})):k("",!0)]),_:1})]),_:1}),e(f)?(d(),n("div",oe,"Memuat data...")):k("",!0)]),c("div",de,[c("button",{onClick:t[1]||(t[1]=(...a)=>e(o).prevPage&&e(o).prevPage(...a)),disabled:e(_)===1||e(f),class:"rounded border border-gray-300 px-3 py-1 text-gray-700 hover:bg-gray-100 disabled:cursor-not-allowed disabled:opacity-50"}," Previous ",8,le),(d(!0),n(y,null,v(e($),a=>(d(),n("button",{key:a,onClick:u=>e(o).goToPage(a),class:E(["rounded border px-3 py-1 text-sm",a===e(_)?"border-blue-600 bg-blue-600 text-white":"border-gray-300 text-gray-700 hover:bg-gray-100"]),disabled:e(f)},g(a),11,ne))),128)),c("button",{onClick:t[2]||(t[2]=(...a)=>e(o).nextPage&&e(o).nextPage(...a)),disabled:e(_)===e($)||e(f),class:"rounded border border-gray-300 px-3 py-1 text-gray-700 hover:bg-gray-100 disabled:cursor-not-allowed disabled:opacity-50"}," Next ",8,ie)])])]),_:1})],64))}});export{he as default};
