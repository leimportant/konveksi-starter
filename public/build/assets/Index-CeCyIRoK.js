import{d as L,r as C,T as Z,q as G,c as H,o as J,f as b,g as f,p as a,u as t,Z as K,x as o,k as l,C as O,D as g,y as m,S as Q,F as M,B as V,E as W,j as N,z as X,O as P}from"./app-BjPRzlFm.js";import{_ as Y}from"./AppLayout.vue_vue_type_script_setup_true_lang-Bd6-9AF3.js";import{_ as $}from"./Input.vue_vue_type_script_setup_true_lang-LPyay3cw.js";import{_ as ee,a as te,b as S,c as T,d as se,e as j}from"./TableRow.vue_vue_type_script_setup_true_lang-CT6XppGY.js";import{u as ae}from"./useToast-Boh6s--9.js";import{u as oe}from"./useUomStore-yD0v-Ocf.js";import{P as le}from"./plus-vIOI4dya.js";import{T as ne}from"./trash-2-DFOqHOVG.js";import"./index-qaZWik8d.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-C6lazOz4.js";const re={class:"px-4 py-4"},de={class:"flex justify-between items-center gap-2 mb-2"},ie={class:"rounded-md border"},ue={class:"flex justify-end mt-4 space-x-2"},me=["disabled"],ce=["onClick","disabled"],fe=["disabled"],be={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},ge={class:"bg-white p-6 rounded-lg w-96"},pe={class:"mb-4"},_e={class:"flex justify-end gap-2"},ye={key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},ve={class:"bg-white p-6 rounded-lg w-96"},xe={class:"mb-4"},he={class:"flex justify-end gap-2"},Te=L({__name:"Index",setup(Ue){const u=ae(),_=C(!1),v=C(!1),x=C(null),i=Z({name:""}),F=[{title:"UOM",href:"/uoms"}],r=oe(),{items:B,currentPage:p,lastPage:E,loading:y,filterName:h}=G(r),U=H(()=>E.value||1),w=async n=>{n<1||n>U.value||await r.fetchUoms(n)},q=()=>w(p.value+1),z=()=>w(p.value-1),A=(n,e)=>{const s=e.target;r.setFilter(n,s.value)};J(()=>{r.fetchUoms()});const D=async()=>{var n,e,s,d;if(!i.name)return u.error("Name is required");try{await r.createUom(i.name),u.success("UOM created successfully"),i.reset(),r.loaded=!1,await r.fetchUoms(),_.value=!1}catch(c){const k=(d=(s=(e=(n=c==null?void 0:c.response)==null?void 0:n.data)==null?void 0:e.errors)==null?void 0:s.name)==null?void 0:d[0];u.error(k||"Failed to create UOM")}},I=async()=>{var n,e,s,d;if(!x.value||!i.name)return u.error("Name is required");try{await r.updateUom(x.value.id,i.name),u.success("UOM updated successfully"),i.reset(),r.loaded=!1,await r.fetchUoms(),v.value=!1,x.value=null}catch(c){const k=(d=(s=(e=(n=c==null?void 0:c.response)==null?void 0:n.data)==null?void 0:e.errors)==null?void 0:s.name)==null?void 0:d[0];u.error(k||"Failed to update UOM")}},R=async n=>{var e,s;if(confirm("Are you sure you want to delete this UOM?"))try{await r.deleteUom(n),u.success("UOM deleted successfully"),r.loaded=!1,await r.fetchUoms()}catch(d){u.error(((s=(e=d==null?void 0:d.response)==null?void 0:e.data)==null?void 0:s.message)??"Failed to delete UOM")}};return(n,e)=>(f(),b(M,null,[a(t(K),{title:"UOM Management"}),a(Y,{breadcrumbs:F},{default:o(()=>[l("div",re,[l("div",de,[a(t(g),{onClick:e[0]||(e[0]=s=>_.value=!0),class:"bg-indigo-600 text-white py-2 h-10 rounded-md hover:bg-indigo-700 focus:ring-2 focus:ring-indigo-500"},{default:o(()=>[a(t(le),{class:"h-4 w-4"}),e[7]||(e[7]=m(" Add "))]),_:1,__:[7]}),a(t($),{modelValue:t(h),"onUpdate:modelValue":e[1]||(e[1]=s=>Q(h)?h.value=s:null),placeholder:"Search",onInput:e[2]||(e[2]=s=>A("name",s)),class:"w-64","aria-label":"Search",disabled:t(y)},null,8,["modelValue","disabled"])]),l("div",ie,[a(t(ee),null,{default:o(()=>[a(t(te),null,{default:o(()=>[a(t(S),{class:"bg-gray-100"},{default:o(()=>[a(t(T),null,{default:o(()=>e[8]||(e[8]=[m("Name")])),_:1,__:[8]}),a(t(T),{class:"w-24"},{default:o(()=>e[9]||(e[9]=[m("Actions")])),_:1,__:[9]})]),_:1})]),_:1}),a(t(se),null,{default:o(()=>[(f(!0),b(M,null,V(t(B),s=>(f(),W(t(S),{key:s.id},{default:o(()=>[a(t(j),null,{default:o(()=>[m(N(s.name),1)]),_:2},1024),a(t(j),{class:"flex gap-2"},{default:o(()=>[a(t(g),{variant:"ghost",size:"icon",onClick:d=>R(s.id)},{default:o(()=>[a(t(ne),{class:"h-4 w-4"})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),l("div",ue,[l("button",{onClick:z,disabled:t(p)===1||t(y),class:"px-3 py-1 rounded border border-gray-300 text-gray-700 hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed"}," Previous ",8,me),(f(!0),b(M,null,V(U.value,s=>(f(),b("button",{key:s,onClick:d=>w(s),class:X(["px-3 py-1 rounded border text-sm",s===t(p)?"bg-blue-600 border-blue-600 text-white":"border-gray-300 text-gray-700 hover:bg-gray-100"]),disabled:t(y)},N(s),11,ce))),128)),l("button",{onClick:q,disabled:t(p)===U.value||t(y),class:"px-3 py-1 rounded border border-gray-300 text-gray-700 hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed"}," Next ",8,fe)]),_.value?(f(),b("div",be,[l("div",ge,[e[12]||(e[12]=l("h2",{class:"text-lg font-semibold mb-4"},"Tambah Ukuran Baru",-1)),l("form",{onSubmit:P(D,["prevent"])},[l("div",pe,[a(t($),{modelValue:t(i).name,"onUpdate:modelValue":e[3]||(e[3]=s=>t(i).name=s),placeholder:"UOM Name",required:""},null,8,["modelValue"])]),l("div",_e,[a(t(g),{type:"button",variant:"outline",onClick:e[4]||(e[4]=s=>_.value=!1),class:"h-10"},{default:o(()=>e[10]||(e[10]=[m("Cancel")])),_:1,__:[10]}),a(t(g),{type:"submit",class:"bg-indigo-600 text-white py-2 h-10 rounded-md hover:bg-indigo-700 focus:ring-2 focus:ring-indigo-500"},{default:o(()=>e[11]||(e[11]=[m("Create")])),_:1,__:[11]})])],32)])])):O("",!0),v.value?(f(),b("div",ye,[l("div",ve,[e[15]||(e[15]=l("h2",{class:"text-lg font-semibold mb-4"},"Edit UOM",-1)),l("form",{onSubmit:P(I,["prevent"])},[l("div",xe,[a(t($),{modelValue:t(i).name,"onUpdate:modelValue":e[5]||(e[5]=s=>t(i).name=s),placeholder:"UOM Name",required:""},null,8,["modelValue"])]),l("div",he,[a(t(g),{type:"button",variant:"outline",onClick:e[6]||(e[6]=s=>v.value=!1),class:"h-10"},{default:o(()=>e[13]||(e[13]=[m("Cancel")])),_:1,__:[13]}),a(t(g),{type:"submit",class:"bg-indigo-600 text-white py-2 h-10 rounded-md hover:bg-indigo-700 focus:ring-2 focus:ring-indigo-500"},{default:o(()=>e[14]||(e[14]=[m("Update")])),_:1,__:[14]})])],32)])])):O("",!0)])]),_:1})],64))}});export{Te as default};
