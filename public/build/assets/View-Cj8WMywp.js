import{d as L,r as c,o as T,f as d,g as l,p as g,u as _,Z as V,x as N,k as t,C as z,j as r,y as u,F as h,B as H,V as F}from"./app-CJ7UkBbN.js";import{u as I}from"./useToast-u_qnC3Ro.js";import{u as R}from"./useProductionStore-CU947ll6.js";import{u as $}from"./useModelStore-BHTwvovN.js";import{u as A}from"./useMasterActivityRoleStore-BRNJGmMi.js";import{_ as j}from"./AppLayout.vue_vue_type_script_setup_true_lang-Bsw52OWo.js";import"./index-CcHQQhFt.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-Dmg2k5om.js";const E={id:"print-area",class:"p-4 md:p-6 space-y-4 md:space-y-6 print:bg-white"},q={class:"flex justify-between items-center"},G={class:"hidden print:block"},Q={class:"space-y-2 text-sm md:"},Z={key:0,class:"overflow-x-auto"},J={class:"w-full table-auto border text-sm md:"},K={class:"border px-2 md:px-3 py-1 md:py-2"},O={class:"border px-2 md:px-3 py-1 md:py-2"},U={class:"flex gap-2 no-print"},rt=L({__name:"View",props:{id:{},activity_role:{}},setup(w){const S=I(),k=R(),B=$(),M=A(),a=w,n=c(null),p=c(null),P=c(null),C=async()=>{try{const o=await k.fetchProductionsById(a.id);n.value=o;const e=await B.fetchModelById(o.model_id);P.value=e;const s=await M.getActivityRoleById(Number(a.activity_role));p.value=s}catch(o){console.error("Failed to fetch activity role",o),S.error("Failed to fetch data")}},D=()=>{var s;const o=document.body.innerHTML,e=((s=document.getElementById("print-area"))==null?void 0:s.innerHTML)||"";document.body.innerHTML=e,window.print(),document.body.innerHTML=o,location.reload()};return T(C),(o,e)=>(l(),d(h,null,[g(_(V),{title:"View Production"}),g(j,{breadcrumbs:[{title:"Production",href:`/production/${a.activity_role}`}]},{default:N(()=>{var s,m,y,v,b,f;return[t("div",E,[t("div",q,[e[1]||(e[1]=t("h1",{class:"text-xl md:text-2xl font-bold"}," Hasil Produksi ",-1)),t("div",G,"Printed on: "+r(new Date().toLocaleDateString()),1)]),t("div",Q,[t("div",null,[e[2]||(e[2]=t("strong",null,"Model :",-1)),u(" "+r(((m=(s=n.value)==null?void 0:s.model)==null?void 0:m.description)||"-"),1)]),t("div",null,[e[3]||(e[3]=t("strong",null,"Activity :",-1)),u(" "+r(((y=p.value)==null?void 0:y.name)||"-"),1)]),t("div",null,[e[4]||(e[4]=t("strong",null,"Tanggal :",-1)),u(" "+r((v=n.value)!=null&&v.created_at?new Date(n.value.created_at).toLocaleDateString("en-GB"):"-"),1)])]),(f=(b=n.value)==null?void 0:b.items)!=null&&f.length?(l(),d("div",Z,[e[6]||(e[6]=t("h2",{class:"font-semibold mb-2"},"Production Sizes",-1)),t("table",J,[e[5]||(e[5]=t("thead",null,[t("tr",{class:"bg-gray-100"},[t("th",{class:"border px-2 md:px-3 py-1 md:py-2 text-left"},"Size"),t("th",{class:"border px-2 md:px-3 py-1 md:py-2 text-left"},"Qty")])],-1)),t("tbody",null,[(l(!0),d(h,null,H(n.value.items,i=>{var x;return l(),d("tr",{key:i.size_id},[t("td",K,r(((x=i.size)==null?void 0:x.name)||i.size_id),1),t("td",O,r(i.qty),1)])}),128))])])])):z("",!0),t("div",U,[t("button",{onClick:D,class:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700"}," Print "),t("button",{onClick:e[0]||(e[0]=i=>_(F).visit(`/production/${a.activity_role}`)),type:"button",class:"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600"}," Back ")])])]}),_:1},8,["breadcrumbs"])],64))}});export{rt as default};
