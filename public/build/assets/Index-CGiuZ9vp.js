import{d as S,q as h,o as D,Q as P,f as v,g as n,p as s,u as t,Z as j,x as a,k as m,D as f,y as l,F as $,B as z,E as g,j as r,z as B,C as p}from"./app-CVBAo0jO.js";import{_ as A,a as E,b,c as d,d as N,e as u}from"./TableRow.vue_vue_type_script_setup_true_lang-CGqzRD6G.js";import{u as R}from"./useToast-DBfRd4e4.js";import{_ as V}from"./AppLayout.vue_vue_type_script_setup_true_lang-DBdUGih5.js";import{u as F}from"./useTransferStockStore-Dr28zG7C.js";import{P as L}from"./plus-drSnobf0.js";import{E as q}from"./eye-CrSyw7nt.js";import{S as I}from"./square-pen-BeXShVyt.js";import{T as M}from"./trash-2-B8PiUKCA.js";import"./index-D0JVoBCz.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-Bdp-WMDe.js";const Q={class:"px-4 py-4"},Z={class:"mb-6 flex items-center justify-between"},G={class:"rounded-md border"},le=S({__name:"Index",setup(H){const k=R(),_=F(),{transfers:w}=h(_);D(()=>{_.fetchTransfers()});const x=async c=>{var o,e;if(confirm("Are you sure you want to delete this transfer?"))try{await _.deleteTransfer(c),await _.fetchTransfers(),k.success("Transfer deleted successfully")}catch(i){k.error(((e=(o=i==null?void 0:i.response)==null?void 0:o.data)==null?void 0:e.message)??"Failed to delete transfer")}},C=P().props.auth.user.location_id,T=[{title:"Transfer Stocks",href:"/transfer-stocks"}];return(c,o)=>(n(),v($,null,[s(t(j),{title:"Transfer Stocks"}),s(V,{breadcrumbs:T},{default:a(()=>[m("div",Q,[m("div",Z,[s(t(f),{onClick:o[0]||(o[0]=e=>c.$inertia.visit("/transfer-stock/create")),class:"rounded-md bg-indigo-600 py-2 text-white hover:bg-indigo-700 focus:ring-2 focus:ring-indigo-500"},{default:a(()=>[s(t(L),{class:"mr-2 h-4 w-4"}),o[1]||(o[1]=l(" Add "))]),_:1,__:[1]})]),m("div",G,[s(t(A),null,{default:a(()=>[s(t(E),null,{default:a(()=>[s(t(b),{class:"bg-gray-100"},{default:a(()=>[s(t(d),null,{default:a(()=>o[2]||(o[2]=[l("Location")])),_:1,__:[2]}),s(t(d),null,{default:a(()=>o[3]||(o[3]=[l("Destination")])),_:1,__:[3]}),s(t(d),null,{default:a(()=>o[4]||(o[4]=[l("Sloc")])),_:1,__:[4]}),s(t(d),null,{default:a(()=>o[5]||(o[5]=[l("Date")])),_:1,__:[5]}),s(t(d),null,{default:a(()=>o[6]||(o[6]=[l("Status")])),_:1,__:[6]}),s(t(d),{class:"w-24"},{default:a(()=>o[7]||(o[7]=[l("Actions")])),_:1,__:[7]})]),_:1})]),_:1}),s(t(N),null,{default:a(()=>[(n(!0),v($,null,z(t(w),e=>(n(),g(t(b),{key:e.id},{default:a(()=>[s(t(u),null,{default:a(()=>{var i;return[l(r((i=e.location)==null?void 0:i.name),1)]}),_:2},1024),s(t(u),null,{default:a(()=>{var i;return[l(r((i=e.location_destination)==null?void 0:i.name),1)]}),_:2},1024),s(t(u),null,{default:a(()=>[l(r(e.sloc_id),1)]),_:2},1024),s(t(u),null,{default:a(()=>[l(r(e.created_at?new Date(e.created_at).toLocaleDateString():"-"),1)]),_:2},1024),s(t(u),null,{default:a(()=>[m("span",{class:B([e.status=="Pending"?"bg-green-100 text-green-800":"bg-red-100 text-red-800","rounded-full px-2 py-1 text-xs font-semibold"])},r(e.status),3)]),_:2},1024),s(t(u),{class:"flex gap-2"},{default:a(()=>{var i;return[e!=null&&e.id&&(e.status==="Accepted"||e.status==="Rejected")||((i=e.location_destination)==null?void 0:i.id)===t(C)?(n(),g(t(f),{key:0,variant:"ghost",size:"icon",class:"hover:bg-gray-100",onClick:y=>c.$inertia.visit(`/transfer-stock/${e.id}/view`)},{default:a(()=>[s(t(q),{class:"h-4 w-4"})]),_:2},1032,["onClick"])):p("",!0),e!=null&&e.id&&(e.status==="Pending"||e.status==="Rejected")?(n(),g(t(f),{key:1,variant:"ghost",size:"icon",class:"hover:bg-gray-100",onClick:y=>c.$inertia.visit(`/transfer-stock/${e.id}/edit`)},{default:a(()=>[s(t(I),{class:"h-4 w-4"})]),_:2},1032,["onClick"])):p("",!0),e!=null&&e.id&&(e.status==="Pending"||e.status==="Rejected")?(n(),g(t(f),{key:2,variant:"ghost",size:"icon",class:"hover:bg-gray-100",onClick:y=>x(e.id)},{default:a(()=>[s(t(M),{class:"h-4 w-4"})]),_:2},1032,["onClick"])):p("",!0)]}),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})])])]),_:1})],64))}});export{le as default};
