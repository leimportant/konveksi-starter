import{d as B,r as D,c as E,o as M,f as _,g as r,p as o,u as t,Z as P,x as a,k as p,D as q,y as s,j as u,F as v,B as b,E as S}from"./app-Bz11cHyA.js";import{_ as $}from"./Input.vue_vue_type_script_setup_true_lang-DhJaRDa-.js";import{_ as I,a as N,b as w,c,d as O,e as n}from"./TableRow.vue_vue_type_script_setup_true_lang-B0mc5Cit.js";import{_ as C}from"./AppLayout.vue_vue_type_script_setup_true_lang-BqRh1tsS.js";import{u as F}from"./useReportStore-PvGEUdbr.js";import"./index-DCxnSDSs.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-fgBIgIID.js";const U={class:"py-6"},j={class:"mx-auto max-w-7xl sm:px-2 lg:px-2"},A={class:"overflow-hidden bg-white shadow-sm sm:rounded-lg"},L={class:"mb-4 flex space-x-4"},K={key:0},Q={key:1,class:"text-red-500"},Y={key:2},et=B({__name:"ProductionSummary",setup(Z){const T=[{title:"Report Production Summary",href:"/reports/production-summary"}],d=F(),g=D(""),x=D(""),k=D(""),h=()=>{d.fetchProductionSummary(g.value,x.value,k.value)},V=E(()=>{const i=new Map;return d.productionSummary.forEach(e=>{if(e.activities)for(const[l,m]of Object.entries(e.activities)){const f=Number(l);i.has(f)||i.set(f,m.name||`Role ${f}`)}}),Array.from(i.entries()).map(([e,l])=>({id:e,name:l}))});return M(()=>{const i=new Date,e=new Date(i.getFullYear(),i.getMonth(),1);g.value=e.toISOString().split("T")[0],x.value=i.toISOString().split("T")[0],h()}),(i,e)=>(r(),_(v,null,[o(t(P),{title:"Production Summary Report"}),o(C,{breadcrumbs:T},{header:a(()=>e[3]||(e[3]=[p("h2",{class:"text-xl font-semibold leading-tight text-gray-800"},"Production Summary Report",-1)])),default:a(()=>[p("div",U,[p("div",j,[p("div",A,[p("div",L,[o(t($),{type:"date",modelValue:g.value,"onUpdate:modelValue":e[0]||(e[0]=l=>g.value=l)},null,8,["modelValue"]),o(t($),{type:"date",modelValue:x.value,"onUpdate:modelValue":e[1]||(e[1]=l=>x.value=l)},null,8,["modelValue"]),o(t($),{type:"text",modelValue:k.value,"onUpdate:modelValue":e[2]||(e[2]=l=>k.value=l),placeholder:"Search by product name"},null,8,["modelValue"]),o(t(q),{onClick:h,class:"bg-indigo-600 text-white py-2 h-10 rounded-md hover:bg-indigo-700 focus:ring-2 focus:ring-indigo-500"},{default:a(()=>e[4]||(e[4]=[s("Tampilkan")])),_:1,__:[4]})]),t(d).loading?(r(),_("div",K,"Loading...")):t(d).error?(r(),_("div",Q,"Error: "+u(t(d).error.message),1)):(r(),_("div",Y,[o(t(I),null,{default:a(()=>[o(t(N),null,{default:a(()=>[o(t(w),{class:"bg-gray-100"},{default:a(()=>[o(t(c),null,{default:a(()=>e[5]||(e[5]=[s("ID")])),_:1,__:[5]}),o(t(c),null,{default:a(()=>e[6]||(e[6]=[s("Description")])),_:1,__:[6]}),o(t(c),null,{default:a(()=>e[7]||(e[7]=[s("Start Date")])),_:1,__:[7]}),o(t(c),null,{default:a(()=>e[8]||(e[8]=[s("End Date")])),_:1,__:[8]}),(r(!0),_(v,null,b(V.value,l=>(r(),S(t(c),{key:l.id},{default:a(()=>[s(u(l.name),1)]),_:2},1024))),128)),o(t(c),null,{default:a(()=>e[9]||(e[9]=[s("Total Qty")])),_:1,__:[9]})]),_:1})]),_:1}),o(t(O),null,{default:a(()=>[(r(!0),_(v,null,b(t(d).productionSummary,l=>(r(),S(t(w),{key:l.model_id},{default:a(()=>[o(t(n),null,{default:a(()=>[s(u(l.model_id),1)]),_:2},1024),o(t(n),null,{default:a(()=>[s(u(l.description),1)]),_:2},1024),o(t(n),null,{default:a(()=>[s(u(l.start_date),1)]),_:2},1024),o(t(n),null,{default:a(()=>[s(u(l.end_date??"-"),1)]),_:2},1024),(r(!0),_(v,null,b(V.value,m=>(r(),S(t(n),{key:m.id+"-"+l.model_id},{default:a(()=>{var f,y;return[s(u(((y=(f=l.activities)==null?void 0:f[m.id])==null?void 0:y.qty)??"-"),1)]}),_:2},1024))),128)),o(t(n),{class:"font-semibold"},{default:a(()=>[s(u(l.subtotal_qty),1)]),_:2},1024)]),_:2},1024))),128))]),_:1}),p("tfoot",null,[o(t(w),null,{default:a(()=>[o(t(n),{colspan:"4",class:"text-right font-bold"},{default:a(()=>e[10]||(e[10]=[s("Total")])),_:1,__:[10]}),(r(!0),_(v,null,b(V.value,l=>(r(),S(t(n),{key:"footer-"+l.id,class:"font-bold"},{default:a(()=>[s(u(t(d).productionSummary.reduce((m,f)=>{var y,R;return m+(((R=(y=f.activities)==null?void 0:y[l.id])==null?void 0:R.qty)||0)},0)),1)]),_:2},1024))),128)),o(t(n),{class:"font-bold"},{default:a(()=>[s(u(t(d).productionSummary.reduce((l,m)=>l+(m.subtotal_qty||0),0)),1)]),_:1})]),_:1})])]),_:1})]))])])])]),_:1})],64))}});export{et as default};
