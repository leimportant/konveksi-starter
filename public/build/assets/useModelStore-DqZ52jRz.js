import{M as d,b as i}from"./app-BxkTEHtz.js";const h=d("model",{state:()=>({loading:!1,error:null,models:[],total:0,currentPage:1,lastPage:1,filters:{search:"",start_date:null,end_date:null}}),actions:{async createModel(e){var t,s;try{if(this.loading=!0,!e.start_date)throw new Error("Tanggal mulai harus diisi");return(await i.post("/api/models",{...e,start_date:e.start_date})).data}catch(a){throw this.error=((s=(t=a.response)==null?void 0:t.data)==null?void 0:s.message)||"Terjadi kesalahan saat membuat model",a}finally{this.loading=!1}},async fetchModels(e=1){var t,s;try{this.loading=!0;const a={...this.filters,page:e},r=await i.get("/api/models/list",{params:a});return this.models=r.data.data.data,this.total=r.data.data.total,this.currentPage=r.data.data.current_page,this.lastPage=r.data.data.last_page,r.data}catch(a){throw this.error=((s=(t=a.response)==null?void 0:t.data)==null?void 0:s.message)||"Terjadi kesalahan saat mengambil data model",a}finally{this.loading=!1}},setFilter(e,t){this.filters[e]=t,this.fetchModels(1)},goToPage(e){e<1||e>this.lastPage||this.fetchModels(e)},nextPage(){this.currentPage<this.lastPage&&this.fetchModels(this.currentPage+1)},prevPage(){this.currentPage>1&&this.fetchModels(this.currentPage-1)},async fetchModelById(e){var t,s;try{this.loading=!0;const a=await i.get(`/api/models/${e}`);if(!a.data||!a.data.data)throw new Error("Data model tidak ditemukan");return a.data}catch(a){throw this.error=((s=(t=a.response)==null?void 0:t.data)==null?void 0:s.message)||a.message||"Gagal mengambil data model",a}finally{this.loading=!1}},async updateModel(e,t){var s,a;try{this.loading=!0;const r=await i.put(`/api/models/${e}`,t),o=this.models.findIndex(l=>l.id===e);return o!==-1&&(this.models[o]=r.data.data),r.data}catch(r){throw this.error=((a=(s=r.response)==null?void 0:s.data)==null?void 0:a.message)||"Terjadi kesalahan saat memperbarui model",r}finally{this.loading=!1}},async deleteModel(e){var t,s;try{this.loading=!0,await i.delete(`/api/models/${e}`),this.models=this.models.filter(a=>a.id!==e)}catch(a){throw this.error=((s=(t=a.response)==null?void 0:t.data)==null?void 0:s.message)||"Terjadi kesalahan saat menghapus model",a}finally{this.loading=!1}}}});export{h as u};
