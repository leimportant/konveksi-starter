import{M as d,b as a,d as u,f as t,g as n,k as o,C as p,j as c,u as r,p as l}from"./app-BxkTEHtz.js";const h=void 0;function f(s){throw new Error("VAPID public key is missing!")}const _=d("pushNotification",{state:()=>({isSubscribed:!1,error:""}),actions:{async subscribe(){if(this.error=null,!("serviceWorker"in navigator)||!("PushManager"in window)){this.error="Push notifications are not supported in your browser.";return}try{const e=await(await navigator.serviceWorker.register("/service-worker.js")).pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:f(h)});await a.post("/api/push/subscribe",e,{headers:{"Content-Type":"application/json"}}),this.isSubscribed=!0}catch(s){this.error=s instanceof Error?s.message:String(s)}},async send(){if(this.error=null,!this.isSubscribed){this.error="You must subscribe to push notifications first.";return}try{await a.post("/api/push/send",{},{headers:{"Content-Type":"application/json"}})}catch(s){this.error=s instanceof Error?s.message:String(s)}}}}),g=["disabled"],S={key:0,class:"text-red-500"},m=["disabled"],y=u({__name:"PushSubscribe",setup(s){const e=_();function i(){e.subscribe()}function b(){e.send()}return(k,w)=>(n(),t("div",null,[o("button",{onClick:i,disabled:r(e).isSubscribed},c(r(e).isSubscribed?"Subscribed!":"Enable Push Notifications"),9,g),r(e).error?(n(),t("p",S,c(r(e).error),1)):p("",!0),o("button",{onClick:b,disabled:!r(e).isSubscribed}," Send Notification ",8,m)]))}}),v=u({__name:"notification",setup(s){return(e,i)=>(n(),t("div",null,[i[0]||(i[0]=o("h1",null,"Notification Page",-1)),l(y)]))}});export{v as default};
