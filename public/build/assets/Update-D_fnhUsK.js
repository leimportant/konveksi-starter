import{d as G,q as V,T as C,o as O,f as u,g as a,p as l,u as r,Z as D,x as c,k as i,O as T,l as m,F as p,B as f,j as y,U as g,m as $,D as w,y as k}from"./app-BwnCji69.js";import{_ as E}from"./AppLayout.vue_vue_type_script_setup_true_lang-B9PZ1YTo.js";import{_ as v}from"./Input.vue_vue_type_script_setup_true_lang-vogTXVS2.js";import{u as F}from"./useToast-D9UZrMXp.js";import{u as N}from"./useGoodReceiveStore-wpqmsnuX.js";import{u as j}from"./useModelStore-Di1MUko5.js";import{u as Q}from"./useUomStore-qifxp2oF.js";import"./index-rHXr64hP.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-ULnn2JbI.js";const I={class:"px-4 py-4"},L={class:"mx-auto"},P={class:"bg-white rounded-lg shadow p-6"},Z={class:"grid grid-cols-2 gap-6"},z=["value"],A={class:"grid grid-cols-2 gap-6"},H=["value"],J={class:"grid grid-cols-2 gap-6"},K=["value"],W={class:"flex justify-end gap-4"},de=G({__name:"Update",props:{id:{}},setup(M){const s=F(),b=M,q=N(),_=j(),x=Q(),{models:R}=V(_),{items:U}=V(x),t=C({date:"",model_id:0,description:"",qty_base:0,qty_convert:0,uom_base:0,uom_convert:0,recipent:""}),S=[{title:"Good Receive",href:"/good-receive"},{title:"Edit",href:`/good-receive/${b.id}/edit`}];O(async()=>{var n,e;try{await Promise.all([_.fetchModels(),x.fetchUoms()]);const d=(await q.fetchGoodReceivesById(b.id)).data;t.date=d.date?d.date.split("T")[0]:"",t.model_id=d.model_id,t.description=d.description,t.qty_base=d.qty_base,t.qty_convert=d.qty_convert,t.uom_base=d.uom_base,t.uom_convert=d.uom_convert,t.recipent=d.recipent}catch(o){s.error(((e=(n=o==null?void 0:o.response)==null?void 0:n.data)==null?void 0:e.message)??"Failed to fetch Good Receive data")}});const B=async()=>{var n,e;if(!t.model_id)return s.error("Model is required");if(!t.description)return s.error("Description is required");if(!t.qty_base||t.qty_base<=0)return s.error("Base quantity must be greater than 0");if(!t.qty_convert||t.qty_convert<=0)return s.error("Convert quantity must be greater than 0");if(!t.uom_base)return s.error("Base UOM is required");if(!t.uom_convert)return s.error("Convert UOM is required");if(!t.recipent)return s.error("Recipient is required");try{await q.updateGoodReceive(b.id,{date:t.date,model_id:Number(t.model_id),description:t.description,recipent:t.recipent}),s.success("Good Receive updated successfully"),window.location.href="/good-receive"}catch(o){s.error(((e=(n=o==null?void 0:o.response)==null?void 0:n.data)==null?void 0:e.message)??"Failed to update Good Receive")}};return(n,e)=>(a(),u(p,null,[l(r(D),{title:"Edit Good Receive"}),l(E,{breadcrumbs:S},{default:c(()=>[i("div",I,[i("div",L,[i("div",P,[e[22]||(e[22]=i("h2",{class:"text-lg font-semibold mb-6"},"Edit Good Receive",-1)),i("form",{onSubmit:T(B,["prevent"]),class:"space-y-6"},[i("div",Z,[i("div",null,[e[9]||(e[9]=i("label",{class:"block text-sm font-medium mb-1"},"Date",-1)),l(r(v),{type:"date",modelValue:r(t).date,"onUpdate:modelValue":e[0]||(e[0]=o=>r(t).date=o),required:""},null,8,["modelValue"])]),i("div",null,[e[11]||(e[11]=i("label",{class:"block text-sm font-medium mb-1"},"Model",-1)),m(i("select",{"onUpdate:modelValue":e[1]||(e[1]=o=>r(t).model_id=o),class:"w-full rounded-md border border-input px-3 py-2",required:""},[e[10]||(e[10]=i("option",{value:"0"},"Select Model",-1)),(a(!0),u(p,null,f(r(R),o=>(a(),u("option",{key:o.id,value:o.id},y(o.description),9,z))),128))],512),[[g,r(t).model_id]])])]),i("div",null,[e[12]||(e[12]=i("label",{class:"block text-sm font-medium mb-1"},"Description",-1)),m(i("textarea",{"onUpdate:modelValue":e[2]||(e[2]=o=>r(t).description=o),rows:"3",class:"w-full rounded-md border border-input px-3 py-2",required:""},null,512),[[$,r(t).description]])]),i("div",A,[i("div",null,[e[13]||(e[13]=i("label",{class:"block text-sm font-medium mb-1"},"Base Quantity",-1)),l(r(v),{type:"number",modelValue:r(t).qty_base,"onUpdate:modelValue":e[3]||(e[3]=o=>r(t).qty_base=o),step:"0.01",min:"0",required:""},null,8,["modelValue"])]),i("div",null,[e[15]||(e[15]=i("label",{class:"block text-sm font-medium mb-1"},"Base UOM",-1)),m(i("select",{"onUpdate:modelValue":e[4]||(e[4]=o=>r(t).uom_base=o),class:"w-full rounded-md border border-input px-3 py-2",required:""},[e[14]||(e[14]=i("option",{value:"0"},"Select UOM",-1)),(a(!0),u(p,null,f(r(U),o=>(a(),u("option",{key:o.id,value:o.id},y(o.name),9,H))),128))],512),[[g,r(t).uom_base]])])]),i("div",J,[i("div",null,[e[16]||(e[16]=i("label",{class:"block text-sm font-medium mb-1"},"Convert Quantity",-1)),l(r(v),{type:"number",modelValue:r(t).qty_convert,"onUpdate:modelValue":e[5]||(e[5]=o=>r(t).qty_convert=o),step:"0.01",min:"0",required:""},null,8,["modelValue"])]),i("div",null,[e[18]||(e[18]=i("label",{class:"block text-sm font-medium mb-1"},"Convert UOM",-1)),m(i("select",{"onUpdate:modelValue":e[6]||(e[6]=o=>r(t).uom_convert=o),class:"w-full rounded-md border border-input px-3 py-2",required:""},[e[17]||(e[17]=i("option",{value:"0"},"Select UOM",-1)),(a(!0),u(p,null,f(r(U),o=>(a(),u("option",{key:o.id,value:o.id},y(o.name),9,K))),128))],512),[[g,r(t).uom_convert]])])]),i("div",null,[e[19]||(e[19]=i("label",{class:"block text-sm font-medium mb-1"},"Recipient",-1)),l(r(v),{modelValue:r(t).recipent,"onUpdate:modelValue":e[7]||(e[7]=o=>r(t).recipent=o),required:""},null,8,["modelValue"])]),i("div",W,[l(r(w),{type:"button",variant:"outline",onClick:e[8]||(e[8]=o=>n.$inertia.visit("/good-receive"))},{default:c(()=>e[20]||(e[20]=[k(" Cancel ")])),_:1,__:[20]}),l(r(w),{type:"submit",class:"bg-indigo-600 text-white py-2 h-10 rounded-md hover:bg-indigo-700 focus:ring-2 focus:ring-indigo-500"},{default:c(()=>e[21]||(e[21]=[k("Update")])),_:1,__:[21]})])],32)])])])]),_:1})],64))}});export{de as default};
