import{d as N,q as j,r as u,o as q,f as i,g as o,p as n,u as a,Z as I,x as p,k as e,D as g,y as L,G as M,F as x,B as w,j as y,E as $,C}from"./app-BLOMClMO.js";import{_ as O}from"./Input.vue_vue_type_script_setup_true_lang-DKMhKz4H.js";import{u as E}from"./useToast-C9x9jF4x.js";import{_ as K}from"./AppLayout.vue_vue_type_script_setup_true_lang-_mVlUDwO.js";import{u as Q}from"./useProductionStore-CKJovNX-.js";import{P as R}from"./plus-DcRksKsP.js";import{S as G}from"./square-pen-B7JjyCW5.js";import{T as U}from"./trash-2-B8YCx3uy.js";import{V as Z}from"./view-BrR1Z2eI.js";import"./index-nSIjBrBy.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-BwS9btDF.js";const H={class:"px-3 py-4"},J={class:"mb-4 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3"},W={class:"flex flex-1 gap-2"},X={key:0,class:"py-4 text-center text-sm text-gray-500"},Y={key:1,class:"space-y-2"},tt={class:"overflow-x-auto rounded-md border border-gray-200 dark:border-gray-700"},et={class:"min-w-full table-auto text-sm text-left text-gray-800 dark:text-gray-100"},st={class:"px-3 py-2 max-w-[160px] truncate"},at={class:"px-3 py-2 truncate"},ot={class:"px-3 py-2 whitespace-nowrap"},rt={key:0},it={key:1},nt={class:"px-3 py-2 whitespace-nowrap"},dt={class:"px-3 py-2 text-right"},ct={class:"flex justify-end gap-1 sm:gap-2"},kt=N({__name:"Index",props:{activity_role:{}},setup(S){const _=E(),f=Q(),{productions:P,loading:V}=j(f),D=u(1),T=u(10),z=u("created_at"),B=u("desc"),h=S,F=[{title:"Production",href:`/production/${h.activity_role}`}],m=u(""),k=u({from:null,to:null}),v=async()=>{var d,s,t,r;try{await f.fetchProductions({page:D.value,per_page:T.value,sort_field:z.value,sort_order:B.value,activity_role_id:h.activity_role,search:m.value,date_from:(d=k.value.from)==null?void 0:d.toISOString(),date_to:(s=k.value.to)==null?void 0:s.toISOString()})}catch(c){_.error(((r=(t=c==null?void 0:c.response)==null?void 0:t.data)==null?void 0:r.message)??"Failed to fetch productions")}};q(v);const A=async d=>{var s,t;if(confirm("Are you sure you want to delete this production?"))try{await f.deleteProduction(d),_.success("Production deleted successfully"),await v()}catch(r){_.error(((t=(s=r==null?void 0:r.response)==null?void 0:s.data)==null?void 0:t.message)??"Failed to delete production")}};return(d,s)=>(o(),i(x,null,[n(a(I),{title:"Production Management"}),n(K,{breadcrumbs:F},{default:p(()=>[e("div",H,[e("div",J,[e("div",W,[n(a(g),{onClick:s[0]||(s[0]=t=>d.$inertia.visit(`/production/${h.activity_role}/create`)),class:"flex-shrink-0 flex items-center gap-2 rounded-md bg-indigo-600 px-3 py-2 text-sm font-medium text-white hover:bg-indigo-700 focus:ring-2 focus:ring-indigo-500"},{default:p(()=>[n(a(R),{class:"h-4 w-4"}),s[2]||(s[2]=L(" Tambah Data "))]),_:1,__:[2]}),n(a(O),{modelValue:m.value,"onUpdate:modelValue":s[1]||(s[1]=t=>m.value=t),placeholder:"Search...",class:"flex-1 text-sm",onKeyup:M(v,["enter"])},null,8,["modelValue"])])]),a(V)?(o(),i("div",X,"Loading...")):(o(),i("div",Y,[e("div",tt,[e("table",et,[s[3]||(s[3]=e("thead",{class:"bg-gray-100 dark:bg-gray-800 text-xs font-semibold uppercase text-gray-600 dark:text-gray-300"},[e("tr",null,[e("th",{class:"px-3 py-2"},"Model"),e("th",{class:"px-3 py-2"},"Activity"),e("th",{class:"px-3 py-2"},"Size/Qty"),e("th",{class:"px-3 py-2"},"Created At"),e("th",{class:"px-3 py-2 text-right"},"Actions")])],-1)),e("tbody",null,[(o(!0),i(x,null,w(a(P),t=>{var r,c,b;return o(),i("tr",{key:t.id,class:"border-b border-gray-100 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-800"},[e("td",st,y(((r=t.model)==null?void 0:r.description)||"-"),1),e("td",at,y(((c=t.activity_role)==null?void 0:c.name)||"-"),1),e("td",ot,[(b=t.items)!=null&&b.length?(o(),i("div",rt,[(o(!0),i(x,null,w(t.items,l=>(o(),i("div",{key:l.id},y(l.size_id)+": "+y(l.qty),1))),128))])):(o(),i("div",it,"-"))]),e("td",nt,y(t.created_at?new Date(t.created_at).toLocaleDateString():"-"),1),e("td",dt,[e("div",ct,[t.status===1||t.status===3?(o(),$(a(g),{key:0,variant:"ghost",size:"icon",class:"hover:bg-gray-100 dark:hover:bg-gray-700",onClick:l=>d.$inertia.visit(`/production/${t.activity_role_id}/edit/${t.id}`)},{default:p(()=>[n(a(G),{class:"h-4 w-4"})]),_:2},1032,["onClick"])):C("",!0),t.status===1||t.status===3?(o(),$(a(g),{key:1,variant:"ghost",size:"icon",class:"hover:bg-gray-100 dark:hover:bg-gray-700",onClick:l=>A(t.id)},{default:p(()=>[n(a(U),{class:"h-4 w-4"})]),_:2},1032,["onClick"])):C("",!0),n(a(g),{variant:"ghost",size:"icon",class:"hover:bg-gray-100 dark:hover:bg-gray-700",onClick:l=>d.$inertia.visit(`/production/${t.activity_role_id}/view/${t.id}`)},{default:p(()=>[n(a(Z),{class:"h-4 w-4"})]),_:2},1032,["onClick"])])])])}),128))])])])]))])]),_:1})],64))}});export{kt as default};
