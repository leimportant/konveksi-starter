import{d as G,r as N,T as H,q as J,c as O,o as Q,f as p,g as f,p as o,u as t,Z as W,x as l,k as d,C as P,D as b,y as i,N as X,F as q,B as S,E as Y,j as x,z as ee,K as U}from"./app-DiFJObDm.js";import{_ as te}from"./AppLayout.vue_vue_type_script_setup_true_lang-CUkq1tMm.js";import{_}from"./Input.vue_vue_type_script_setup_true_lang-DHjRIqoe.js";import{_ as ae,a as oe,b as T,c as w,d as ne,e as B}from"./TableRow.vue_vue_type_script_setup_true_lang-CFz0HVOE.js";import{u as se}from"./useToast-D0aidzOw.js";import{u as le}from"./useBankAccountStore-CEcpbWt5.js";import{d as de}from"./debounce-BcZQbp_F.js";import{P as re}from"./plus-BIZRKtxK.js";import{S as ue}from"./square-pen-DZqpCsc0.js";import{T as ie}from"./trash-2-CBbE-BXV.js";import"./index-BotdtPMh.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-CE4OZocD.js";const ce={class:"px-4 py-4"},me={class:"flex justify-between items-center gap-2 mb-2"},fe={class:"rounded-md border"},be={class:"flex justify-end mt-4 space-x-2"},_e=["disabled"],pe=["onClick","disabled"],ge=["disabled"],ve={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},ye={class:"bg-white p-6 rounded-lg w-96"},ke={class:"mb-4"},he={class:"mb-4"},xe={class:"mb-4"},we={class:"flex justify-end gap-2"},Be={key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},Ve={class:"bg-white p-6 rounded-lg w-96"},Ae={class:"mb-4"},Ce={class:"mb-4"},$e={class:"mb-4"},Ne={class:"flex justify-end gap-2"},Ke=G({__name:"Index",setup(qe){const c=se(),y=N(!1),k=N(!1),g=N(null),n=H({id:"",name:"",account_number:""}),j=[{title:"Bank Account",href:"/bank-account"}],r=le(),{bankAccount:E,currentPage:v,lastPage:F,loading:h,filterName:V}=J(r),A=O(()=>F.value||1),C=async s=>{s<1||s>A.value||await r.fetchBankAccount(s)},z=()=>C(v.value+1),M=()=>C(v.value-1),D=de((s,e)=>{r.setFilter(s,e)},400),I=s=>{const e=s.target;D("name",e.value)};Q(()=>{r.fetchBankAccount()});const R=async()=>{var s,e,a,u;if(!n.name)return c.error("Name is required");try{await r.createBankAccount(n.id,n.name,n.account_number),c.success("Bank Account created successfully"),n.reset(),r.loaded=!1,await r.fetchBankAccount(),y.value=!1}catch(m){const $=(u=(a=(e=(s=m==null?void 0:m.response)==null?void 0:s.data)==null?void 0:e.errors)==null?void 0:a.name)==null?void 0:u[0];c.error($||"Failed to create Bank Account ")}},K=s=>{g.value=s,n.id=s.id,n.name=s.name,n.account_number=s.account_number,k.value=!0},L=async()=>{var s,e,a,u;if(!g.value||!n.name)return c.error("Name is required");if(!g.value||!n.account_number)return c.error("Account Numberis required");try{await r.updateBankAccount(g.value.id,n.name,n.account_number),c.success("Bank Account updated successfully"),n.reset(),r.loaded=!1,await r.fetchBankAccount(),k.value=!1,g.value=null}catch(m){const $=(u=(a=(e=(s=m==null?void 0:m.response)==null?void 0:s.data)==null?void 0:e.errors)==null?void 0:a.name)==null?void 0:u[0];c.error($||"Failed to update Bank Account")}},Z=async s=>{var e,a;if(confirm("Are you sure you want to delete this Bank Account?"))try{await r.deleteBankAccount(s),r.loaded=!1,await r.fetchBankAccount(),c.success("Bank Account deleted successfully")}catch(u){c.error(((a=(e=u==null?void 0:u.response)==null?void 0:e.data)==null?void 0:a.message)??"Failed to delete Bank Account")}};return(s,e)=>(f(),p(q,null,[o(t(W),{title:"Bank Account Management"}),o(te,{breadcrumbs:j},{default:l(()=>[d("div",ce,[d("div",me,[o(t(b),{onClick:e[0]||(e[0]=a=>y.value=!0),class:"bg-indigo-600 text-white py-2 h-10 rounded-md hover:bg-indigo-700 focus:ring-2 focus:ring-indigo-500"},{default:l(()=>[o(t(re),{class:"h-4 w-4"}),e[10]||(e[10]=i(" Add "))]),_:1,__:[10]}),o(t(_),{modelValue:t(V),"onUpdate:modelValue":e[1]||(e[1]=a=>X(V)?V.value=a:null),placeholder:"Search",onInput:I,class:"w-64","aria-label":"Search",disabled:t(h)},null,8,["modelValue","disabled"])]),d("div",fe,[o(t(ae),null,{default:l(()=>[o(t(oe),null,{default:l(()=>[o(t(T),{class:"bg-gray-100"},{default:l(()=>[o(t(w),null,{default:l(()=>e[11]||(e[11]=[i("Id")])),_:1,__:[11]}),o(t(w),null,{default:l(()=>e[12]||(e[12]=[i("Name")])),_:1,__:[12]}),o(t(w),null,{default:l(()=>e[13]||(e[13]=[i("No Rekening")])),_:1,__:[13]}),o(t(w),{class:"w-24"},{default:l(()=>e[14]||(e[14]=[i("Actions")])),_:1,__:[14]})]),_:1})]),_:1}),o(t(ne),null,{default:l(()=>[(f(!0),p(q,null,S(t(E),a=>(f(),Y(t(T),{key:a.id},{default:l(()=>[o(t(B),null,{default:l(()=>[i(x(a.id),1)]),_:2},1024),o(t(B),null,{default:l(()=>[i(x(a.name),1)]),_:2},1024),o(t(B),null,{default:l(()=>[i(x(a.account_number),1)]),_:2},1024),o(t(B),{class:"flex gap-2"},{default:l(()=>[o(t(b),{variant:"ghost",size:"icon",onClick:u=>K(a)},{default:l(()=>[o(t(ue),{class:"h-4 w-4"})]),_:2},1032,["onClick"]),o(t(b),{variant:"ghost",size:"icon",onClick:u=>Z(a.id)},{default:l(()=>[o(t(ie),{class:"h-4 w-4"})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),d("div",be,[d("button",{onClick:M,disabled:t(v)===1||t(h),class:"px-3 py-1 rounded border border-gray-300 text-gray-700 hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed"}," Previous ",8,_e),(f(!0),p(q,null,S(A.value,a=>(f(),p("button",{key:a,onClick:u=>C(a),class:ee(["px-3 py-1 rounded border text-sm",a===t(v)?"bg-blue-600 border-blue-600 text-white":"border-gray-300 text-gray-700 hover:bg-gray-100"]),disabled:t(h)},x(a),11,pe))),128)),d("button",{onClick:z,disabled:t(v)===A.value||t(h),class:"px-3 py-1 rounded border border-gray-300 text-gray-700 hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed"}," Next ",8,ge)]),y.value?(f(),p("div",ve,[d("div",ye,[e[17]||(e[17]=d("h2",{class:"text-lg font-semibold mb-4"},"Tambah Bank Account Baru",-1)),d("form",{onSubmit:U(R,["prevent"])},[d("div",ke,[o(t(_),{modelValue:t(n).id,"onUpdate:modelValue":e[2]||(e[2]=a=>t(n).id=a),placeholder:"BCA",required:""},null,8,["modelValue"])]),d("div",he,[o(t(_),{modelValue:t(n).name,"onUpdate:modelValue":e[3]||(e[3]=a=>t(n).name=a),placeholder:"Nama",required:""},null,8,["modelValue"])]),d("div",xe,[o(t(_),{modelValue:t(n).account_number,"onUpdate:modelValue":e[4]||(e[4]=a=>t(n).account_number=a),placeholder:"1234498",required:""},null,8,["modelValue"])]),d("div",we,[o(t(b),{type:"button",variant:"outline",onClick:e[5]||(e[5]=a=>y.value=!1),class:"h-10"},{default:l(()=>e[15]||(e[15]=[i("Cancel")])),_:1,__:[15]}),o(t(b),{type:"submit",class:"bg-indigo-600 text-white py-2 h-10 rounded-md hover:bg-indigo-700 focus:ring-2 focus:ring-indigo-500"},{default:l(()=>e[16]||(e[16]=[i("Create")])),_:1,__:[16]})])],32)])])):P("",!0),k.value?(f(),p("div",Be,[d("div",Ve,[e[20]||(e[20]=d("h2",{class:"text-lg font-semibold mb-4"},"Edit Bank Account",-1)),d("form",{onSubmit:U(L,["prevent"])},[d("div",Ae,[o(t(_),{modelValue:t(n).id,"onUpdate:modelValue":e[6]||(e[6]=a=>t(n).id=a),placeholder:"BCA",required:"",readonly:""},null,8,["modelValue"])]),d("div",Ce,[o(t(_),{modelValue:t(n).name,"onUpdate:modelValue":e[7]||(e[7]=a=>t(n).name=a),placeholder:"Nama",required:""},null,8,["modelValue"])]),d("div",$e,[o(t(_),{modelValue:t(n).account_number,"onUpdate:modelValue":e[8]||(e[8]=a=>t(n).account_number=a),placeholder:"1234498",required:""},null,8,["modelValue"])]),d("div",Ne,[o(t(b),{type:"button",variant:"outline",onClick:e[9]||(e[9]=a=>k.value=!1),class:"h-10"},{default:l(()=>e[18]||(e[18]=[i("Cancel")])),_:1,__:[18]}),o(t(b),{type:"submit",class:"bg-indigo-600 text-white py-2 h-10 rounded-md hover:bg-indigo-700 focus:ring-2 focus:ring-indigo-500"},{default:l(()=>e[19]||(e[19]=[i("Update")])),_:1,__:[19]})])],32)])])):P("",!0)])]),_:1})],64))}});export{Ke as default};
