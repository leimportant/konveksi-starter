import{R as m,r as e,b as u}from"./app-B8MH_BKJ.js";const P=m("activityGroup",()=>{const v=e([]),p=e([]),y=e(0),l=e(!1),n=e(!1),d=e(1),f=e(""),i=e(!1),c=e(null),g=e("N");return{activityGroups:v,items:p,total:y,loaded:l,loading:n,currentPage:d,filterName:f,isLoading:i,error:c,isCreateProduksi:g,fetchActivity:async(s=1,o=50)=>{n.value=!0,l.value=!1,d.value=s;try{const t={page:s,perPage:o,search:f.value},a=(await u.get("/api/activity-group",{params:t})).data;p.value=a.data,y.value=a.total||0,l.value=!0}catch(t){throw console.error("❌ Failed to fetch activity groups:",t),t}finally{n.value=!1}},fetchActivityGroups:async()=>{var s,o;i.value=!0,c.value=null;try{const t=await u.get("/api/user-activity-group"),r=t.data.data;if(g.value=t.data.isCreateProduksi,Array.isArray(r))v.value=r.sort((a,h)=>a.sorting-h.sorting);else throw new Error("Invalid response format")}catch(t){console.error("❌ Failed to fetch activity groups:",t),c.value=((o=(s=t.response)==null?void 0:s.data)==null?void 0:o.message)||t.message||"Failed to fetch activity groups"}finally{i.value=!1}},assignToRole:async(s,o)=>{var t,r;try{return i.value=!0,c.value=null,(await u.post(`/api/roles/${s}/activity-groups`,{activity_groups:o})).data}catch(a){throw console.error("❌ Failed to assign activity groups:",a),c.value=((r=(t=a.response)==null?void 0:t.data)==null?void 0:r.message)||a.message||"Failed to assign activity groups",a}finally{i.value=!1}}}});export{P as u};
