import{d as L,r as $,q as A,o as M,w as R,c as U,f as _,g as i,p as l,u as t,Z,x as a,k as n,E as N,D as c,y as o,F as C,B as P,j as r,z as G,aR as H,C as Q,b as J}from"./app-Dvnty1_T.js";import{_ as S}from"./Input.vue_vue_type_script_setup_true_lang-BDhKtwqs.js";import{_ as K,a as O,b as V,c as f,d as W,e as y}from"./TableRow.vue_vue_type_script_setup_true_lang-CoEJ4s3p.js";import{u as X}from"./useToast-BYGji__r.js";import{_ as Y}from"./AppLayout.vue_vue_type_script_setup_true_lang-UgZEbxA1.js";import{u as ee}from"./useInventoryStore-BUsTmGsL.js";import{P as te}from"./plus-DbyfxT92.js";import{S as le}from"./square-pen-OnWktHz6.js";import{T as ae}from"./trash-2-GWs3f7Im.js";import"./index-DyqtVOcO.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-BNrdeW_Y.js";const se={class:"px-4 py-4"},ne={class:"mb-6 flex items-center justify-between"},oe={class:"rounded-md border"},re={class:"flex justify-end gap-2"},ue={class:"mt-4 flex justify-end space-x-2"},de=["disabled"],ie=["onClick"],fe=["disabled"],ye={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm p-4"},ve={class:"w-full max-w-sm rounded-2xl bg-white shadow-xl"},me={key:0,class:"space-y-3 px-5 py-4 text-sm text-gray-700"},_e={class:"grid grid-cols-2 gap-2"},ce={class:"flex justify-end gap-2 border-t px-5 py-3"},Se=L({__name:"Index",setup(pe){const p=X(),b=$(!1),g=$(0),u=$(null),v=ee(),{inventoryRpt:z,filters:x,currentPage:m,loading:E,lastPage:q}=A(v),T=[{title:"Inventory",href:"/inventory"}];M(async()=>{await v.fetchInventory(1)}),R(x,async()=>{await v.fetchInventory(1)},{deep:!0});const w=U(()=>q.value||1),k=async d=>{d<1||d>w.value||await v.fetchInventory(d)},h=()=>k(m.value+1),j=()=>k(m.value-1),D=d=>{b.value=!0,u.value=d,g.value=d.qty},B=async()=>{if(u.value)try{await J.put(`/api/inventory/${u.value.product_id}/${u.value.location_id}/${u.value.sloc_id}/${u.value.size_id}`,{qty:g.value}),p.success("Inventory updated successfully"),b.value=!1,await v.fetchInventory(m.value)}catch(d){console.error("Error updating inventory:",d),p.error("Failed to update inventory")}},F=async d=>{if(confirm("Are you sure you want to delete this inventory?"))try{await v.deleteInventory(d),p.success("Inventory deleted"),await v.fetchInventory(m.value)}catch(e){console.error("Error deleting inventory:",e),p.error("Failed to delete inventory")}};return(d,e)=>(i(),_(C,null,[l(t(Z),{title:"Inventory Management"}),l(Y,{breadcrumbs:T},{default:a(()=>[n("div",se,[n("div",ne,[l(t(c),{onClick:e[0]||(e[0]=s=>d.$inertia.visit("/inventory/create")),class:"gap-2 bg-blue-600 text-white hover:bg-blue-700"},{default:a(()=>[l(t(te),{class:"h-4 w-4"}),e[4]||(e[4]=o(" Add "))]),_:1,__:[4]}),l(t(S),{modelValue:t(x).productName,"onUpdate:modelValue":e[1]||(e[1]=s=>t(x).productName=s),placeholder:"Search",class:"w-64 border-gray-300 focus:border-blue-500 focus:ring-blue-500","aria-label":"Search",disabled:t(E)},null,8,["modelValue","disabled"])]),n("div",oe,[l(t(K),null,{default:a(()=>[l(t(O),{class:"bg-gray-100"},{default:a(()=>[l(t(V),null,{default:a(()=>[l(t(f),null,{default:a(()=>e[5]||(e[5]=[o("Product Name")])),_:1,__:[5]}),l(t(f),null,{default:a(()=>e[6]||(e[6]=[o("Location")])),_:1,__:[6]}),l(t(f),null,{default:a(()=>e[7]||(e[7]=[o("SLoc")])),_:1,__:[7]}),l(t(f),null,{default:a(()=>e[8]||(e[8]=[o("Unit")])),_:1,__:[8]}),l(t(f),null,{default:a(()=>e[9]||(e[9]=[o("Size")])),_:1,__:[9]}),l(t(f),null,{default:a(()=>e[10]||(e[10]=[o("Variant")])),_:1,__:[10]}),l(t(f),null,{default:a(()=>e[11]||(e[11]=[o("Qty")])),_:1,__:[11]}),l(t(f),null,{default:a(()=>e[12]||(e[12]=[o("Action")])),_:1,__:[12]})]),_:1})]),_:1}),l(t(W),null,{default:a(()=>[(i(!0),_(C,null,P(t(z),s=>(i(),N(t(V),{key:`${s.id}`},{default:a(()=>[l(t(y),null,{default:a(()=>[o(r(s.product_name),1)]),_:2},1024),l(t(y),null,{default:a(()=>[o(r(s.location_name),1)]),_:2},1024),l(t(y),null,{default:a(()=>[o(r(s.sloc_name),1)]),_:2},1024),l(t(y),null,{default:a(()=>[o(r(s.uom_id),1)]),_:2},1024),l(t(y),null,{default:a(()=>[o(r(s.size_id),1)]),_:2},1024),l(t(y),null,{default:a(()=>[o(r(s.variant),1)]),_:2},1024),l(t(y),null,{default:a(()=>[o(r(s.qty),1)]),_:2},1024),l(t(y),null,{default:a(()=>[n("div",re,[l(t(c),{variant:"ghost",size:"icon",onClick:I=>D({...s,product_id:Number(s.product_id),location_id:Number(s.location_id),qty:Number(s.qty)})},{default:a(()=>[l(t(le),{class:"h-4 w-4"})]),_:2},1032,["onClick"]),l(t(c),{variant:"ghost",size:"icon",onClick:I=>F(Number(s.id))},{default:a(()=>[l(t(ae),{class:"h-4 w-4"})]),_:2},1032,["onClick"])])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),n("div",ue,[n("button",{onClick:j,disabled:t(m)===1,class:"rounded border border-gray-300 px-3 py-1 text-gray-700 hover:bg-gray-100 disabled:opacity-50"}," Previous ",8,de),(i(!0),_(C,null,P(w.value,s=>(i(),_("button",{key:s,onClick:I=>k(s),class:G(["rounded border px-3 py-1 text-sm",s===t(m)?"border-blue-600 bg-blue-600 text-white":"border-gray-300 text-gray-700 hover:bg-gray-100"])},r(s),11,ie))),128)),n("button",{onClick:h,disabled:t(m)===w.value,class:"rounded border border-gray-300 px-3 py-1 text-gray-700 hover:bg-gray-100 disabled:opacity-50"}," Next ",8,fe)])]),(i(),N(H,{to:"body"},[b.value?(i(),_("div",ye,[n("div",ve,[e[21]||(e[21]=n("div",{class:"border-b px-5 py-4"},[n("h2",{class:"text-lg font-semibold text-gray-800"},"Edit Quantity")],-1)),u.value?(i(),_("div",me,[n("div",_e,[e[13]||(e[13]=n("span",{class:"font-medium"},"Product ID:",-1)),n("span",null,r(u.value.product_id),1),e[14]||(e[14]=n("span",{class:"font-medium"},"Product Name:",-1)),n("span",null,r(u.value.product_name),1),e[15]||(e[15]=n("span",{class:"font-medium"},"Location:",-1)),n("span",null,r(u.value.location_name),1),e[16]||(e[16]=n("span",{class:"font-medium"},"Size:",-1)),n("span",null,r(u.value.size_id),1),e[17]||(e[17]=n("span",{class:"font-medium"},"Current Qty:",-1)),n("span",null,r(u.value.qty),1)]),n("div",null,[e[18]||(e[18]=n("label",{for:"newQty",class:"block text-sm font-medium text-gray-700 mb-1"}," New Quantity ",-1)),l(t(S),{id:"newQty",modelValue:g.value,"onUpdate:modelValue":e[2]||(e[2]=s=>g.value=s),modelModifiers:{number:!0},type:"number",min:"0",class:"w-full"},null,8,["modelValue"])])])):Q("",!0),n("div",ce,[l(t(c),{variant:"ghost",onClick:e[3]||(e[3]=s=>b.value=!1),class:"h-10"},{default:a(()=>e[19]||(e[19]=[o("Cancel")])),_:1,__:[19]}),l(t(c),{onClick:B,class:"bg-blue-600 text-white hover:bg-blue-700"},{default:a(()=>e[20]||(e[20]=[o(" Save ")])),_:1,__:[20]})])])])):Q("",!0)]))]),_:1})],64))}});export{Se as default};
