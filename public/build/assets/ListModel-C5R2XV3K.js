import{d as q,q as E,o as R,w as A,e as Y,f as u,g as l,p as a,u as e,Z as H,x as s,k as d,D as p,N as S,y as g,C as D,E as w,F as f,B as x,z as N,j as c,R as T}from"./app-D3gc-nXC.js";import{_ as K}from"./Input.vue_vue_type_script_setup_true_lang-Du5wuF9B.js";import{_ as O,a as Q,b as k,c as _,d as Z,e as n}from"./TableRow.vue_vue_type_script_setup_true_lang-jvTECXFe.js";import{u as G}from"./useToast-D8T1UMnW.js";import{_ as J}from"./AppLayout.vue_vue_type_script_setup_true_lang-Kf_Wf34O.js";import{u as U}from"./useModelStore-QjbGn_TT.js";import{P as W}from"./plus-Djz7VdUB.js";import{S as X}from"./square-pen-Clx_jr4B.js";import{T as ee}from"./trash-2-CUSEvD9e.js";import"./index-QF4AC6ev.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-C57zbfb5.js";const te={class:"px-4 py-4"},ae={class:"mb-6 flex items-center justify-between"},se={class:"overflow-x-auto rounded-md border border-gray-200 bg-white shadow-sm dark:border-gray-700 dark:bg-gray-900"},re={key:1},oe={class:"font-semibold"},de={class:"text-xs text-gray-500 dark:text-gray-400"},le={key:0,class:"flex flex-col text-xs"},ne={key:1},ie={key:0,class:"p-4 text-center text-sm text-gray-500 dark:text-gray-400"},ue={class:"mt-4 flex justify-end space-x-2"},ge=["disabled"],ce=["onClick","disabled"],ye=["disabled"],$e=q({__name:"ListModel",setup(me){const C=G(),o=U(),{models:M,loading:y,currentPage:v,filters:$,lastPage:P}=E(o),B=[{title:"Konveksi",href:"/konveksi"},{title:"List Model",href:"/konveksi/model"}];R(()=>{o.fetchModels(1,"-")}),A($,()=>{o.fetchModels(1,"-")},{deep:!0});const F=i=>{const t=i.target;o.setFilter("search",t.value)},L=async i=>{await o.updateCloseStatus(i)},I=async i=>{var t,b;if(confirm("Are you sure you want to delete this model?"))try{await o.deleteModel(i),C.success("Model deleted successfully"),await o.fetchModels(1,"-")}catch(r){C.error(((b=(t=r==null?void 0:r.response)==null?void 0:t.data)==null?void 0:b.message)??"Failed to delete model")}},z=i=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0,maximumFractionDigits:0}).format(i),j=i=>i?new Date(i).toLocaleDateString("id-ID",{day:"2-digit",month:"long",year:"numeric"}):"-";return(i,t)=>{const b=Y("Loader2");return l(),u(f,null,[a(e(H),{title:"List Model"}),a(J,{breadcrumbs:B},{default:s(()=>[d("div",te,[d("div",ae,[a(e(p),{onClick:t[0]||(t[0]=r=>e(S).visit("/konveksi/model/create")),"aria-label":"Tambah Model Baru",class:"rounded-md bg-indigo-600 py-2 text-white hover:bg-indigo-700 focus:ring-2 focus:ring-indigo-500"},{default:s(()=>[a(e(W),{class:"h-4 w-4"}),t[3]||(t[3]=g(" Tambah "))]),_:1,__:[3]}),a(e(K),{value:e($).search,debounce:500,placeholder:"Search Model",onInput:F,class:"w-64","aria-label":"Search Model",disabled:e(y)},null,8,["value","disabled"])]),d("div",se,[a(e(O),{class:"w-full text-sm md:table-auto"},{default:s(()=>[a(e(Q),null,{default:s(()=>[a(e(k),{class:"bg-gray-100 dark:bg-gray-800"},{default:s(()=>[a(e(_),{class:"px-3 py-2 text-left"},{default:s(()=>t[4]||(t[4]=[g("Status")])),_:1,__:[4]}),a(e(_),{class:"px-3 py-2 text-left"},{default:s(()=>t[5]||(t[5]=[g("Nama Model")])),_:1,__:[5]}),a(e(_),{class:"px-3 py-2"},{default:s(()=>t[6]||(t[6]=[g("Est Harga/Pcs")])),_:1,__:[6]}),a(e(_),{class:"px-3 py-2"},{default:s(()=>t[7]||(t[7]=[g("Qty")])),_:1,__:[7]}),a(e(_),{class:"hidden px-3 py-2 md:table-cell"},{default:s(()=>t[8]||(t[8]=[g("Catatan")])),_:1,__:[8]}),a(e(_),{class:"px-3 py-2 text-right"},{default:s(()=>t[9]||(t[9]=[g("Action")])),_:1,__:[9]})]),_:1})]),_:1}),a(e(Z),null,{default:s(()=>[e(y)?(l(),u(f,{key:0},x(5,r=>a(e(k),{key:r,class:"animate-pulse"},{default:s(()=>[a(e(n),{class:"py-3"},{default:s(()=>t[10]||(t[10]=[d("div",{class:"h-6 w-20 bg-gray-200 dark:bg-gray-700 rounded"},null,-1)])),_:1,__:[10]}),a(e(n),{class:"py-3"},{default:s(()=>t[11]||(t[11]=[d("div",{class:"h-4 w-40 bg-gray-200 dark:bg-gray-700 rounded mb-2"},null,-1),d("div",{class:"h-3 w-24 bg-gray-200 dark:bg-gray-700 rounded"},null,-1)])),_:1,__:[11]}),a(e(n),{class:"py-3"},{default:s(()=>t[12]||(t[12]=[d("div",{class:"h-4 w-16 bg-gray-200 dark:bg-gray-700 rounded"},null,-1)])),_:1,__:[12]}),a(e(n),{class:"py-3"},{default:s(()=>t[13]||(t[13]=[d("div",{class:"h-4 w-12 bg-gray-200 dark:bg-gray-700 rounded"},null,-1)])),_:1,__:[13]}),a(e(n),{class:"py-3 hidden md:table-cell"},{default:s(()=>t[14]||(t[14]=[d("div",{class:"h-4 w-24 bg-gray-200 dark:bg-gray-700 rounded"},null,-1)])),_:1,__:[14]}),a(e(n),{class:"py-3 text-right"},{default:s(()=>t[15]||(t[15]=[d("div",{class:"h-6 w-20 bg-gray-200 dark:bg-gray-700 rounded ml-auto"},null,-1)])),_:1,__:[15]})]),_:2},1024)),64)):(l(!0),u(f,{key:1},x(e(M),r=>(l(),w(e(k),{key:r.id,class:"border-b border-gray-100 hover:bg-gray-50 dark:border-gray-800 dark:hover:bg-gray-800 transition-colors duration-150"},{default:s(()=>[a(e(n),{class:"text-center"},{default:s(()=>[a(e(p),{onClick:m=>L(r.id),disabled:e(o).loading,class:N(["flex items-center justify-center gap-2 rounded-lg px-3 py-1.5 text-sm font-medium shadow-sm transition-all duration-200 cursor-pointer",r.is_close==="Y"?"bg-green-100 text-green-700 hover:bg-green-200 dark:bg-green-900 dark:text-green-300 hover:scale-105 hover:shadow-md":"bg-red-100 text-red-700 hover:bg-red-200 dark:bg-red-900 dark:text-red-300 hover:scale-105 hover:shadow-md",e(o).loading?"opacity-60 cursor-not-allowed":""])},{default:s(()=>[e(o).loading?(l(),w(b,{key:0,class:"h-4 w-4 animate-spin"})):(l(),u("span",re,c(r.is_close==="Y"?"Close":"Open"),1))]),_:2},1032,["onClick","disabled","class"])]),_:2},1024),a(e(n),{class:"px-3 py-2 font-medium text-foreground"},{default:s(()=>[d("div",oe,c(r.description),1),d("div",de," Mulai: "+c(j(r.start_date)),1)]),_:2},1024),a(e(n),{class:"px-3 py-2"},{default:s(()=>[g(c(z(r.estimation_price_pcs)),1)]),_:2},1024),a(e(n),{class:"px-3 py-2"},{default:s(()=>{var m;return[(m=r.sizes)!=null&&m.length?(l(),u("div",le,[(l(!0),u(f,null,x(r.sizes,(h,V)=>(l(),u("span",{key:V},c(h.size_id)+" "+c(h.variant)+" ("+c(h.qty)+") ",1))),128))])):(l(),u("span",ne,"-"))]}),_:2},1024),a(e(n),{class:"hidden px-3 py-2 text-sm text-gray-500 dark:text-gray-400 md:table-cell"},{default:s(()=>[g(c(r.remark||"-"),1)]),_:2},1024),a(e(n),{class:"space-x-1 px-3 py-2 text-right"},{default:s(()=>[a(e(p),{size:"icon",variant:"ghost",class:"hover:bg-gray-100 dark:hover:bg-gray-700",onClick:T(m=>e(S).visit(`/konveksi/model/${r.id}/edit`),["stop"])},{default:s(()=>[a(e(X),{class:"h-4 w-4"})]),_:2},1032,["onClick"]),a(e(p),{size:"icon",variant:"ghost",class:"hover:bg-gray-100 dark:hover:bg-gray-700",onClick:T(m=>I(r.id),["stop"])},{default:s(()=>[a(e(ee),{class:"h-4 w-4 text-red-500"})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128)),!e(y)&&e(M).length===0?(l(),w(e(k),{key:2},{default:s(()=>[a(e(n),{colspan:"6",class:"py-6 text-center text-gray-500 dark:text-gray-400"},{default:s(()=>t[16]||(t[16]=[g(" Belum ada model yang ditemukan. ")])),_:1,__:[16]})]),_:1})):D("",!0)]),_:1})]),_:1}),e(y)?(l(),u("div",ie,"Memuat data...")):D("",!0)]),d("div",ue,[d("button",{onClick:t[1]||(t[1]=(...r)=>e(o).prevPage&&e(o).prevPage(...r)),disabled:e(v)===1||e(y),class:"rounded border border-gray-300 px-3 py-1 text-gray-700 hover:bg-gray-100 disabled:cursor-not-allowed disabled:opacity-50"}," Previous ",8,ge),(l(!0),u(f,null,x(e(P),r=>(l(),u("button",{key:r,onClick:m=>e(o).goToPage(r),class:N(["rounded border px-3 py-1 text-sm",r===e(v)?"border-blue-600 bg-blue-600 text-white":"border-gray-300 text-gray-700 hover:bg-gray-100"]),disabled:e(y)},c(r),11,ce))),128)),d("button",{onClick:t[2]||(t[2]=(...r)=>e(o).nextPage&&e(o).nextPage(...r)),disabled:e(v)===e(P)||e(y),class:"rounded border border-gray-300 px-3 py-1 text-gray-700 hover:bg-gray-100 disabled:cursor-not-allowed disabled:opacity-50"}," Next ",8,ye)])])]),_:1})],64)}}});export{$e as default};
