import{d as Z,r as k,T as G,q as H,c as J,o as K,f as b,g as f,p as a,u as t,Z as Q,x as l,k as n,C as $,D as g,y as c,V as W,F as C,B as N,E as X,j as U,z as Y,R as P}from"./app-CnFxlYte.js";import{_ as ee}from"./AppLayout.vue_vue_type_script_setup_true_lang-DRdJn_1m.js";import{_ as V}from"./Input.vue_vue_type_script_setup_true_lang-B35yQzDh.js";import{_ as te,a as se,b as M,c as T,d as ae,e as j}from"./TableRow.vue_vue_type_script_setup_true_lang-CjucJHvu.js";import{u as oe}from"./useToast-BLV6bwkF.js";import{u as le}from"./useSizeStore-BRHaL_9S.js";import{d as ne}from"./debounce-BcZQbp_F.js";import{P as ie}from"./plus-68c3TZCy.js";import{T as re}from"./trash-2-B-srya04.js";import"./index-CdO5wxzG.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-Ca5dlAMX.js";const de={class:"px-4 py-4"},ue={class:"flex justify-between items-center mb-2"},ce={class:"rounded-md border"},me={class:"flex justify-end mt-4 space-x-2"},fe=["disabled"],be=["onClick","disabled"],ge=["disabled"],pe={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},_e={class:"bg-white p-6 rounded-lg w-96"},ye={class:"mb-4"},ve={class:"flex justify-end gap-2"},he={key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},xe={class:"bg-white p-6 rounded-lg w-96"},we={class:"mb-4"},Se={class:"flex justify-end gap-2"},Be=Z({__name:"Index",setup(ze){const u=oe(),_=k(!1),v=k(!1),h=k(null),d=G({name:""}),F=[{title:"Ukuran",href:"/sizes"}],i=le(),{sizes:B,currentPage:p,lastPage:E,loading:y,filterName:x}=H(i),w=J(()=>E.value||1),S=async o=>{o<1||o>w.value||await i.fetchSizes(o)},q=()=>S(p.value+1),A=()=>S(p.value-1),D=ne((o,e)=>{i.setFilter(o,e)},400),I=o=>{const e=o.target;D("name",e.value)};K(()=>{i.fetchSizes()});const O=async()=>{var o,e,s,r;if(!d.name)return u.error("Name is required");try{await i.createSize(d.name),u.success("Size created successfully"),d.reset(),i.loaded=!1,await i.fetchSizes(),_.value=!1}catch(m){const z=(r=(s=(e=(o=m==null?void 0:m.response)==null?void 0:o.data)==null?void 0:e.errors)==null?void 0:s.name)==null?void 0:r[0];u.error(z||"Failed to create Size")}},R=async()=>{var o,e,s,r;if(!h.value||!d.name)return u.error("Name is required");try{await i.updateSize(h.value.id,d.name),u.success("Size updated successfully"),d.reset(),i.loaded=!1,await i.fetchSizes(),v.value=!1,h.value=null}catch(m){const z=(r=(s=(e=(o=m==null?void 0:m.response)==null?void 0:o.data)==null?void 0:e.errors)==null?void 0:s.name)==null?void 0:r[0];u.error(z||"Failed to update UOM")}},L=async o=>{var e,s;if(confirm("Are you sure you want to delete this UOM?"))try{await i.deleteSize(o),i.loaded=!1,await i.fetchSizes(),u.success("Size deleted successfully")}catch(r){u.error(((s=(e=r==null?void 0:r.response)==null?void 0:e.data)==null?void 0:s.message)??"Failed to delete UOM")}};return(o,e)=>(f(),b(C,null,[a(t(Q),{title:"Size Management"}),a(ee,{breadcrumbs:F},{default:l(()=>[n("div",de,[n("div",ue,[a(t(g),{onClick:e[0]||(e[0]=s=>_.value=!0),class:"bg-indigo-600 text-white py-2 h-10 rounded-md hover:bg-indigo-700 focus:ring-2 focus:ring-indigo-500"},{default:l(()=>[a(t(ie),{class:"h-4 w-4"}),e[6]||(e[6]=c(" Add "))]),_:1,__:[6]}),a(t(V),{modelValue:t(x),"onUpdate:modelValue":e[1]||(e[1]=s=>W(x)?x.value=s:null),placeholder:"Search",onInput:I,class:"w-64","aria-label":"Search",disabled:t(y)},null,8,["modelValue","disabled"])]),n("div",ce,[a(t(te),null,{default:l(()=>[a(t(se),null,{default:l(()=>[a(t(M),{class:"bg-gray-100"},{default:l(()=>[a(t(T),null,{default:l(()=>e[7]||(e[7]=[c("Name")])),_:1,__:[7]}),a(t(T),{class:"w-24"},{default:l(()=>e[8]||(e[8]=[c("Actions")])),_:1,__:[8]})]),_:1})]),_:1}),a(t(ae),null,{default:l(()=>[(f(!0),b(C,null,N(t(B),s=>(f(),X(t(M),{key:s.id},{default:l(()=>[a(t(j),null,{default:l(()=>[c(U(s.name),1)]),_:2},1024),a(t(j),{class:"flex gap-2"},{default:l(()=>[a(t(g),{variant:"ghost",size:"icon",onClick:r=>L(s.id)},{default:l(()=>[a(t(re),{class:"h-4 w-4"})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),n("div",me,[n("button",{onClick:A,disabled:t(p)===1||t(y),class:"px-3 py-1 rounded border border-gray-300 text-gray-700 hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed"}," Previous ",8,fe),(f(!0),b(C,null,N(w.value,s=>(f(),b("button",{key:s,onClick:r=>S(s),class:Y(["px-3 py-1 rounded border text-sm",s===t(p)?"bg-blue-600 border-blue-600 text-white":"border-gray-300 text-gray-700 hover:bg-gray-100"]),disabled:t(y)},U(s),11,be))),128)),n("button",{onClick:q,disabled:t(p)===w.value||t(y),class:"px-3 py-1 rounded border border-gray-300 text-gray-700 hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed"}," Next ",8,ge)]),_.value?(f(),b("div",pe,[n("div",_e,[e[11]||(e[11]=n("h2",{class:"text-lg font-semibold mb-4"},"Tambah Size Baru",-1)),n("form",{onSubmit:P(O,["prevent"])},[n("div",ye,[a(t(V),{modelValue:t(d).name,"onUpdate:modelValue":e[2]||(e[2]=s=>t(d).name=s),placeholder:"Size Name",required:""},null,8,["modelValue"])]),n("div",ve,[a(t(g),{type:"button",variant:"outline",onClick:e[3]||(e[3]=s=>_.value=!1),class:"h-10"},{default:l(()=>e[9]||(e[9]=[c("Cancel")])),_:1,__:[9]}),a(t(g),{type:"submit",class:"bg-indigo-600 text-white py-2 h-10 rounded-md hover:bg-indigo-700 focus:ring-2 focus:ring-indigo-500"},{default:l(()=>e[10]||(e[10]=[c("Create")])),_:1,__:[10]})])],32)])])):$("",!0),v.value?(f(),b("div",he,[n("div",xe,[e[14]||(e[14]=n("h2",{class:"text-lg font-semibold mb-4"},"Edit Size",-1)),n("form",{onSubmit:P(R,["prevent"])},[n("div",we,[a(t(V),{modelValue:t(d).name,"onUpdate:modelValue":e[4]||(e[4]=s=>t(d).name=s),placeholder:"Size Name",required:""},null,8,["modelValue"])]),n("div",Se,[a(t(g),{type:"button",variant:"outline",onClick:e[5]||(e[5]=s=>v.value=!1),class:"h-10"},{default:l(()=>e[12]||(e[12]=[c("Cancel")])),_:1,__:[12]}),a(t(g),{type:"submit",class:"bg-indigo-600 text-white py-2 h-10 rounded-md hover:bg-indigo-700 focus:ring-2 focus:ring-indigo-500"},{default:l(()=>e[13]||(e[13]=[c("Update")])),_:1,__:[13]})])],32)])])):$("",!0)])]),_:1})],64))}});export{Be as default};
