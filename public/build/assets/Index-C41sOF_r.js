import{_ as q}from"./AppLayout.vue_vue_type_script_setup_true_lang-Der2molT.js";import{d as V,q as E,r as L,c as T,o as K,e as Q,f as d,g as i,p as a,u as e,Z,x as o,k as c,D as k,y as n,F as v,B as $,E as H,j as p,z as J}from"./app-CDwT_d22.js";import{_ as O,a as U,b as G,c as y,d as W,e as m}from"./TableRow.vue_vue_type_script_setup_true_lang-BmUj1h_b.js";import{u as X}from"./useToast-QNKpNeGN.js";import{u as Y}from"./useGoodReceiveStore-DdkUAWqc.js";import{P as ee}from"./plus-Brfbvusw.js";import{S as te}from"./square-pen-wOVolH0p.js";import{T as ae}from"./trash-2-CyOBFW7S.js";import"./index-BixaK_zC.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-DijOI3sT.js";const se={class:"px-4 py-4"},oe={class:"flex justify-between items-center gap-2 mb-2"},re={class:"overflow-x-auto rounded-lg border"},le={class:"flex justify-center gap-2"},ie={class:"flex flex-wrap justify-end items-center gap-2 pt-4"},ne=["disabled"],de=["onClick"],ce=["disabled"],S=10,he=V({__name:"Index",setup(ue){const C=X(),_=Y(),{items:B,total:D,loading:R,filterName:F}=E(_),l=L(1),N=T(()=>D.value||0),g=T(()=>Math.ceil(N.value/S)),b=async r=>{await _.fetchGoodReceives(r,S),l.value=r},j=[{title:"Good Receive",href:"/good-receive"}];K(async()=>{await b(l.value)});const x=async r=>{r<1||r>g.value||await b(r)},z=async()=>{l.value<g.value&&await x(l.value+1)},A=async()=>{l.value>1&&await x(l.value-1)};let w=null;const I=(r,s)=>{const u=s.target;w&&clearTimeout(w),w=setTimeout(()=>{_.setFilter(r,u.value)},300)},M=async r=>{var s,u;if(confirm("Are you sure you want to delete this Good Receive?"))try{await _.deleteGoodReceive(r),C.success("Good Receive deleted successfully"),await b(l.value)}catch(t){C.error(((u=(s=t==null?void 0:t.response)==null?void 0:s.data)==null?void 0:u.message)??"Failed to delete Good Receive")}};return(r,s)=>{const u=Q("Input");return i(),d(v,null,[a(e(Z),{title:"Good Receive Management"}),a(q,{breadcrumbs:j},{default:o(()=>[c("div",se,[c("div",oe,[a(e(k),{onClick:s[0]||(s[0]=t=>r.$inertia.visit("/good-receive/create")),"aria-label":"Tambah Kategori Baru",disabled:e(R),class:"bg-indigo-600 text-white py-2 h-10 rounded-md hover:bg-indigo-700 focus:ring-2 focus:ring-indigo-500"},{default:o(()=>[a(e(ee),{class:"h-4 w-4"}),s[2]||(s[2]=n(" Add "))]),_:1,__:[2]},8,["disabled"]),a(u,{value:e(F),placeholder:"Search data",onInput:s[1]||(s[1]=t=>I("name",t)),class:"w-64","aria-label":"Search data",disabled:e(R)},null,8,["value","disabled"])]),c("div",re,[a(e(O),{class:"min-w-[600px] text-sm"},{default:o(()=>[a(e(U),null,{default:o(()=>[a(e(G),{class:"bg-gray-100 text-gray-700"},{default:o(()=>[a(e(y),{class:"px-4 py-2 whitespace-nowrap"},{default:o(()=>s[3]||(s[3]=[n("Recipient")])),_:1,__:[3]}),a(e(y),{class:"px-4 py-2 whitespace-nowrap"},{default:o(()=>s[4]||(s[4]=[n("Material / Qty")])),_:1,__:[4]}),a(e(y),{class:"px-4 py-2 whitespace-nowrap"},{default:o(()=>s[5]||(s[5]=[n("Created At")])),_:1,__:[5]}),a(e(y),{class:"px-4 py-2 text-center w-24"},{default:o(()=>s[6]||(s[6]=[n("Actions")])),_:1,__:[6]})]),_:1})]),_:1}),a(e(W),null,{default:o(()=>[(i(!0),d(v,null,$(e(B),t=>(i(),H(e(G),{key:t.id,class:"hover:bg-gray-50 transition-colors"},{default:o(()=>[a(e(m),{class:"px-4 py-2"},{default:o(()=>[n(p(t.recipent||"-"),1)]),_:2},1024),a(e(m),{class:"px-4 py-2"},{default:o(()=>{var f;return[(f=t.items)!=null&&f.length?(i(!0),d(v,{key:0},$(t.items,h=>{var P;return i(),d("div",{key:h.id,class:"text-gray-700"},p((P=t.model)==null?void 0:P.description)+" ("+p(h.qty_convert)+" "+p(h.uom_convert)+") ",1)}),128)):(i(),d(v,{key:1},[n("-")],64))]}),_:2},1024),a(e(m),{class:"px-4 py-2 text-gray-600"},{default:o(()=>[n(p(t.created_at?new Date(t.created_at).toLocaleDateString():"-"),1)]),_:2},1024),a(e(m),{class:"px-4 py-2 text-center"},{default:o(()=>[c("div",le,[a(e(k),{variant:"ghost",size:"icon",class:"hover:bg-gray-100",onClick:f=>r.$inertia.visit(`/good-receive/${t.id}/edit`)},{default:o(()=>[a(e(te),{class:"h-4 w-4 text-gray-600"})]),_:2},1032,["onClick"]),a(e(k),{variant:"ghost",size:"icon",class:"hover:bg-gray-100",onClick:f=>M(t.id)},{default:o(()=>[a(e(ae),{class:"h-4 w-4 text-red-500"})]),_:2},1032,["onClick"])])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),c("div",ie,[c("button",{onClick:A,disabled:l.value===1,class:"px-3 py-1 rounded border text-sm border-gray-300 text-gray-700 hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed"}," Previous ",8,ne),(i(!0),d(v,null,$(g.value,t=>(i(),d("button",{key:t,onClick:f=>x(t),class:J(["px-3 py-1 rounded border text-sm",t===l.value?"bg-indigo-600 text-white border-indigo-600":"border-gray-300 text-gray-700 hover:bg-gray-100"])},p(t),11,de))),128)),c("button",{onClick:z,disabled:l.value===g.value,class:"px-3 py-1 rounded border text-sm border-gray-300 text-gray-700 hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed"}," Next ",8,ce)])])]),_:1})],64)}}});export{he as default};
