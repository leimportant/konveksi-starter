import{d as h,q as K,Q as N,T as U,r as B,f as i,g as u,p as l,u as s,Z as E,x as d,k as o,R as T,C as f,j as c,D as y,y as x,N as v,F as $}from"./app-Di3VD2wF.js";import{_ as A}from"./AppLayout.vue_vue_type_script_setup_true_lang-YamAR-Dq.js";import{_ as g}from"./Input.vue_vue_type_script_setup_true_lang-YgRub-mj.js";import{A as I}from"./vue3-select-DONUR2lV.js";import{u as P}from"./useToast-CJi-_njE.js";import{u as j}from"./useUserStore-gAXz-0mJ.js";import{u as D}from"./useKasbonStore-C5zbnOx7.js";import{d as F}from"./debounce-BcZQbp_F.js";import{P as R}from"./plus-Dq8C2eKT.js";import"./index-DnLtb5dp.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-CVeNkWmG.js";const q={class:"space-y-6 p-6"},G={key:0,class:"text-red-500 text-sm mt-1"},J={key:0,class:"text-red-500 text-sm mt-1"},M={class:"flex space-x-2 justify-end"},ae=h({__name:"create",setup(Q){const _=D(),p=P(),k=[{title:"Kasbon",href:"/kasbon/create"}],b=j(),{users:V}=K(b),S=N().props.auth.user,t=U({employee_id:null,amount:"",description:""}),n=B(0),w=async()=>{var r,e,a;try{const m=typeof n.value=="number"?n.value:((r=n.value)==null?void 0:r.id)??0;await _.storeKasbon({amount:Number(t.amount),employee_id:m,description:t.description||"",status:"Pending"}),p.success("Kasbon berhasil dibuat"),v.visit("/home")}catch(m){p.error(((a=(e=m==null?void 0:m.response)==null?void 0:e.data)==null?void 0:a.message)??"Gagal membuat kasbon")}},C=F((r,e)=>{r.length&&(e(!0),b.fetchUsers(1,10,S.employee_status.toUpperCase(),r.toUpperCase()).finally(()=>e(!1)))},500);return(r,e)=>(u(),i($,null,[l(s(E),{title:"Buat Kasbon"}),l(A,{breadcrumbs:k},{default:d(()=>[o("div",q,[e[9]||(e[9]=o("h1",{class:"text-xl font-semibold mb-6"},"Buat Kasbon",-1)),o("form",{onSubmit:T(w,["prevent"]),class:"space-y-5"},[o("div",null,[e[4]||(e[4]=o("label",{for:"employee_id",class:"block text-sm font-medium mb-1"},"Employee",-1)),l(s(I),{id:"model.id",modelValue:n.value,"onUpdate:modelValue":e[0]||(e[0]=a=>n.value=a),options:s(V),label:"name",placeholder:"Select Employee",class:"w-full",filterable:!1,onSearch:s(C)},null,8,["modelValue","options","onSearch"])]),o("div",null,[e[5]||(e[5]=o("label",{for:"amount",class:"block text-sm font-medium mb-1"},"Jumlah Kasbon",-1)),l(s(g),{id:"amount",type:"number",modelValue:s(t).amount,"onUpdate:modelValue":e[1]||(e[1]=a=>s(t).amount=a),placeholder:"1000",class:"w-full"},null,8,["modelValue"]),s(t).errors.amount?(u(),i("div",G,c(s(t).errors.amount),1)):f("",!0)]),o("div",null,[e[6]||(e[6]=o("label",{for:"description",class:"block text-sm font-medium mb-1"},"Alasan",-1)),l(s(g),{id:"description",type:"text",modelValue:s(t).description,"onUpdate:modelValue":e[2]||(e[2]=a=>s(t).description=a),placeholder:"Isi alasan kasbon",class:"w-full"},null,8,["modelValue"]),s(t).errors.description?(u(),i("div",J,c(s(t).errors.description),1)):f("",!0)]),o("div",M,[l(s(y),{type:"submit",disabled:s(t).processing,class:"rounded text-sm bg-blue-600 px-4 py-2 text-white hover:bg-blue-700"},{default:d(()=>[l(s(R),{class:"w-4 h-4 mr-2"}),e[7]||(e[7]=x(" Create "))]),_:1,__:[7]},8,["disabled"]),l(s(y),{onClick:e[3]||(e[3]=a=>s(v).visit("/home")),type:"button",class:"rounded text-sm bg-gray-500 px-4 py-2 text-white hover:bg-gray-600"},{default:d(()=>e[8]||(e[8]=[x(" Cancel ")])),_:1,__:[8]})])],32)])]),_:1})],64))}});export{ae as default};
