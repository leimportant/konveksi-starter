import{d as j,r as g,c as _,o as C,f as p,g as u,p as r,u as i,Z as D,x as m,k as t,C as y,j as a,D as b,y as x,V as N,F as V,_ as B}from"./app-BThHDKz0.js";import{_ as T}from"./AppLayout.vue_vue_type_script_setup_true_lang-IfNrhM-z.js";import{u as K}from"./usePayrollStore-0_w-Qpfk.js";import{P as L}from"./printer-S4gNn5De.js";import"./index-CCxp805y.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-D7WqqqJ8.js";const $={class:"p-4 md:p-6"},I={class:"flex justify-between items-center mb-4"},M={class:"text-sm text-gray-500 hidden print:block"},A={class:"grid grid-cols-2 gap-4 mb-6 bg-gray-50 p-3 rounded"},F={class:"text-sm font-medium"},G={class:"text-sm font-medium"},R={class:"mb-4"},U={class:"w-full text-sm border border-gray-200 rounded"},E={class:"border-b"},H={class:"px-3 py-2 text-right"},W={class:"border-b"},Z={class:"px-3 py-2 text-right"},q={class:"border-b"},z={class:"px-3 py-2 text-right"},J={class:"font-semibold bg-gray-50"},O={class:"px-3 py-2 text-right"},Q={class:"mb-4"},X={class:"w-full text-sm border border-gray-200 rounded"},Y={class:"border-b"},tt={class:"px-3 py-2 text-right"},st={class:"px-3 py-2 text-right"},et={class:"flex justify-end mt-4 text-lg font-bold text-indigo-600"},ot={key:1,class:"flex gap-2 mt-4 no-print"},at=j({__name:"Payslip",props:{id:{}},setup(f){const v=f,h=K(),o=g(null),d=g(null),l=(e=0)=>`Rp ${Number(e||0).toLocaleString("id-ID")}`,w=_(()=>{var e,s,n;return(((e=o.value)==null?void 0:e.total_upah)||0)+(((s=o.value)==null?void 0:s.uang_makan)||0)+(((n=o.value)==null?void 0:n.lembur)||0)}),k=_(()=>{var e,s;return((e=o.value)==null?void 0:e.net_gaji)??w.value-(((s=o.value)==null?void 0:s.potongan)||0)}),P=async()=>{try{o.value=await h.fetchPayslip(v.id)}catch(e){console.error(e)}},S=()=>{if(!d.value)return;const e=window.open("","_blank","width=800,height=600");e&&(e.document.write("<html><head><title>Payslip</title>"),e.document.write('<link href="/css/app.css" rel="stylesheet">'),e.document.write("</head><body>"),e.document.write(d.value.innerHTML),e.document.write("</body></html>"),e.document.close(),e.print())};return C(P),(e,s)=>(u(),p(V,null,[r(i(D),{title:"Payslip View"}),r(T,{breadcrumbs:[{title:"Payslip",href:"/payroll"}]},{default:m(()=>{var n,c;return[t("div",$,[o.value?(u(),p("div",{key:0,ref_key:"printArea",ref:d,class:"bg-white rounded-lg shadow p-4 md:p-6 print:bg-white"},[t("div",I,[s[1]||(s[1]=t("h1",{class:"text-xl md:text-2xl font-bold"},"Slip Gaji Karyawan",-1)),t("span",M," Tanggal Cetak: "+a(new Date().toLocaleDateString("id-ID")),1)]),t("div",A,[t("div",null,[t("p",F,a(((n=o.value.employee)==null?void 0:n.name)||"-"),1),s[2]||(s[2]=t("p",{class:"text-xs text-gray-500"},"Nama Karyawan",-1))]),t("div",null,[t("p",G,a(((c=o.value.activity_role)==null?void 0:c.name)||"Staff"),1),s[3]||(s[3]=t("p",{class:"text-xs text-gray-500"},"Bagian",-1))])]),t("div",R,[s[8]||(s[8]=t("h2",{class:"font-semibold mb-2"},"Komponen Gaji",-1)),t("table",U,[t("tbody",null,[t("tr",E,[s[4]||(s[4]=t("td",{class:"px-3 py-2"},"Upah Produksi",-1)),t("td",H,a(l(o.value.total_upah)),1)]),t("tr",W,[s[5]||(s[5]=t("td",{class:"px-3 py-2"},"Uang Makan",-1)),t("td",Z,a(l(o.value.uang_makan)),1)]),t("tr",q,[s[6]||(s[6]=t("td",{class:"px-3 py-2"},"Lembur",-1)),t("td",z,a(l(o.value.lembur)),1)]),t("tr",J,[s[7]||(s[7]=t("td",{class:"px-3 py-2"},"Total Penghasilan",-1)),t("td",O,a(l(o.value.net_gaji)),1)])])])]),t("div",Q,[s[11]||(s[11]=t("h2",{class:"font-semibold mb-2"},"Potongan",-1)),t("table",X,[t("tbody",null,[t("tr",Y,[s[9]||(s[9]=t("td",{class:"px-3 py-2"},"Potongan",-1)),t("td",tt,"-"+a(l(o.value.potongan)),1)]),t("tr",null,[s[10]||(s[10]=t("td",{class:"px-3 py-2"},"Sisa Kasbon",-1)),t("td",st,a(l(o.value.saldo_kasbon)),1)])])])]),t("div",et," Total Diterima: "+a(l(k.value)),1)],512)):y("",!0),o.value?(u(),p("div",ot,[r(i(b),{onClick:S,class:"bg-green-600 text-white rounded hover:bg-green-700"},{default:m(()=>[r(i(L),{class:"h-4 w-4"}),s[12]||(s[12]=x(" Print "))]),_:1,__:[12]}),r(i(b),{variant:"outline",onClick:s[0]||(s[0]=lt=>i(N).visit("/payroll")),class:"bg-gray-500 text-white rounded hover:bg-gray-600"},{default:m(()=>s[13]||(s[13]=[x(" Back ")])),_:1,__:[13]})])):y("",!0)])]}),_:1})],64))}}),mt=B(at,[["__scopeId","data-v-d879829f"]]);export{mt as default};
