import{d as B,r as f,c as C,e as V,f as r,g as u,p as t,u as m,Z as O,x as p,k as l,K as M,C as _,j as h,D as g,y,F as $,P as q}from"./app-Bj_kpMHq.js";import{_ as j}from"./AppLayout.vue_vue_type_script_setup_true_lang-C-B5aa47.js";import{_ as S}from"./Input.vue_vue_type_script_setup_true_lang-DJN7_ygH.js";import{u as D}from"./useCashBalanceStore-BniWrxJU.js";import{u as E}from"./useToast-BKXtDSru.js";import"./index-DYrEdJEX.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-CFabbRMa.js";const F={class:"w-full px-4 py-6"},P={key:0,class:"mt-1 text-sm text-red-600"},T={key:0,class:"mt-1 text-sm text-red-600"},U={class:"flex flex-col sm:flex-row justify-end gap-2 sm:gap-4 pt-4"},A={key:0},K={key:1},R=B({__name:"OpenShift",setup(Z){const x=D(),k=E(),n=f({shift_number:1,opening_balance:0}),a=f({}),s=f(!1),c=C(()=>Object.keys(a.value).length>0),b=()=>{n.value.shift_number?n.value.shift_number<1?a.value.shift_number="Shift number must be at least 1":delete a.value.shift_number:a.value.shift_number="Shift number is required"},v=()=>{n.value.opening_balance===void 0||n.value.opening_balance===null?a.value.opening_balance="Opening balance is required":n.value.opening_balance<0?a.value.opening_balance="Opening balance cannot be negative":delete a.value.opening_balance},N=async()=>{var i,e;if(b(),v(),!c.value){s.value=!0;try{await x.createCashBalance(n.value),k.success("Shift opened successfully"),q.visit("/pos")}catch(o){console.error("Shift creation error:",o),(e=(i=o.response)==null?void 0:i.data)!=null&&e.errors&&(a.value={...a.value,...o.response.data.errors})}finally{s.value=!1}}},w=[{title:"Cash Management",href:route("cash-balance.index")},{title:"Open New Shift",href:route("cash-balance.openshift")}];return(i,e)=>{const o=V("Spinner");return u(),r($,null,[t(m(O),{title:"Open New Shift"}),t(j,{breadcrumbs:w},{default:p(()=>[l("div",F,[l("form",{onSubmit:M(N,["prevent"]),class:"space-y-4 sm:space-y-6"},[l("div",null,[e[3]||(e[3]=l("label",{for:"shiftNumber",class:"block text-sm font-medium mb-1"}," Shift Number ",-1)),t(m(S),{id:"shiftNumber",modelValue:n.value.shift_number,"onUpdate:modelValue":e[0]||(e[0]=d=>n.value.shift_number=d),modelModifiers:{number:!0},type:"number",min:"1",required:"",class:"w-full",disabled:s.value,onBlur:b},null,8,["modelValue","disabled"]),a.value.shift_number?(u(),r("p",P,h(a.value.shift_number),1)):_("",!0)]),l("div",null,[e[4]||(e[4]=l("label",{for:"openingBalance",class:"block text-sm font-medium mb-1"}," Saldo Awal ",-1)),t(m(S),{id:"openingBalance",modelValue:n.value.opening_balance,"onUpdate:modelValue":e[1]||(e[1]=d=>n.value.opening_balance=d),modelModifiers:{number:!0},type:"number",min:"0",step:"0.01",class:"w-full",required:"",disabled:s.value,onBlur:v},null,8,["modelValue","disabled"]),a.value.opening_balance?(u(),r("p",T,h(a.value.opening_balance),1)):_("",!0)]),l("div",U,[t(m(g),{type:"button",variant:"outline",disabled:s.value,onClick:e[2]||(e[2]=d=>i.$inertia.visit(i.route("cash-balance.index")))},{default:p(()=>e[5]||(e[5]=[y(" Cancel ")])),_:1,__:[5]},8,["disabled"]),t(m(g),{type:"submit",disabled:s.value||c.value},{default:p(()=>[s.value?(u(),r("span",A,[t(o,{class:"mr-2"}),e[6]||(e[6]=y(" Processing... "))])):(u(),r("span",K,"Mulai Shift"))]),_:1},8,["disabled"])])],32)])]),_:1})],64)}}});export{R as default};
