import{d as N,r as c,o as T,f as n,g as l,p as _,u as h,Z as F,x as H,k as t,C as R,j as s,F as w,B as z,N as V}from"./app-B5zXD0_k.js";import{u as $}from"./useToast-BFlNbzbh.js";import{u as A}from"./useProductionStore-Dq7r_Kf6.js";import{u as j}from"./useModelStore-Cwx5-FVe.js";import{u as E}from"./useMasterActivityRoleStore-OZ-_bClW.js";import{_ as q}from"./AppLayout.vue_vue_type_script_setup_true_lang-BJVCaRiP.js";import"./index-oGaICzzt.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-QcNWLwcl.js";const G={id:"print-area",class:"p-4 md:p-6 space-y-4 md:space-y-6 print:bg-white"},Q={class:"flex justify-between items-center"},Z={class:"hidden print:block"},J={class:"w-full max-w-lg bg-white dark:bg-neutral-900 border border-gray-200 dark:border-neutral-800 rounded-xl shadow-sm p-4 text-sm md:text-base"},K={class:"grid grid-cols-[150px_1fr] gap-y-2"},O={class:"text-gray-900 dark:text-white font-semibold"},U={class:"text-gray-900 dark:text-white font-semibold"},W={class:"text-gray-900 dark:text-white font-semibold"},X={class:"text-emerald-600 dark:text-emerald-400 font-semibold"},Y={class:"text-indigo-600 dark:text-indigo-400 font-bold"},tt={key:0,class:"overflow-x-auto"},et={class:"w-full table-auto border text-sm md:"},ot={class:"border px-2 md:px-3 py-1 md:py-2"},rt={class:"border px-2 md:px-3 py-1 md:py-2"},st={class:"flex gap-2 no-print"},pt=N({__name:"View",props:{id:{},activity_role:{}},setup(k){const S=$(),B=A(),D=j(),M=E(),d=k,r=c(null),m=c(null),P=c(null);function C(o){return new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(o)}const I=async()=>{try{const o=await B.fetchProductionsById(d.id);r.value=o;const e=await D.fetchModelById(o.model_id);P.value=e;const a=await M.getActivityRoleById(Number(d.activity_role));m.value=a}catch(o){console.error("Failed to fetch activity role",o),S.error("Failed to fetch data")}},L=()=>{var a;const o=document.body.innerHTML,e=((a=document.getElementById("print-area"))==null?void 0:a.innerHTML)||"";document.body.innerHTML=e,window.print(),document.body.innerHTML=o,location.reload()};return T(I),(o,e)=>(l(),n(w,null,[_(h(F),{title:"View Production"}),_(q,{breadcrumbs:[{title:"Production",href:`/production/${d.activity_role}`}]},{default:H(()=>{var a,u,p,y,x,g,f,v;return[t("div",G,[t("div",Q,[e[1]||(e[1]=t("h1",{class:"text-xl md:text-2xl font-bold"}," Hasil Produksi ",-1)),t("div",Z,"Printed on: "+s(new Date().toLocaleDateString()),1)]),t("div",J,[t("div",K,[e[2]||(e[2]=t("div",{class:"text-gray-500 dark:text-gray-400 font-medium"},"Model",-1)),t("div",O,s(((u=(a=r.value)==null?void 0:a.model)==null?void 0:u.description)||"-"),1),e[3]||(e[3]=t("div",{class:"text-gray-500 dark:text-gray-400 font-medium"},"Activity",-1)),t("div",U,s(((p=m.value)==null?void 0:p.name)||"-"),1),e[4]||(e[4]=t("div",{class:"text-gray-500 dark:text-gray-400 font-medium"},"Tanggal",-1)),t("div",W,s((y=r.value)!=null&&y.created_at?new Date(r.value.created_at).toLocaleDateString("en-GB"):"-"),1),e[5]||(e[5]=t("div",{class:"text-gray-500 dark:text-gray-400 font-medium"},"Harga",-1)),t("div",X,s(C(((x=r.value)==null?void 0:x.price_per_pcs)||0)),1),e[6]||(e[6]=t("div",{class:"text-gray-500 dark:text-gray-400 font-medium"},"Total",-1)),t("div",Y,s(((g=r.value)==null?void 0:g.total_price)||0),1)])]),(v=(f=r.value)==null?void 0:f.items)!=null&&v.length?(l(),n("div",tt,[e[8]||(e[8]=t("h2",{class:"font-semibold mb-2"},"Production Sizes",-1)),t("table",et,[e[7]||(e[7]=t("thead",null,[t("tr",{class:"bg-gray-100"},[t("th",{class:"border px-2 md:px-3 py-1 md:py-2 text-left"},"Size"),t("th",{class:"border px-2 md:px-3 py-1 md:py-2 text-left"},"Qty")])],-1)),t("tbody",null,[(l(!0),n(w,null,z(r.value.items,i=>{var b;return l(),n("tr",{key:i.size_id},[t("td",ot,s(((b=i.size)==null?void 0:b.name)||i.size_id),1),t("td",rt,s(i.qty),1)])}),128))])])])):R("",!0),t("div",st,[t("button",{onClick:L,class:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700"}," Print "),t("button",{onClick:e[0]||(e[0]=i=>h(V).visit(`/production/${d.activity_role}`)),type:"button",class:"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600"}," Back ")])])]}),_:1},8,["breadcrumbs"])],64))}});export{pt as default};
