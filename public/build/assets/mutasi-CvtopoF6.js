import{d as N,q as B,r as h,aT as L,c as z,o as k,f as g,g as b,p as t,u as e,Z as q,x as s,k as o,l as S,m as C,G as A,D as M,y as n,F as y,B as F,j as d,z as R}from"./app-Di3VD2wF.js";import{_ as U,a as E,b as c,c as $,d as G,e as r}from"./TableRow.vue_vue_type_script_setup_true_lang-sJPd0PKL.js";import{_ as H}from"./AppLayout.vue_vue_type_script_setup_true_lang-YamAR-Dq.js";import{u as I}from"./useKasbonStore-C5zbnOx7.js";import{S as J}from"./search-CTdNBa0X.js";import{S as O}from"./square-pen-C71ayQ9p.js";import"./index-DnLtb5dp.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-CVeNkWmG.js";const Z={class:"px-4 py-4"},Q={class:"mb-4 flex flex-col sm:flex-row items-center justify-between gap-3"},W={class:"flex items-center gap-3 w-full sm:w-auto"},X={class:"overflow-x-auto rounded-md border"},Y={class:"flex items-center justify-between"},ee={class:"font-semibold text-gray-800"},te={class:"mt-4 flex justify-end space-x-2"},se=["disabled"],ae=["disabled"],_e=N({__name:"mutasi",setup(le){const f=I(),{kasbonList:K,pagination:i,loading:x}=B(f),P=h(null),p=h(""),D=[{title:"Mutasi Kasbon",href:"/kasbon/mutasi"}],_=L({search:""}),v=()=>{var a;const u=typeof p.value=="string"?p.value:((a=p.value)==null?void 0:a.value)??"";f.fetchMutasi(1,50,{search:_.search,status:u})},m=z(()=>Math.ceil(i.value.total/i.value.per_page)||1),w=async u=>{u<1||u>m.value||await f.fetchMutasi(u)},V=()=>w(i.value.current_page+1),T=()=>w(i.value.current_page-1);k(()=>{const a=new Date().toISOString().slice(0,7);p.value=a,f.fetchMutasi()});const j=u=>{P.value=u};return(u,a)=>(b(),g(y,null,[t(e(q),{title:"History Mutasi Management"}),t(H,{breadcrumbs:D},{default:s(()=>[o("div",Z,[o("div",Q,[o("div",W,[S(o("input",{type:"month","onUpdate:modelValue":a[0]||(a[0]=l=>p.value=l),class:"border border-gray-300 rounded-lg px-2 py-2 text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white w-full sm:w-auto"},null,512),[[C,p.value]]),S(o("input",{"onUpdate:modelValue":a[1]||(a[1]=l=>_.search=l),type:"text",placeholder:"Cari data...",onKeyup:A(v,["enter"]),class:"border border-gray-300 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 w-full sm:w-56"},null,544),[[C,_.search]]),t(e(M),{onClick:v,class:"bg-indigo-600 text-white hover:bg-indigo-700 flex items-center gap-1"},{default:s(()=>[t(e(J),{class:"h-4 w-4"}),a[2]||(a[2]=n(" Cari "))]),_:1,__:[2]})])]),o("div",X,[t(e(U),null,{default:s(()=>[t(e(E),null,{default:s(()=>[t(e(c),{class:"bg-gray-100"},{default:s(()=>[t(e($),{class:"px-3 py-2"},{default:s(()=>a[3]||(a[3]=[n("Karyawan")])),_:1,__:[3]}),t(e($),{class:"px-3 py-2"},{default:s(()=>a[4]||(a[4]=[n("Details")])),_:1,__:[4]})]),_:1})]),_:1}),t(e(G),null,{default:s(()=>[(b(!0),g(y,null,F(e(K),l=>(b(),g(y,{key:l.id},[t(e(c),{class:"bg-gray-50"},{default:s(()=>[t(e(r),{colspan:"2",class:"px-3 py-2"},{default:s(()=>[o("div",Y,[o("span",ee,d(l.employee?l.employee.name:"-"),1),o("span",{class:R(["inline-block rounded-full border px-2.5 py-0.5 text-xs font-semibold",{"border-yellow-400 bg-yellow-50 text-yellow-700":l.status==="Pending","border-green-400 bg-green-50 text-green-700":l.status==="Approved","border-red-400 bg-red-50 text-red-700":l.status==="Rejected"}])},d(l.status),3)])]),_:2},1024)]),_:2},1024),t(e(c),null,{default:s(()=>[t(e(r),{class:"w-1/4 px-3 py-1 font-medium"},{default:s(()=>a[5]||(a[5]=[n("Tanggal")])),_:1,__:[5]}),t(e(r),{class:"px-3 py-1"},{default:s(()=>[n(d(l.created_at?new Date(l.created_at).toLocaleDateString():"-"),1)]),_:2},1024)]),_:2},1024),t(e(c),null,{default:s(()=>[t(e(r),{class:"w-1/4 px-3 py-1 font-medium"},{default:s(()=>a[6]||(a[6]=[n("Jumlah Kasbon")])),_:1,__:[6]}),t(e(r),{class:"px-3 py-1"},{default:s(()=>[n(d(Number(l.amount).toLocaleString()),1)]),_:2},1024)]),_:2},1024),t(e(c),null,{default:s(()=>[t(e(r),{class:"px-3 py-1 font-medium"},{default:s(()=>a[7]||(a[7]=[n("Keterangan")])),_:1,__:[7]}),t(e(r),{class:"px-3 py-1"},{default:s(()=>[n(d(l.description||"-"),1)]),_:2},1024)]),_:2},1024),t(e(c),null,{default:s(()=>[t(e(r),{class:"px-3 py-1 font-medium"},{default:s(()=>a[8]||(a[8]=[n("Actions")])),_:1,__:[8]}),t(e(r),{class:"flex gap-2 px-3 py-1"},{default:s(()=>[t(e(M),{size:"icon",variant:"ghost",onClick:oe=>j(l)},{default:s(()=>[t(e(O),{class:"h-4 w-4"})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024),t(e(c),null,{default:s(()=>[t(e(r),{colspan:"2",class:"h-3"})]),_:1})],64))),128))]),_:1})]),_:1})]),o("div",te,[o("button",{onClick:T,disabled:e(i).current_page===1||e(x),class:"rounded border px-3 py-1 hover:bg-gray-100 disabled:opacity-50"}," Previous ",8,se),o("span",null,"Page "+d(e(i).current_page)+" / "+d(m.value),1),o("button",{onClick:V,disabled:e(i).current_page>=m.value||e(x),class:"rounded border px-3 py-1 hover:bg-gray-100 disabled:opacity-50"}," Next ",8,ae)])])]),_:1})],64))}});export{_e as default};
