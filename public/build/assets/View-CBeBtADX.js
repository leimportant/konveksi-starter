import{d as T,r as c,o as V,f as n,g as l,p as _,u as h,Z as F,x as H,k as t,C as N,j as r,F as w,B as R,V as z}from"./app-Hp9DS1jn.js";import{u as $}from"./useToast-TBFHk31F.js";import{u as A}from"./useProductionStore-CAxCF337.js";import{u as j}from"./useModelStore-DwwHbJhM.js";import{u as E}from"./useMasterActivityRoleStore-BvJR-KwU.js";import{_ as q}from"./AppLayout.vue_vue_type_script_setup_true_lang-DG2J2syb.js";import"./index-DbqoqWq8.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-CktOlOmS.js";const Q={id:"print-area",class:"p-4 md:p-6 space-y-4 md:space-y-6 print:bg-white"},Z={class:"flex justify-between items-center"},G={class:"hidden print:block"},J={class:"w-full max-w-lg bg-white dark:bg-neutral-900 border border-gray-200 dark:border-neutral-800 rounded-xl shadow-sm p-4 text-sm md:text-base"},K={class:"grid grid-cols-[150px_1fr] gap-y-2"},O={class:"text-gray-900 dark:text-white font-semibold"},U={class:"text-gray-900 dark:text-white font-semibold"},W={class:"text-gray-900 dark:text-white font-semibold"},X={class:"text-emerald-600 dark:text-emerald-400 font-semibold"},Y={class:"text-indigo-600 dark:text-indigo-400 font-bold"},tt={key:0,class:"overflow-x-auto"},et={class:"w-full table-auto border text-sm md:"},ot={class:"border px-2 md:px-3 py-1 md:py-2"},rt={class:"border px-2 md:px-3 py-1 md:py-2"},st={class:"border px-2 md:px-3 py-1 md:py-2"},at={class:"flex gap-2 no-print"},yt=T({__name:"View",props:{id:{},activity_role:{}},setup(k){const D=$(),S=A(),B=j(),I=E(),i=k,s=c(null),m=c(null),M=c(null);function P(o){return new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(o)}const C=async()=>{try{const o=await S.fetchProductionsById(i.id);s.value=o;const e=await B.fetchModelById(o.model_id);M.value=e;const a=await I.getActivityRoleById(Number(i.activity_role));m.value=a}catch(o){console.error("Failed to fetch activity role",o),D.error("Failed to fetch data")}},L=()=>{var a;const o=document.body.innerHTML,e=((a=document.getElementById("print-area"))==null?void 0:a.innerHTML)||"";document.body.innerHTML=e,window.print(),document.body.innerHTML=o,location.reload()};return V(C),(o,e)=>(l(),n(w,null,[_(h(F),{title:"View Production"}),_(q,{breadcrumbs:[{title:"Production",href:`/production/${i.activity_role}`}]},{default:H(()=>{var a,u,p,y,x,g,f,b;return[t("div",Q,[t("div",Z,[e[1]||(e[1]=t("h1",{class:"text-xl md:text-2xl font-bold"}," Hasil Produksi ",-1)),t("div",G,"Printed on: "+r(new Date().toLocaleDateString("id-ID")),1)]),t("div",J,[t("div",K,[e[2]||(e[2]=t("div",{class:"text-gray-500 dark:text-gray-400 font-medium"},"Model",-1)),t("div",O,r(((u=(a=s.value)==null?void 0:a.model)==null?void 0:u.description)||"-"),1),e[3]||(e[3]=t("div",{class:"text-gray-500 dark:text-gray-400 font-medium"},"Activity",-1)),t("div",U,r(((p=m.value)==null?void 0:p.name)||"-"),1),e[4]||(e[4]=t("div",{class:"text-gray-500 dark:text-gray-400 font-medium"},"Tanggal",-1)),t("div",W,r((y=s.value)!=null&&y.created_at?new Date(s.value.created_at).toLocaleDateString("id-ID"):"-"),1),e[5]||(e[5]=t("div",{class:"text-gray-500 dark:text-gray-400 font-medium"},"Harga",-1)),t("div",X,r(P(((x=s.value)==null?void 0:x.price_per_pcs)||0)),1),e[6]||(e[6]=t("div",{class:"text-gray-500 dark:text-gray-400 font-medium"},"Total",-1)),t("div",Y,r(((g=s.value)==null?void 0:g.total_price)||0),1)])]),(b=(f=s.value)==null?void 0:f.items)!=null&&b.length?(l(),n("div",tt,[e[8]||(e[8]=t("h2",{class:"font-semibold mb-2"},"Production Sizes",-1)),t("table",et,[e[7]||(e[7]=t("thead",null,[t("tr",{class:"bg-gray-100"},[t("th",{class:"border px-2 md:px-3 py-1 md:py-2 text-left"},"Size"),t("th",{class:"border px-2 md:px-3 py-1 md:py-2 text-left"},"Variant"),t("th",{class:"border px-2 md:px-3 py-1 md:py-2 text-left"},"Qty")])],-1)),t("tbody",null,[(l(!0),n(w,null,R(s.value.items,d=>{var v;return l(),n("tr",{key:d.size_id},[t("td",ot,r(((v=d.size)==null?void 0:v.name)||d.size_id),1),t("td",rt,r(d.variant||"-"),1),t("td",st,r(d.qty),1)])}),128))])])])):N("",!0),t("div",at,[t("button",{onClick:L,class:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700"}," Print "),t("button",{onClick:e[0]||(e[0]=d=>h(z).visit(`/production/${i.activity_role}`)),type:"button",class:"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600"}," Back ")])])]}),_:1},8,["breadcrumbs"])],64))}});export{yt as default};
