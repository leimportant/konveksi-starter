import{d as Le,r as T,c as R,o as Ee,f as g,g as u,p as se,C as S,u as ee,Z as $e,x as le,k as i,l as de,m as ue,F as H,B as te,y as K,j as C,z as ie,K as pe,E as Ie,b as ze,P as Se,_ as Be}from"./app-dnJGHIqc.js";import{u as De}from"./useToast-DEcPQAux.js";import{_ as qe}from"./AppLayout.vue_vue_type_script_setup_true_lang-xP8Td3B8.js";import{u as Pe}from"./useCartStore-BVeVpQmi.js";import{e as Me,c as je,m as E,b as Te,s as ge,d as Fe,f as fe,a as Ae,S as He}from"./swiper-Cd20iJx-.js";import"./index-DhprlUp-.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-B-kjAcbN.js";function me(q,e){let b=null;return function(...f){b&&clearTimeout(b),b=setTimeout(()=>{q.apply(this,f)},e)}}function ve(q,e,b,f){return q.params.createElements&&Object.keys(f).forEach(k=>{if(!b[k]&&b.auto===!0){let y=Me(q.el,`.${f[k]}`)[0];y||(y=je("div",f[k]),y.className=f[k],q.el.append(y)),b[k]=y,e[k]=y}}),b}function Oe(q){let{swiper:e,extendParams:b,on:f,emit:k}=q;b({navigation:{nextEl:null,prevEl:null,hideOnClick:!1,disabledClass:"swiper-button-disabled",hiddenClass:"swiper-button-hidden",lockClass:"swiper-button-lock",navigationDisabledClass:"swiper-navigation-disabled"}}),e.navigation={nextEl:null,prevEl:null};function y(o){let c;return o&&typeof o=="string"&&e.isElement&&(c=e.el.querySelector(o)||e.hostEl.querySelector(o),c)?c:(o&&(typeof o=="string"&&(c=[...document.querySelectorAll(o)]),e.params.uniqueNavElements&&typeof o=="string"&&c&&c.length>1&&e.el.querySelectorAll(o).length===1?c=e.el.querySelector(o):c&&c.length===1&&(c=c[0])),o&&!c?o:c)}function j(o,c){const m=e.params.navigation;o=E(o),o.forEach(h=>{h&&(h.classList[c?"add":"remove"](...m.disabledClass.split(" ")),h.tagName==="BUTTON"&&(h.disabled=c),e.params.watchOverflow&&e.enabled&&h.classList[e.isLocked?"add":"remove"](m.lockClass))})}function B(){const{nextEl:o,prevEl:c}=e.navigation;if(e.params.loop){j(c,!1),j(o,!1);return}j(c,e.isBeginning&&!e.params.rewind),j(o,e.isEnd&&!e.params.rewind)}function D(o){o.preventDefault(),!(e.isBeginning&&!e.params.loop&&!e.params.rewind)&&(e.slidePrev(),k("navigationPrev"))}function z(o){o.preventDefault(),!(e.isEnd&&!e.params.loop&&!e.params.rewind)&&(e.slideNext(),k("navigationNext"))}function V(){const o=e.params.navigation;if(e.params.navigation=ve(e,e.originalParams.navigation,e.params.navigation,{nextEl:"swiper-button-next",prevEl:"swiper-button-prev"}),!(o.nextEl||o.prevEl))return;let c=y(o.nextEl),m=y(o.prevEl);Object.assign(e.navigation,{nextEl:c,prevEl:m}),c=E(c),m=E(m);const h=(t,a)=>{t&&t.addEventListener("click",a==="next"?z:D),!e.enabled&&t&&t.classList.add(...o.lockClass.split(" "))};c.forEach(t=>h(t,"next")),m.forEach(t=>h(t,"prev"))}function A(){let{nextEl:o,prevEl:c}=e.navigation;o=E(o),c=E(c);const m=(h,t)=>{h.removeEventListener("click",t==="next"?z:D),h.classList.remove(...e.params.navigation.disabledClass.split(" "))};o.forEach(h=>m(h,"next")),c.forEach(h=>m(h,"prev"))}f("init",()=>{e.params.navigation.enabled===!1?w():(V(),B())}),f("toEdge fromEdge lock unlock",()=>{B()}),f("destroy",()=>{A()}),f("enable disable",()=>{let{nextEl:o,prevEl:c}=e.navigation;if(o=E(o),c=E(c),e.enabled){B();return}[...o,...c].filter(m=>!!m).forEach(m=>m.classList.add(e.params.navigation.lockClass))}),f("click",(o,c)=>{let{nextEl:m,prevEl:h}=e.navigation;m=E(m),h=E(h);const t=c.target;let a=h.includes(t)||m.includes(t);if(e.isElement&&!a){const r=c.path||c.composedPath&&c.composedPath();r&&(a=r.find(p=>m.includes(p)||h.includes(p)))}if(e.params.navigation.hideOnClick&&!a){if(e.pagination&&e.params.pagination&&e.params.pagination.clickable&&(e.pagination.el===t||e.pagination.el.contains(t)))return;let r;m.length?r=m[0].classList.contains(e.params.navigation.hiddenClass):h.length&&(r=h[0].classList.contains(e.params.navigation.hiddenClass)),k(r===!0?"navigationShow":"navigationHide"),[...m,...h].filter(p=>!!p).forEach(p=>p.classList.toggle(e.params.navigation.hiddenClass))}});const d=()=>{e.el.classList.remove(...e.params.navigation.navigationDisabledClass.split(" ")),V(),B()},w=()=>{e.el.classList.add(...e.params.navigation.navigationDisabledClass.split(" ")),A()};Object.assign(e.navigation,{enable:d,disable:w,update:B,init:V,destroy:A})}function ae(q){return q===void 0&&(q=""),`.${q.trim().replace(/([\.:!+\/])/g,"\\$1").replace(/ /g,".")}`}function Ne(q){let{swiper:e,extendParams:b,on:f,emit:k}=q;const y="swiper-pagination";b({pagination:{el:null,bulletElement:"span",clickable:!1,hideOnClick:!1,renderBullet:null,renderProgressbar:null,renderFraction:null,renderCustom:null,progressbarOpposite:!1,type:"bullets",dynamicBullets:!1,dynamicMainBullets:1,formatFractionCurrent:t=>t,formatFractionTotal:t=>t,bulletClass:`${y}-bullet`,bulletActiveClass:`${y}-bullet-active`,modifierClass:`${y}-`,currentClass:`${y}-current`,totalClass:`${y}-total`,hiddenClass:`${y}-hidden`,progressbarFillClass:`${y}-progressbar-fill`,progressbarOppositeClass:`${y}-progressbar-opposite`,clickableClass:`${y}-clickable`,lockClass:`${y}-lock`,horizontalClass:`${y}-horizontal`,verticalClass:`${y}-vertical`,paginationDisabledClass:`${y}-disabled`}}),e.pagination={el:null,bullets:[]};let j,B=0;function D(){return!e.params.pagination.el||!e.pagination.el||Array.isArray(e.pagination.el)&&e.pagination.el.length===0}function z(t,a){const{bulletActiveClass:r}=e.params.pagination;t&&(t=t[`${a==="prev"?"previous":"next"}ElementSibling`],t&&(t.classList.add(`${r}-${a}`),t=t[`${a==="prev"?"previous":"next"}ElementSibling`],t&&t.classList.add(`${r}-${a}-${a}`)))}function V(t,a,r){if(t=t%r,a=a%r,a===t+1)return"next";if(a===t-1)return"previous"}function A(t){const a=t.target.closest(ae(e.params.pagination.bulletClass));if(!a)return;t.preventDefault();const r=fe(a)*e.params.slidesPerGroup;if(e.params.loop){if(e.realIndex===r)return;const p=V(e.realIndex,r,e.slides.length);p==="next"?e.slideNext():p==="previous"?e.slidePrev():e.slideToLoop(r)}else e.slideTo(r)}function d(){const t=e.rtl,a=e.params.pagination;if(D())return;let r=e.pagination.el;r=E(r);let p,v;const F=e.virtual&&e.params.virtual.enabled?e.virtual.slides.length:e.slides.length,W=e.params.loop?Math.ceil(F/e.params.slidesPerGroup):e.snapGrid.length;if(e.params.loop?(v=e.previousRealIndex||0,p=e.params.slidesPerGroup>1?Math.floor(e.realIndex/e.params.slidesPerGroup):e.realIndex):typeof e.snapIndex<"u"?(p=e.snapIndex,v=e.previousSnapIndex):(v=e.previousIndex||0,p=e.activeIndex||0),a.type==="bullets"&&e.pagination.bullets&&e.pagination.bullets.length>0){const x=e.pagination.bullets;let P,$,O;if(a.dynamicBullets&&(j=Fe(x[0],e.isHorizontal()?"width":"height"),r.forEach(_=>{_.style[e.isHorizontal()?"width":"height"]=`${j*(a.dynamicMainBullets+4)}px`}),a.dynamicMainBullets>1&&v!==void 0&&(B+=p-(v||0),B>a.dynamicMainBullets-1?B=a.dynamicMainBullets-1:B<0&&(B=0)),P=Math.max(p-B,0),$=P+(Math.min(x.length,a.dynamicMainBullets)-1),O=($+P)/2),x.forEach(_=>{const L=[...["","-next","-next-next","-prev","-prev-prev","-main"].map(I=>`${a.bulletActiveClass}${I}`)].map(I=>typeof I=="string"&&I.includes(" ")?I.split(" "):I).flat();_.classList.remove(...L)}),r.length>1)x.forEach(_=>{const L=fe(_);L===p?_.classList.add(...a.bulletActiveClass.split(" ")):e.isElement&&_.setAttribute("part","bullet"),a.dynamicBullets&&(L>=P&&L<=$&&_.classList.add(...`${a.bulletActiveClass}-main`.split(" ")),L===P&&z(_,"prev"),L===$&&z(_,"next"))});else{const _=x[p];if(_&&_.classList.add(...a.bulletActiveClass.split(" ")),e.isElement&&x.forEach((L,I)=>{L.setAttribute("part",I===p?"bullet-active":"bullet")}),a.dynamicBullets){const L=x[P],I=x[$];for(let N=P;N<=$;N+=1)x[N]&&x[N].classList.add(...`${a.bulletActiveClass}-main`.split(" "));z(L,"prev"),z(I,"next")}}if(a.dynamicBullets){const _=Math.min(x.length,a.dynamicMainBullets+4),L=(j*_-j)/2-O*j,I=t?"right":"left";x.forEach(N=>{N.style[e.isHorizontal()?I:"top"]=`${L}px`})}}r.forEach((x,P)=>{if(a.type==="fraction"&&(x.querySelectorAll(ae(a.currentClass)).forEach($=>{$.textContent=a.formatFractionCurrent(p+1)}),x.querySelectorAll(ae(a.totalClass)).forEach($=>{$.textContent=a.formatFractionTotal(W)})),a.type==="progressbar"){let $;a.progressbarOpposite?$=e.isHorizontal()?"vertical":"horizontal":$=e.isHorizontal()?"horizontal":"vertical";const O=(p+1)/W;let _=1,L=1;$==="horizontal"?_=O:L=O,x.querySelectorAll(ae(a.progressbarFillClass)).forEach(I=>{I.style.transform=`translate3d(0,0,0) scaleX(${_}) scaleY(${L})`,I.style.transitionDuration=`${e.params.speed}ms`})}a.type==="custom"&&a.renderCustom?(ge(x,a.renderCustom(e,p+1,W)),P===0&&k("paginationRender",x)):(P===0&&k("paginationRender",x),k("paginationUpdate",x)),e.params.watchOverflow&&e.enabled&&x.classList[e.isLocked?"add":"remove"](a.lockClass)})}function w(){const t=e.params.pagination;if(D())return;const a=e.virtual&&e.params.virtual.enabled?e.virtual.slides.length:e.grid&&e.params.grid.rows>1?e.slides.length/Math.ceil(e.params.grid.rows):e.slides.length;let r=e.pagination.el;r=E(r);let p="";if(t.type==="bullets"){let v=e.params.loop?Math.ceil(a/e.params.slidesPerGroup):e.snapGrid.length;e.params.freeMode&&e.params.freeMode.enabled&&v>a&&(v=a);for(let F=0;F<v;F+=1)t.renderBullet?p+=t.renderBullet.call(e,F,t.bulletClass):p+=`<${t.bulletElement} ${e.isElement?'part="bullet"':""} class="${t.bulletClass}"></${t.bulletElement}>`}t.type==="fraction"&&(t.renderFraction?p=t.renderFraction.call(e,t.currentClass,t.totalClass):p=`<span class="${t.currentClass}"></span> / <span class="${t.totalClass}"></span>`),t.type==="progressbar"&&(t.renderProgressbar?p=t.renderProgressbar.call(e,t.progressbarFillClass):p=`<span class="${t.progressbarFillClass}"></span>`),e.pagination.bullets=[],r.forEach(v=>{t.type!=="custom"&&ge(v,p||""),t.type==="bullets"&&e.pagination.bullets.push(...v.querySelectorAll(ae(t.bulletClass)))}),t.type!=="custom"&&k("paginationRender",r[0])}function o(){e.params.pagination=ve(e,e.originalParams.pagination,e.params.pagination,{el:"swiper-pagination"});const t=e.params.pagination;if(!t.el)return;let a;typeof t.el=="string"&&e.isElement&&(a=e.el.querySelector(t.el)),!a&&typeof t.el=="string"&&(a=[...document.querySelectorAll(t.el)]),a||(a=t.el),!(!a||a.length===0)&&(e.params.uniqueNavElements&&typeof t.el=="string"&&Array.isArray(a)&&a.length>1&&(a=[...e.el.querySelectorAll(t.el)],a.length>1&&(a=a.find(r=>Te(r,".swiper")[0]===e.el))),Array.isArray(a)&&a.length===1&&(a=a[0]),Object.assign(e.pagination,{el:a}),a=E(a),a.forEach(r=>{t.type==="bullets"&&t.clickable&&r.classList.add(...(t.clickableClass||"").split(" ")),r.classList.add(t.modifierClass+t.type),r.classList.add(e.isHorizontal()?t.horizontalClass:t.verticalClass),t.type==="bullets"&&t.dynamicBullets&&(r.classList.add(`${t.modifierClass}${t.type}-dynamic`),B=0,t.dynamicMainBullets<1&&(t.dynamicMainBullets=1)),t.type==="progressbar"&&t.progressbarOpposite&&r.classList.add(t.progressbarOppositeClass),t.clickable&&r.addEventListener("click",A),e.enabled||r.classList.add(t.lockClass)}))}function c(){const t=e.params.pagination;if(D())return;let a=e.pagination.el;a&&(a=E(a),a.forEach(r=>{r.classList.remove(t.hiddenClass),r.classList.remove(t.modifierClass+t.type),r.classList.remove(e.isHorizontal()?t.horizontalClass:t.verticalClass),t.clickable&&(r.classList.remove(...(t.clickableClass||"").split(" ")),r.removeEventListener("click",A))})),e.pagination.bullets&&e.pagination.bullets.forEach(r=>r.classList.remove(...t.bulletActiveClass.split(" ")))}f("changeDirection",()=>{if(!e.pagination||!e.pagination.el)return;const t=e.params.pagination;let{el:a}=e.pagination;a=E(a),a.forEach(r=>{r.classList.remove(t.horizontalClass,t.verticalClass),r.classList.add(e.isHorizontal()?t.horizontalClass:t.verticalClass)})}),f("init",()=>{e.params.pagination.enabled===!1?h():(o(),w(),d())}),f("activeIndexChange",()=>{typeof e.snapIndex>"u"&&d()}),f("snapIndexChange",()=>{d()}),f("snapGridLengthChange",()=>{w(),d()}),f("destroy",()=>{c()}),f("enable disable",()=>{let{el:t}=e.pagination;t&&(t=E(t),t.forEach(a=>a.classList[e.enabled?"remove":"add"](e.params.pagination.lockClass)))}),f("lock unlock",()=>{d()}),f("click",(t,a)=>{const r=a.target,p=E(e.pagination.el);if(e.params.pagination.el&&e.params.pagination.hideOnClick&&p&&p.length>0&&!r.classList.contains(e.params.pagination.bulletClass)){if(e.navigation&&(e.navigation.nextEl&&r===e.navigation.nextEl||e.navigation.prevEl&&r===e.navigation.prevEl))return;const v=p[0].classList.contains(e.params.pagination.hiddenClass);k(v===!0?"paginationShow":"paginationHide"),p.forEach(F=>F.classList.toggle(e.params.pagination.hiddenClass))}});const m=()=>{e.el.classList.remove(e.params.pagination.paginationDisabledClass);let{el:t}=e.pagination;t&&(t=E(t),t.forEach(a=>a.classList.remove(e.params.pagination.paginationDisabledClass))),o(),w(),d()},h=()=>{e.el.classList.add(e.params.pagination.paginationDisabledClass);let{el:t}=e.pagination;t&&(t=E(t),t.forEach(a=>a.classList.add(e.params.pagination.paginationDisabledClass))),c()};Object.assign(e.pagination,{enable:m,disable:h,render:w,update:d,init:o,destroy:c})}const Ve={class:"flex flex-col md:col-span-4 lg:col-span-4"},Ge={class:"mb-2 flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between"},Re={class:"w-full space-y-4 bg-white p-4"},Ue={class:"mb-4 flex flex-col gap-2 px-2 sm:flex-row sm:items-center sm:justify-between"},Qe={class:"grid grid-cols-2 gap-1 sm:grid-cols-5 xl:grid-cols-4"},Ke=["onClick","title"],We={class:"mb-2 h-24 w-full"},Xe=["src"],Ye={key:1,class:"flex h-full w-full items-center justify-center rounded-lg bg-gray-200 text-xs text-gray-400"},Je={class:"justify-between truncate text-sm font-semibold text-gray-900"},Ze={key:0,class:"ml-1 rounded bg-orange-500 px-2 py-0.5 text-[14px] font-bold text-white md:text-xs"},et={class:"mt-1 text-sm"},tt={class:"text-xs text-gray-400 line-through"},at={class:"text-xs text-green-500"},st={key:1,class:"font-semibold text-gray-700"},lt={class:"grid min-h-screen gap-8 overflow-x-hidden bg-white p-2 md:grid-cols-[1fr_400px]"},it={class:"absolute right-8 top-5 z-50 hidden md:block"},nt={key:0,class:"absolute -right-1 -top-1 flex h-5 w-5 items-center justify-center rounded-full bg-red-500 text-xs text-white"},rt={class:"fixed right-8 top-5 z-50 block md:hidden"},ot={key:0,class:"absolute -right-1 -top-1 flex h-5 w-5 items-center justify-center rounded-full bg-red-500 text-xs text-white"},ct={key:0,class:"mt-10 text-center text-gray-400"},dt=["src"],ut={class:"min-w-0 flex-1",style:{overflow:"hidden"}},pt={class:"truncate text-sm font-semibold text-gray-800 dark:text-gray-100"},gt={class:"text-xs text-gray-500"},ft={class:"text-xs text-gray-800 dark:text-gray-200"},mt={class:"text-xs text-gray-800 dark:text-gray-200"},vt={class:"text-xs text-gray-800 dark:text-gray-200"},ht={class:"flex items-center space-x-1"},yt=["onClick","disabled"],bt={class:"w-8 text-center text-sm text-gray-800 dark:text-gray-100"},xt=["onClick"],_t=["onClick"],Ct={class:"px-4 py-4 border-t border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-900"},kt={class:"text-sm font-semibold"},wt={class:"text-sm font-semibold"},Lt={class:"relative flex max-h-[90vh] w-full max-w-sm flex-col rounded-xl bg-white sm:max-w-md sm:p-0 md:max-w-lg lg:max-w-xl"},Et={class:"flex-1 overflow-y-auto p-4 sm:p-6"},$t={key:0},It={key:0},zt=["src","alt","onClick"],St=["src"],Bt={key:1,class:"mb-4 h-40 w-full rounded-lg sm:h-48 md:h-60"},Dt=["src"],qt={key:2,class:"mb-4 flex h-40 w-full items-center justify-center rounded-lg bg-gray-200 text-xs text-gray-400 sm:h-48 md:h-60"},Pt={class:"mb-2 text-lg font-semibold text-gray-500 sm:text-xl"},Mt={key:3,class:"mb-4"},jt={class:"flex flex-wrap gap-2"},Tt=["onClick"],Ft={key:4,class:"mb-4"},At={class:"flex flex-wrap gap-2"},Ht=["onClick"],Ot={key:5,class:"mb-4 text-sm text-gray-700"},Nt={key:0},Vt={key:0,class:"mr-2 text-gray-400 line-through"},Gt={class:"font-bold"},Rt={key:1,class:"text-green-600 text-xs"},Ut=["innerHTML"],Qt={class:"mb-4 flex items-center space-x-3"},Kt=["disabled"],Wt=["max"],Xt=["disabled"],Yt={class:"border-t p-4"},Jt=["disabled"],Zt={class:"relative"},ea=["src"],ta=Le({__name:"Cart",setup(q){const e=[Ne,Oe],b=De(),f=Pe(),k=T([]),y=T(""),j=T(1),B=T(1),D=T(null),z=T(null),V=T(null),A=T(!1),d=T(null),w=T(1),o=T(!1),c=T(""),m=T(!1),h=()=>m.value=!m.value,t=s=>s?s.startsWith("storage/")?"/"+s:s.startsWith("/storage/")?s:"/storage/"+s:"";function a(s){const l=typeof s=="string"?parseFloat(s):s;return!l||l<=0?"-":new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:2}).format(l)}const r=R(()=>{var l;if(!((l=d.value)!=null&&l.sizes))return[];const s=d.value.sizes.map(M=>M.variant);return[...new Set(s)]}),p=R(()=>d.value?d.value.variant==="all"?d.value.sizes.map(s=>s.size_id):D.value?d.value.sizes.filter(s=>s.variant===D.value).map(s=>s.size_id):[]:[]),v=R(()=>!z.value||!d.value?null:d.value.variant==="all"?d.value.sizes.find(s=>s.size_id===z.value):D.value?d.value.sizes.find(s=>s.variant===D.value&&s.size_id===z.value):null);async function F(){try{const s=await ze.get(`/api/stock?page=${j.value}&search=${y.value}`);k.value=s.data.data.map(l=>({...l,gallery_images:l.gallery_images?l.gallery_images.map(M=>({...M,extension:M.path.split(".").pop()||""})):[]})),B.value=s.data.last_page,await f.fetchCartItems()}catch(s){console.error("Error fetching products:",s),b.error("Failed to fetch products")}}function W(){j.value=1,F()}function x(s){d.value={...s,gallery_images:s.gallery_images?s.gallery_images.map(l=>({...l,extension:l.path.split(".").pop()||""})):[]},w.value=1,D.value=s.variant==="all"?"all":null,z.value=null,A.value=!0}function P(){A.value=!1,d.value=null,w.value=1}function $(s){c.value=s,o.value=!0}function O(){o.value=!1,c.value=""}const _=R(()=>f.cartItems.reduce((s,l)=>s+(l.quantity||0),0)),L=async()=>{var G,X,Y,J,Z;const s=v.value;if(!s){b.error("Detail produk tidak ditemukan.");return}if(!z.value){b.error("Harap pilih ukuran terlebih dahulu.");return}if(w.value>s.qty_available){b.error("Jumlah melebihi stok tersedia");return}const l=s.price??0,M=s.discount??0,U=(s.price_sell??0)>0?s.price_sell??0:l-M;try{await f.addToCart(((G=d.value)==null?void 0:G.product_id)??0,w.value,s.size_id??"",((X=d.value)==null?void 0:X.uom_id)??"PCS",l,M,U,((Y=d.value)==null?void 0:Y.location_id)??2,((J=d.value)==null?void 0:J.variant)??"all",((Z=d.value)==null?void 0:Z.sloc_id)??""),b.success("Product added to cart"),await F(),P()}catch{b.error(f.error||"Failed to add product to cart")}},I=()=>{var s;d.value&&w.value<(((s=v.value)==null?void 0:s.qty_available)??0)&&w.value++},N=()=>{w.value>1&&w.value--},he=me(async s=>{const l=s.price-(s.discount??0);if(s.quantity<s.qty_available)try{await f.addToCart(s.product_id??0,s.quantity+1,s.size_id??"",s.uom_id??"PCS",s.price,s.discount??0,s.price_sell??l,s.location_id??1,s.variant??"all",s.sloc_id??"GS00")}catch{b.error("Error increasing quantity")}else b.error("Stok maksimum tercapai")},300),ye=me(async s=>{if(s.quantity>1)try{const l=s.price-(s.discount??0);await f.addToCart(s.product_id??0,s.quantity-1,s.size_id??"",s.uom_id??"PCS",s.price,s.discount??0,s.price_sell??l,s.location_id??0,s.variant??"",s.sloc_id??"")}catch{b.error("Error decreasing quantity")}},300),be=async s=>{try{await f.removeFromCart(s??0),b.success("Item removed")}catch{b.error(f.error||"Failed to remove item")}},ne=R(()=>f.cartItems.map(s=>({...k.value.find(M=>M.product_id===s.product_id),...s,id:s.product_id,cartItemId:s.id,quantity:s.quantity,price:s.price??0,price_sell:s.price_sell??0,discount:s.discount??0,size_id:s.size_id,uom_id:s.uom_id})).filter(Boolean)),xe=R(()=>f.cartItems.reduce((s,l)=>s+(l.price_sell??!1?l.price_sell??0:l.price)*l.quantity,0)),_e=R(()=>f.cartItems.reduce((s,l)=>{const M=l.price||0,U=(l.price_sell??0)>0?l.price_sell??0:l.price||0,G=M-U;return s+G*(l.quantity||0)},0)),Ce=()=>{console.log("Proceeding to checkout"),Se.visit("/checkout")},ke=s=>s?["jpg","jpeg","png","gif","webp","avif"].includes(s.toLowerCase()):!1,we=s=>s?["mp4","webm","ogg"].includes(s.toLowerCase()):!1;return Ee(async()=>{m.value=!1,await F()}),(s,l)=>(u(),g(H,null,[se(ee($e),{title:"Belanja"}),se(qe,null,{default:le(()=>{var M,U,G,X,Y,J,Z,re,oe,ce;return[i("section",Ve,[i("div",Ge,[i("section",Re,[i("div",Ue,[l[4]||(l[4]=i("h2",{class:"text-sm font-bold text-gray-800 dark:text-gray-500"},"Katalog Produk",-1)),de(i("input",{type:"text","onUpdate:modelValue":l[0]||(l[0]=n=>y.value=n),onInput:W,placeholder:"Cari produk...",class:"w-full rounded border px-3 py-1 text-sm sm:ml-auto sm:w-52"},null,544),[[ue,y.value]])]),i("div",Qe,[(u(!0),g(H,null,te(k.value,n=>(u(),g("div",{key:n.product_id,onClick:Q=>x(n),class:"cursor-pointer rounded-xl border border-gray-200 bg-green-50 p-3 shadow-sm transition hover:bg-green-100 hover:shadow-md",title:`${n.product_name} - ${a(n.price)}`},[i("div",We,[n.image_path?(u(),g("img",{key:0,src:t(n.image_path),alt:"product",class:"h-full w-full cursor-pointer rounded-lg object-cover"},null,8,Xe)):(u(),g("div",Ye," No Image "))]),i("p",Je,[K(C(n.product_name)+" ",1),n.discount&&n.price?(u(),g(H,{key:0},[n.discount>0?(u(),g("span",Ze," - "+C(Math.round(n.discount/n.price*100))+"% ",1)):S("",!0)],64)):S("",!0)]),i("div",et,[n.discount&&n.discount>0?(u(),g(H,{key:0},[i("p",tt,C(a(n.price)),1),i("p",null,[K(C(a(n.price_sell||n.price))+" ",1),l[5]||(l[5]=i("br",null,null,-1)),i("span",at,"(Diskon "+C(a(n.discount))+")",1)])],64)):(u(),g("p",st,C(a(n.price)),1))])],8,Ke))),128))])])])]),i("div",lt,[i("div",it,[i("button",{onClick:h,class:"relative rounded-full bg-white p-2 shadow hover:shadow-md"},[l[6]||(l[6]=K(" 🛒 ")),_.value>0?(u(),g("span",nt,C(_.value),1)):S("",!0)])]),i("div",rt,[i("button",{onClick:h,class:"relative rounded-full bg-white p-2 shadow hover:shadow-md"},[l[7]||(l[7]=K(" 🛒 ")),_.value>0?(u(),g("span",ot,C(_.value),1)):S("",!0)])])]),m.value?(u(),g("div",{key:0,class:"fixed inset-0 z-30 bg-black bg-opacity-10 md:hidden",onClick:l[1]||(l[1]=n=>m.value=!1)})):S("",!0),i("aside",{class:ie(["fixed right-0 top-0 z-40 h-screen w-full max-w-md flex flex-col bg-gray-100 dark:bg-gray-300 transition-transform duration-300 transform",m.value?"translate-x-0":"translate-x-full"])},[l[8]||(l[8]=i("div",{class:"px-2 py-2 border-b border-gray-100 dark:border-gray-200"},[i("h2",{class:"text-sm font-bold"},"Keranjang Belanja")],-1)),i("div",{ref_key:"orderList",ref:V,class:"h-[420px] overflow-y-scroll px-4 py-2 space-y-4"},[ne.value.length===0?(u(),g("div",ct," Cart is empty ")):S("",!0),(u(!0),g(H,null,te(ne.value,n=>(u(),g("div",{key:n.product_id,class:"flex items-center gap-3 h-300 border-b pb-3 border-gray-300 dark:border-gray-700",style:{height:"200","overflow-y":"auto"}},[n.image_path?(u(),g("img",{key:0,src:t(n.image_path),alt:"product",class:"h-12 w-12 rounded object-cover"},null,8,dt)):S("",!0),i("div",ut,[i("p",pt,C(n.product_name),1),i("p",gt,"Stock: "+C(n.qty_available),1),i("p",ft,C(a((n.price_sell??0)>0?n.price_sell??0:n.price??0)),1),i("p",mt,"Size: "+C(n.size_id),1),i("p",vt," Diskon: "+C(a(n.discount??0)),1)]),i("div",ht,[i("button",{onClick:Q=>ee(ye)(n),disabled:n.quantity<=1,class:"rounded bg-gray-500 px-2 py-1 text-white disabled:opacity-50"}," - ",8,yt),i("span",bt,C(n.quantity),1),i("button",{onClick:Q=>ee(he)(n),class:"rounded bg-gray-500 px-2 py-1 text-white"}," + ",8,xt)]),i("button",{onClick:Q=>be(n.cartItemId),class:"text-lg text-red-500 hover:text-red-700"}," × ",8,_t)]))),128))],512),i("div",Ct,[i("p",kt,"Total Diskon: "+C(a(_e.value)),1),i("p",wt,"Total: "+C(a(xe.value)),1),i("button",{onClick:Ce,class:"mt-2 w-full rounded-md bg-indigo-600 py-2 text-white hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500"}," Lanjut Checkout ")])],2),A.value?(u(),g("div",{key:1,class:"fixed inset-0 z-50 flex items-center justify-center overflow-y-auto bg-black bg-opacity-50 px-4",onClick:pe(P,["self"])},[i("div",Lt,[i("button",{onClick:P,class:"absolute right-3 top-2 text-2xl font-bold text-gray-600 hover:text-gray-900 sm:text-xl"}," × "),i("div",Et,[d.value?(u(),g("div",$t,[(M=d.value)!=null&&M.gallery_images&&d.value.gallery_images.length>0?(u(),g("div",It,[se(ee(Ae),{"slides-per-view":1,"space-between":10,modules:e,pagination:{clickable:!0},navigation:!0,class:"mb-4 h-40 w-full rounded-lg sm:h-48 md:h-60"},{default:le(()=>[(u(!0),g(H,null,te(d.value.gallery_images,(n,Q)=>(u(),Ie(ee(He),{key:Q},{default:le(()=>[ke(n.extension)?(u(),g("img",{key:0,src:t(n.path),alt:n.filename||"product gallery image",class:"h-full w-full cursor-pointer rounded-lg object-cover transition hover:scale-105",onClick:aa=>$(t(n.path))},null,8,zt)):we(n.extension)?(u(),g("video",{key:1,src:t(n.path),controls:"",class:"h-full w-full rounded-lg object-cover"},null,8,St)):S("",!0)]),_:2},1024))),128))]),_:1})])):(U=d.value)!=null&&U.image_path?(u(),g("div",Bt,[i("img",{src:t(d.value.image_path),alt:"product",class:"h-full w-full cursor-pointer rounded-lg object-cover",onClick:l[2]||(l[2]=n=>$(t(d.value.image_path)))},null,8,Dt)])):(u(),g("div",qt," No Image ")),i("h3",Pt,C((G=d.value)==null?void 0:G.product_name),1),((X=d.value)==null?void 0:X.variant)!=="all"?(u(),g("div",Mt,[l[9]||(l[9]=i("h4",{class:"mb-1 text-sm font-semibold text-gray-700"},"Variant",-1)),i("div",jt,[(u(!0),g(H,null,te(r.value,n=>(u(),g("button",{key:n,onClick:()=>{D.value=n,z.value=null},class:ie(["rounded-full border px-3 py-1 text-sm font-semibold transition",D.value===n?"border-indigo-600 bg-indigo-600 text-white":"border-gray-300 bg-gray-200 text-gray-800 hover:bg-gray-300"])},C(n),11,Tt))),128))])])):S("",!0),D.value||((Y=d.value)==null?void 0:Y.variant)==="all"?(u(),g("div",Ft,[l[10]||(l[10]=i("h4",{class:"mb-1 text-sm font-semibold text-gray-700"},"Ukuran",-1)),i("div",At,[(u(!0),g(H,null,te(p.value,n=>(u(),g("button",{key:n,onClick:Q=>z.value=n,class:ie(["rounded-full border px-3 py-1 text-sm font-semibold transition",z.value===n?"border-green-600 bg-green-600 text-white":"border-gray-300 bg-gray-200 text-gray-800 hover:bg-gray-300"])},C(n),11,Ht))),128))])])):S("",!0),v.value?(u(),g("div",Ot,[i("p",null,[l[11]||(l[11]=K(" Stok: ")),i("strong",null,C(v.value.qty_available),1)]),i("p",null,[!v.value.price||v.value.price<=0?(u(),g("span",Nt," Harga Belum di Setting ")):(u(),g(H,{key:1},[(v.value.discount??0)>0?(u(),g("span",Vt," Harga "+C(a(v.value.price)),1)):S("",!0),l[12]||(l[12]=K()),l[13]||(l[13]=i("br",null,null,-1)),i("span",Gt," Harga Diskon "+C(a(v.value.price_sell||v.value.price)),1),l[14]||(l[14]=i("br",null,null,-1)),(v.value.discount??0)>0?(u(),g("span",Rt," (Diskon: "+C(a(v.value.discount??0))+") ",1)):S("",!0)],64))])])):S("",!0),i("div",{class:"w-full",innerHTML:(J=d.value)==null?void 0:J.product_description},null,8,Ut),i("div",Qt,[i("button",{onClick:N,disabled:w.value<=1,class:"rounded bg-gray-200 px-3 py-1 text-sm text-gray-800 disabled:opacity-50"}," - ",8,Kt),de(i("input",{type:"number",min:"1",max:((Z=v.value)==null?void 0:Z.qty_available)??1,"onUpdate:modelValue":l[3]||(l[3]=n=>w.value=n),class:"w-12 rounded border py-1 text-center text-sm text-gray-800 sm:w-16"},null,8,Wt),[[ue,w.value,void 0,{number:!0}]]),i("button",{onClick:I,disabled:w.value>=(((re=v.value)==null?void 0:re.qty_available)??1),class:"rounded px-3 py-1 text-sm disabled:opacity-50"}," + ",8,Xt)])])):S("",!0),i("div",Yt,[i("button",{onClick:L,disabled:(((oe=d.value)==null?void 0:oe.qty_available)??0)===0||(((ce=v.value)==null?void 0:ce.price_sell)??0)===0,class:"w-full rounded bg-blue-600 py-2 text-sm text-white hover:bg-blue-700 disabled:opacity-50 sm:py-3"}," Tambah Keranjang ",8,Jt)])])])])):S("",!0)]}),_:1}),o.value?(u(),g("div",{key:0,class:"fixed inset-0 z-[9999] flex items-center justify-center bg-black bg-opacity-75",onClick:pe(O,["self"])},[i("div",Zt,[i("img",{src:c.value,alt:"Fullscreen Product Image",class:"max-h-screen max-w-full object-contain"},null,8,ea),i("button",{onClick:O,class:"absolute right-4 top-4 flex h-12 w-12 items-center justify-center rounded-full bg-black bg-opacity-50 text-4xl font-bold text-white"}," × ")])])):S("",!0)],64))}}),da=Be(ta,[["__scopeId","data-v-dcd2a089"]]);export{da as default};
